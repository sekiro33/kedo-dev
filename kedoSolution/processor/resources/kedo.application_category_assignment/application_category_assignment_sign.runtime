{"scripts":"async function fileds_set() {\n    let app = await Context.data.application_category_assignment.fetch();\n    app.data.__file = Context.data.file;\n    app.data.line_file_name = (await Context.data.file.fetch()).data.__name;\n    app.data.staff = Context.data.staff;\n    app.data.category_assignment = Context.data.category_assignment;\n    await app.save();\n    await status_set();\n}\nasync function status_set() {\n    let app = await Context.data.application_category_assignment.fetch();\n    app.data.duration = Math.round(app.data.duration);\n    app.data.line_status = `${app.data.__status.code};${app.data.__status.name}`;\n    await app.save();\n}\nasync function set_status(app, status) {\n    await app.setStatus(status);\n}\nasync function set_status_signed() {\n    let app = await Context.data.application_category_assignment.fetch();\n    await set_status(app, app.fields.__status.variants.signed);\n}\nasync function set_status_rejected() {\n    let app = await Context.data.application_category_assignment.fetch();\n    await set_status(app, app.fields.__status.variants.removed);\n}\nasync function get_fio() {\n    if (Context.data.signatory) {\n        let app = await Context.data.signatory.fetch();\n        Context.data.fio_director = app.data.fullname;\n    }\n}\nasync function createStatusObj(app, status) {\n    const obj_status = {\n        'app': {\n            'namespace': app.namespace,\n            'code': app.code,\n            'id': app.id,\n        },\n        'status': status,\n    };\n    Context.data.kedo_status = JSON.stringify(obj_status);\n}\nasync function createStatusCanceled() {\n    createStatusObj(Context.data.application_category_assignment, 'cancelled');\n}\nasync function createStatusSigning() {\n    createStatusObj(Context.data.application_category_assignment, 'signing');\n}\nasync function createStatusApproval() {\n    createStatusObj(Context.data.application_category_assignment, 'approval');\n}\n","gatewayPairs":{},"hasTranslations":false}
