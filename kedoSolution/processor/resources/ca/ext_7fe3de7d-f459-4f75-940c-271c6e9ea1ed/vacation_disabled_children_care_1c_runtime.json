{
  "scripts": "async function action() {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const date = new Datetime();\n    const body = {\n        \"Date\": `${date.format('YYYY-MM-DD')}T00:00:00`,\n        \"ПериодРегистрации\": `${date.format('YYYY-MM')}-01T00:00:00`,\n        \"Организация_Key\": (_a = Context.data.organization_id_1c) !== null && _a !== void 0 ? _a : \"\",\n        \"Сотрудник_Key\": (_b = Context.data.staff_id_1c) !== null && _b !== void 0 ? _b : \"\",\n        \"ФизическоеЛицо_Key\": (_c = Context.data.staff_personal_id_1c) !== null && _c !== void 0 ? _c : \"\",\n        \"ДатаНачала\": `${Context.data.start_date}T00:00:00`,\n        \"ДатаОкончания\": `${Context.data.end_date}T00:00:00`,\n        \"Комментарий\": (_d = Context.data.comment) !== null && _d !== void 0 ? _d : \"\",\n        \"СведенияОВторомРодителе\": (_e = Context.data.second_parent_info) !== null && _e !== void 0 ? _e : \"\",\n        \"ПорядокВыплаты\": \"Аванс\",\n        \"ДниУхода\": [],\n    };\n    const days = [];\n    const start_date = new Datetime(Context.data.start_date, \"YYYY-MM-DD\");\n    const duration = Context.data.duration;\n    for (let i = 0; i < duration; i++) {\n        const date = start_date.addDate(0, 0, i);\n        days.push({\n            LineNumber: i + 1,\n            \"Дата\": date.format('YYYY-MM-DD'),\n        });\n    }\n    body['ДниУхода'] = days;\n    const accounting1c = Namespace.params.fields.awaiting_docs_table_1c.app.fields.accounting_systems.variants.zup_1c;\n    const awaitingApp = Namespace.params.fields.awaiting_docs_table_1c.app.create();\n    awaitingApp.data.__name = \"Оплата дней ухода за детьми-инвалидами\";\n    awaitingApp.data.document_odata_name = \"Document_ОплатаДнейУходаЗаДетьмиИнвалидами\";\n    awaitingApp.data.personal_guid_1c = JSON.stringify([Context.data.staff_personal_id_1c]);\n    awaitingApp.data.accounting_systems = accounting1c;\n    awaitingApp.data.document_creation_data = JSON.stringify(body);\n    awaitingApp.data.additional_info = (_f = Context.data.additional_info) !== null && _f !== void 0 ? _f : \"\";\n    awaitingApp.data.base_1c_name = (_g = Context.data.connection_name) !== null && _g !== void 0 ? _g : undefined;\n    await awaitingApp.save();\n    Context.data.integration_app_id = awaitingApp.data.__id;\n}\n(async function () {\n    action();\n});\n",
  "execution": [
    {
      "code": "sync",
      "name": "Синхронное"
    }
  ],
  "allowGlobal": false,
  "checkInterval": ""
}
