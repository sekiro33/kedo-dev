{
  "scripts": "async function action() {\n    var _a;\n    if (!Context.data.business_trip_data) {\n        throw new Error(\"Context.data.business_trip_data is undefined\");\n    }\n    const current_date = new Datetime();\n    const business_trip_data = JSON.parse(Context.data.business_trip_data);\n    let body = {\n        \"Date\": current_date.format(\"YYYY-MM-DDT00:00:00\"),\n        \"ПериодРегистрации\": current_date.format(\"YYYY-MM-01T00:00:00\"),\n        \"Организация_Key\": business_trip_data.staff.organization_id,\n        \"Сотрудник_Key\": business_trip_data.staff.id_1c,\n        \"ФизическоеЛицо_Key\": business_trip_data.staff.individual_id_1c,\n        \"ДатаНачала\": business_trip_data.start_date,\n        \"ДатаНачалаСобытия\": business_trip_data.end_date,\n        \"ДатаОкончания\": business_trip_data.end_date,\n        \"ПланируемаяДатаВыплаты\": business_trip_data.payment_date,\n        \"МестоНазначения\": business_trip_data.city,\n        \"ОрганизацияНазначения\": business_trip_data.destination_organization,\n        \"Цель\": business_trip_data.mission_trip,\n        \"Основание\": business_trip_data.statement,\n        \"КомандировкаЗаСчетСредств\": business_trip_data.expense_of_funds,\n        \"ОсвобождатьСтавку\": false,\n        \"ДокументРассчитан\": false,\n        \"ПорядокВыплаты\": \"Межрасчет\",\n    };\n    const accounting1c = Namespace.params.fields.integration_app.app.fields.accounting_systems.variants.zup_1c;\n    const integration_app = Namespace.params.fields.integration_app.app.create();\n    integration_app.data.__name = `Командировка (${business_trip_data.staff.name})`;\n    integration_app.data.document_odata_name = \"Document_Командировка\";\n    integration_app.data.accounting_systems = accounting1c;\n    integration_app.data.personal_guid_1c = JSON.stringify([business_trip_data.staff.individual_id_1c]);\n    integration_app.data.document_creation_data = JSON.stringify(body);\n    integration_app.data.additional_info = (_a = Context.data.additional_info) !== null && _a !== void 0 ? _a : \"\";\n    integration_app.data.base_1c_name = Context.data.connection_name;\n    integration_app.data.related_element = Context.data.app;\n    await integration_app.save();\n    Context.data.integration_app_id = integration_app.data.__id;\n}\n(async function () {\n    action();\n});\n",
  "execution": [
    {
      "code": "sync",
      "name": "Синхронное"
    }
  ],
  "allowGlobal": false,
  "checkInterval": ""
}
