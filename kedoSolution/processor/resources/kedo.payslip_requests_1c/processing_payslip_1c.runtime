{"scripts":"async function check_personal_id() {\n    if (Context.data.staff) {\n        const staff = await Context.data.staff.fetch();\n        return staff.data.individual_id_1c ? true : false;\n    }\n    return false;\n}\nasync function get_payslip_request() {\n    if (!Context.data.integration_app_id) {\n        Context.data.error = `Отсутствует ID приложения интеграции (запрос на РЛ)`;\n        throw new Error(Context.data.error);\n    }\n    if (Context.data.integration_app_id) {\n        Context.data.payslip_requests_1c = await Context.fields.payslip_requests_1c.app.search()\n            .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.__id.eq(Context.data.integration_app_id)))\n            .first();\n        if (!Context.data.payslip_requests_1c) {\n            Context.data.error = `Не найдено приложение интеграции (запрос на РЛ)`;\n            throw new Error(Context.data.error);\n        }\n    }\n}\nasync function get_print_form() {\n    if (Context.data.payslip_requests_1c) {\n        const payslip_requests_1c = await Context.data.payslip_requests_1c.fetch();\n        if (payslip_requests_1c.data.print_forms \u0026\u0026 payslip_requests_1c.data.print_forms.length \u003e 0) {\n            Context.data.payslip_file = payslip_requests_1c.data.print_forms[0];\n        }\n    }\n}\n","gatewayPairs":{},"hasTranslations":false}
