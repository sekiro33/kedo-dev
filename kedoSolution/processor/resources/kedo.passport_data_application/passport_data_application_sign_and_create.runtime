{"scripts":"async function fileds_set() {\n    let app = await Context.data.passport_data_application.fetch();\n    app.data.__file = Context.data.file;\n    app.data.staff = Context.data.staff;\n    await app.save();\n    await status_set();\n}\nasync function status_set() {\n    let app = await Context.data.passport_data_application.fetch();\n    app.data.duration = Math.round(app.data.duration);\n    app.data.line_status = `${app.data.__status.code};${app.data.__status.name}`;\n    await app.save();\n}\nasync function getSettings() {\n    const custom_generate_personal_data_doc = await Context.fields.settings_kedo.app.search()\n        .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.code.eq('custom_generate_personal_data_doc')))\n        .first();\n    Context.data.custom_generate_personal_data_doc = custom_generate_personal_data_doc ? custom_generate_personal_data_doc.data.status : false;\n    if (Context.data.signatory) {\n        const headApp = await Context.fields.staff.app.search()\n            .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.ext_user.eq(Context.data.signatory)))\n            .first();\n        Context.data.boss_position = headApp.data.position;\n        Context.data.boss_fio = (await Context.data.signatory.fetch()).data.fullname;\n    }\n}\nasync function createStatusObj(app, status) {\n    const obj_status = {\n        'app': {\n            'namespace': app.namespace,\n            'code': app.code,\n            'id': app.id,\n        },\n        'status': status,\n    };\n    Context.data.kedo_status = JSON.stringify(obj_status);\n}\nasync function createStatusPDCancelled() {\n    createStatusObj(Context.data.passport_data_application, 'cancelled');\n}\nasync function createStatusPDApproval() {\n    createStatusObj(Context.data.passport_data_application, 'approval');\n}\nasync function createStatusPDSigning() {\n    createStatusObj(Context.data.passport_data_application, 'signing');\n}\n","gatewayPairs":{},"hasTranslations":false}
