{"scripts":"async function set_contract_filed() {\n    if (Context.data.additional_transfer_agreement) {\n        let additional_transfer_agreement = await Context.data.additional_transfer_agreement.fetch();\n        additional_transfer_agreement.data.line_status = `${additional_transfer_agreement.data.__status.code};${additional_transfer_agreement.data.__status.name}`;\n        await additional_transfer_agreement.save();\n    }\n    const transfer_order = await Context.data.transfer_order.fetch();\n    transfer_order.data.line_file_name = `${transfer_order.data.__status.code};${transfer_order.data.__status.name}`;\n    await transfer_order.save();\n}\nasync function set_file_name_filed() {\n    if (Context.data.additional_transfer_agreement) {\n        const additional_transfer_agreement = await Context.data.additional_transfer_agreement.fetch();\n        additional_transfer_agreement.data.line_file_name = (await additional_transfer_agreement.data.__file.fetch()).data.__name;\n        await additional_transfer_agreement.save();\n    }\n    const transfer_order = await Context.data.transfer_order.fetch();\n    transfer_order.data.line_file_name = (await transfer_order.data.__file.fetch()).data.__name;\n    await transfer_order.save();\n}\nasync function get_labor_contract() {\n    const labor_contract = await Context.fields.labor_contract.app.search()\n        .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.staff.link(Context.data.staff)))\n        .first();\n    if (labor_contract) {\n        Context.data.labor_contract = labor_contract;\n        Context.data.employment_contract_date = labor_contract.data.__createdAt.getDate();\n        Context.data.employment_contract_number = labor_contract.data.__index.toString();\n    }\n}\nasync function getEmploymentPlace() {\n    if (!Context.data.staff) {\n        throw new Error(\"staff is undefined\");\n    }\n    if (Context.data.transfer_table \u0026\u0026 Context.data.transfer_table.length \u003e 0) {\n        const row = Context.data.transfer_table.find(field =\u003e field.transfer_staff.id == Context.data.staff.id);\n        if (row) {\n            const place = await row.transfer_employment_place.fetch();\n            Context.data.employment_place = row.transfer_employment_place;\n            Context.data.current_posotion = place.data.position;\n        }\n    }\n}\n","gatewayPairs":{"/items/39db6d4c-599c-4e8b-b818-3703cd4c4923":"/items/f83af142-bc83-406a-81ff-5af1aba2b58d","/items/dea587cf-66e1-4721-890d-e87990e4f80f":"/items/7d42125c-0845-401b-bf82-9f19dad23a91"},"hasTranslations":false}
