{"scripts":"async function cancellationSubstitution() {\n    const combitation = await Context.data.execution_duties.fetch();\n    if (combitation.data.replacement_id \u0026\u0026 combitation.data.replacement_id.length \u003e 0) {\n        const susbtitution = await System.replacements.search().where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.__id.eq(combitation.data.replacement_id))).first();\n        if (susbtitution) {\n            Context.data.debug = 'Нашли замещение';\n            const now = new Datetime;\n            if (susbtitution.data.begin.before(now)) {\n                await susbtitution.interrupt();\n            }\n            else {\n                Context.data.debug += ', удалили неначатое замещение';\n                await susbtitution.delete();\n            }\n        }\n    }\n}\n","gatewayPairs":{},"hasTranslations":false}
