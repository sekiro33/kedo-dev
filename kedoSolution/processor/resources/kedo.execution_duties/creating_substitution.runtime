{"scripts":"async function createReplacement() {\n    if (!Context.data.execution_duties) {\n        throw new Error(\"Context.data.execution_duties is undefined\");\n    }\n    const execution_duties = await Context.data.execution_duties.fetch();\n    const replacement_staff = await execution_duties.data.substitute.fetch();\n    const absent = await execution_duties.data.staff.fetch();\n    const newReplacement = System.replacements.create();\n    newReplacement.data.type = newReplacement.fields.type.variants.reassign;\n    newReplacement.data.absent = absent.data.ext_user;\n    newReplacement.data.replacement = replacement_staff.data.ext_user;\n    newReplacement.data.begin = execution_duties.data.start_date;\n    newReplacement.data.end = execution_duties.data.end_date;\n    await newReplacement.save();\n    execution_duties.data.replacement_id = newReplacement.id;\n    await execution_duties.save();\n    Context.data.alert_body = `Вас назначили как временно замещающего для сотрудника ${absent.data.__name} с ${execution_duties.data.start_day_line} по ${execution_duties.data.end_date_line}`;\n}\n","gatewayPairs":{},"hasTranslations":false}
