{"scripts":"async function validate() {\n    Context.data.is_valid = true;\n    if (!Context.data.staff || !Context.data.prev_position || !Context.data.end_transfer_date || !Context.data.prev_position_date) {\n        Context.data.is_valid = false;\n    }\n}\nasync function restorePosition() {\n    if (Context.data.staff \u0026\u0026 Context.data.prev_position) {\n        let employee = await Context.data.staff.fetch();\n        let position = await Context.data.prev_position.fetch();\n        if (employee.data.employment_table) {\n            let row = employee.data.employment_table.find((item) =\u003e item.id_1c === Context.data.employee_id);\n            if (row) {\n                row.position = Context.data.prev_position;\n                row.subdivision = position.data.subdivision;\n                row.organization = position.data.organization;\n                row.admission_date_position = Context.data.prev_position_date;\n                if (Context.data.is_main_worktype) {\n                    employee.data.position = Context.data.prev_position;\n                    employee.data.structural_subdivision = position.data.subdivision;\n                    employee.data.organization = position.data.organization;\n                    employee.data.admission_date_position = Context.data.prev_position_date;\n                }\n                await employee.save();\n            }\n        }\n    }\n}\n","gatewayPairs":{},"hasTranslations":false}
