{"scripts":"async function get_doc() {\n    let ref = undefined;\n    if (Context.data.business_trip_application) {\n        const business_trip = Context.data.business_trip_application;\n        ref = new RefItem(business_trip.namespace, business_trip.code, business_trip.id);\n    }\n    if (Context.data.withoutpay_leave_application) {\n        const withoutpay_leave_application = Context.data.withoutpay_leave_application;\n        ref = new RefItem(withoutpay_leave_application.namespace, withoutpay_leave_application.code, withoutpay_leave_application.id);\n    }\n    if (Context.data.paid_leave_application) {\n        const paid_leave_application = Context.data.paid_leave_application;\n        ref = new RefItem(paid_leave_application.namespace, paid_leave_application.code, paid_leave_application.id);\n    }\n    if (Context.data.mat_help) {\n        const mat_help = Context.data.mat_help;\n        ref = new RefItem(mat_help.namespace, mat_help.code, mat_help.id);\n    }\n    if (ref) {\n        Context.data.kad_docs = await Context.fields.kad_docs.app.search().where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.__sourceRef.eq(ref))).first();\n    }\n}\nasync function runProcess() {\n    const process_template = Namespace.processes.typical_business_process;\n    if (!Context.data.kad_docs) {\n        throw new Error(\"Context.data.kad_docs is undefined\");\n    }\n    const kad_docs = await Context.data.kad_docs.fetch();\n    if (!kad_docs.data.__sourceRef) {\n        throw new Error(\"__sourceRef of kad_docs is undefined\");\n    }\n    const source = kad_docs.data.__sourceRef;\n    const context = {\n        personnel_documents: [Context.data.kad_docs.id],\n        leave_application_withoutpay: Context.data.withoutpay_leave_application ? [Context.data.withoutpay_leave_application.id] : null,\n        leavle_application: Context.data.paid_leave_application ? [Context.data.paid_leave_application.id] : null,\n        financial_assistance_application: Context.data.mat_help ? [Context.data.mat_help.id] : null,\n        business_trip: Context.data.business_trip_application ? [Context.data.business_trip_application.id] : null,\n        employment_placement: Context.data.employment_placement ? [Context.data.employment_placement.id] : null,\n        __item: {\n            id: source.id,\n            code: source.code,\n            namespace: source.namespace,\n        }\n    };\n    await process_template.run(context);\n}\n","gatewayPairs":{},"hasTranslations":false}
