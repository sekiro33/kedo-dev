{"scripts":"async function prepareData() {\n    if (Context.data.staff) {\n        const staff = await Context.data.staff.fetch();\n        if (staff.data.structural_subdivision) {\n            Context.data.division = staff.data.structural_subdivision;\n        }\n        if (staff.data.position) {\n            Context.data.position = staff.data.position;\n        }\n        if (staff.data.list_sign_lna \u0026\u0026 staff.data.list_sign_lna.length \u003e 0) {\n            let index = 0;\n            for (let item of staff.data.list_sign_lna) {\n                const lna = await item.fetch();\n                if (lna.data.list_acquaintances \u0026\u0026 lna.data.list_acquaintances.length \u003e 0) {\n                    const row_lna = lna.data.list_acquaintances.find(f =\u003e f.staff.id == staff.id);\n                    if (row_lna) {\n                        const date_review = row_lna.date_review;\n                        const row_report = Context.data.list_lna.insert();\n                        index += 1;\n                        row_report.number = index;\n                        row_report.lna = item;\n                        row_report.date_review = 'Ознакомлен,' + date_review.format('DD.MM.YYYY') + ' г.';\n                    }\n                }\n            }\n            Context.data.list_lna = Context.data.list_lna;\n        }\n    }\n}\n","gatewayPairs":{},"hasTranslations":false}
