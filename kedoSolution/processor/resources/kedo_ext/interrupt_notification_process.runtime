{"scripts":"async function get_notification_process_id() {\n    const process = await System.processes._searchInstances().where(f =\u003e f.__id.eq(Context.id)).first();\n    if (!process) {\n        throw new Error('Не найден текущий экзепляр процесса. process is undefined');\n    }\n    if (!process.data.__parentId) {\n        throw new Error('Не найден экзепляр процесса напоминания. process.data.__parentId is undefined');\n    }\n    const parent_process = await System.processes._searchInstances().where(f =\u003e f.__id.eq(process.data.__parentId)).first();\n    if (!parent_process) {\n        throw new Error('Не найден экзепляр процесса напоминания. parent_process is undefined');\n    }\n    Context.data.notification_process_link = `${System.getBaseUrl()}/admin/monitor/${parent_process.data.__templateId}(p:history/${parent_process.id})`;\n    Context.data.notify_process_id = process.data.__parentId;\n}\nasync function check_task() {\n    if (!Context.data.task_id) {\n        return -1;\n    }\n    const task = await System.processes._searchTasks().where(f =\u003e f.__id.eq(Context.data.task_id)).first();\n    if (!task) {\n        return -1;\n    }\n    if (task.data.state != 'in_progress') {\n        return 0;\n    }\n    return 1;\n}\nasync function interrupt_process() {\n    var _a;\n    const proccess = await System.processes._searchInstances().where(f =\u003e f.__id.eq(Context.data.notify_process_id)).first();\n    try {\n        await proccess.interrupt((_a = Context.data.interrupt_reason) !== null \u0026\u0026 _a !== void 0 ? _a : \"unknown reason\");\n    }\n    catch (e) {\n        Context.data.__comment = JSON.stringify(e);\n    }\n}\n","gatewayPairs":{},"hasTranslations":false}
