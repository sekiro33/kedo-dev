{"scripts":"async function get_data() {\n    if (Context.data.chief_app) {\n        Context.data.chief = (await Context.data.chief_app.fetch()).data.ext_user;\n    }\n    Context.data.alert_body = `Сотрудник ${(await Context.data.staff.fetch()).data.__name} отозвал заявление на увольнение`;\n    if (Context.data.letter_of_resignation) {\n        let app = await Context.data.letter_of_resignation.fetch();\n        if (app.data.linked_order) {\n            let order = await app.data.linked_order.fetch();\n            order.setStatus(order.fields.__status.variants.recall);\n        }\n    }\n}\nasync function set_contract_field() {\n    let statement = await Context.data.letter_of_resignation.fetch();\n    statement.data.line_status = statement.data.__status.code + ';' + statement.data.__status.name;\n    await statement.save();\n}\nasync function interrupt_process() {\n    if (Context.data.letter_of_resignation) {\n        let app = await Context.data.letter_of_resignation.fetch();\n        let id = app.data.id_process;\n        let process = await Context.fields.staff.app.processes.the_dismissal_process._searchInstances().where((proc, g) =\u003e g.and(proc.__id.eq(id))).first();\n        if (process) {\n            try {\n                await process.interrupt(\"Отзыв заявление\");\n            }\n            catch (e) {\n                Context.data.debug = e.message;\n            }\n        }\n    }\n}\n","gatewayPairs":{},"hasTranslations":false}
