{
  "__id": "018df5df-3a2d-7e9d-a711-13182cc926d4",
  "namespace": "kedo",
  "code": "signing_doc_by_staffs_workflow",
  "category": "00000000-0000-0000-0000-000000000000",
  "__name": "Подписание документа сотрудниками организации",
  "type": "bpmn",
  "draft": false,
  "version": 1,
  "context": [
    {
      "code": "staff",
      "type": "SYS_COLLECTION",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": true,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {
        "code": "staff",
        "filter": {
          "value": {
            "tf": {}
          },
          "enabled": false
        },
        "namespace": "kedo"
      },
      "view": {
        "name": "Сотрудник",
        "data": {},
        "input": true,
        "output": true
      }
    },
    {
      "code": "staff_user",
      "type": "SYS_USER",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": true,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {
        "filter": {
          "value": {
            "tf": {}
          },
          "enabled": false
        }
      },
      "view": {
        "name": "Сотрудник (пользователь)",
        "data": {},
        "input": true,
        "output": true
      }
    },
    {
      "code": "personel_document",
      "type": "SYS_COLLECTION",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": true,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {
        "code": "personnel_documents",
        "filter": {
          "value": {
            "tf": {}
          },
          "enabled": false
        },
        "namespace": "personnel_documents"
      },
      "view": {
        "name": "Кадровый документы (Приказы и заявления)",
        "data": {},
        "input": true,
        "output": true
      }
    },
    {
      "code": "document_for_employment",
      "type": "SYS_COLLECTION",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": true,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {
        "code": "documents_for_employment",
        "filter": {
          "value": {
            "tf": {}
          },
          "enabled": false
        },
        "namespace": "kedo"
      },
      "view": {
        "name": "Документы для трудоустройства",
        "data": {},
        "input": true,
        "output": true
      }
    },
    {
      "code": "limit",
      "type": "DATETIME",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": false,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {},
      "view": {
        "name": "Подписать сотруднику до",
        "data": {
          "additionalType": "datetime",
          "defaultTimeType": "startOfDay"
        },
        "input": true,
        "output": true
      }
    }
  ],
  "manualRun": true,
  "readonly": false,
  "__createdAt": "2024-02-29T17:17:43.853728002Z",
  "__createdBy": "cc31283b-f390-46e0-85c1-612cce8051b2",
  "__updatedAt": "2024-02-29T17:28:36.243330467Z",
  "__updatedBy": "cc31283b-f390-46e0-85c1-612cce8051b2",
  "process": {
    "items": {
      "00000000-0000-0000-0000-000000000000": {
        "x": 24,
        "y": 104,
        "id": "00000000-0000-0000-0000-000000000000",
        "lane": "043280ce-ecee-4954-8036-1257dbd54751",
        "type": "start",
        "color": "#ffffff",
        "exits": ["fc306703-b0c4-4a92-9c26-7bf4a6cdab22"],
        "width": 32,
        "height": 32,
        "settings": {
          "formFields": [
            {
              "code": "__name",
              "display": "Название",
              "tooltip": "Название экземпляра процесса, будет показываться в задачах",
              "readonly": false,
              "required": true
            }
          ],
          "instruction": "",
          "notifyMessage": "Запущен процесс",
          "titleTemplate": "Подписание документа сотрудниками организации - {$__createdAt}",
          "titleGenerateMethod": "template"
        }
      },
      "0273104c-3200-47d3-a72d-30e923e4cb4d": {
        "x": 480,
        "y": 248,
        "id": "0273104c-3200-47d3-a72d-30e923e4cb4d",
        "icon": "end",
        "lane": "9018e976-8528-486c-8ea5-25f229cab13f",
        "name": "",
        "type": "end",
        "color": "#ffffff",
        "exits": [],
        "width": 32,
        "height": 32,
        "settings": {
          "actions": [],
          "isModal": false,
          "actionType": "nothing",
          "messageText": "",
          "redirectUrl": ""
        }
      },
      "1a741281-a56a-41b0-845b-9c2ae345a354": {
        "x": 264,
        "y": 104,
        "id": "1a741281-a56a-41b0-845b-9c2ae345a354",
        "icon": "exclusive",
        "lane": "9018e976-8528-486c-8ea5-25f229cab13f",
        "name": "",
        "type": "gateway",
        "color": "#ffffff",
        "exits": [
          "8b7a0eca-2d99-47e4-9fc7-73358abdfec7",
          "554277c3-d271-4dff-8c35-3fc72911d8bd"
        ],
        "width": 32,
        "height": 32,
        "settings": {
          "func": "",
          "type": "exclusive",
          "useFunc": false,
          "funcType": "STRING",
          "description": ""
        }
      },
      "1bc3c45f-f859-4401-bbf5-9428bb119c79": {
        "x": 656,
        "y": 104,
        "id": "1bc3c45f-f859-4401-bbf5-9428bb119c79",
        "icon": "end",
        "lane": "9018e976-8528-486c-8ea5-25f229cab13f",
        "name": "",
        "type": "end",
        "color": "#ffffff",
        "exits": [],
        "width": 32,
        "height": 32,
        "settings": {
          "actions": [],
          "isModal": false,
          "actionType": "nothing",
          "messageText": "",
          "redirectUrl": ""
        }
      },
      "500903d3-07d5-4af3-8979-efbf9931e998": {
        "x": 240,
        "y": 232,
        "id": "500903d3-07d5-4af3-8979-efbf9931e998",
        "icon": "send_doc",
        "lane": "9018e976-8528-486c-8ea5-25f229cab13f",
        "name": "Подписать документ",
        "type": "sign_item",
        "color": "#fde9a0",
        "exits": [
          "921b3fd5-72d7-4ebf-ba65-fe702df55d7d",
          "49b19291-ba9a-4293-82fe-a468987b2e57"
        ],
        "width": 80,
        "height": 64,
        "settings": {
          "code": "personnel_documents",
          "name": "Подписать документ по {ToString({$staff.full_name}, short, Д)}",
          "input": [
            {
              "target": {
                "kind": "context",
                "value": "personel_document"
              }
            }
          ],
          "target": "personel_document",
          "provider": {
            "code": "CryptoPro",
            "namespace": "system.__digital_sign_provider"
          },
          "signExit": "921b3fd5-72d7-4ebf-ba65-fe702df55d7d",
          "namespace": "personnel_documents",
          "cancelExit": "49b19291-ba9a-4293-82fe-a468987b2e57",
          "escalation": {
            "byTime": {
              "limit": {
                "code": "limit",
                "days": 0,
                "kind": "variable",
                "hours": 0,
                "minutes": 0,
                "absolute": false,
                "substraction": false
              },
              "action": {
                "notify": true,
                "interrupt": false,
                "receivers": [
                  {
                    "kind": "current"
                  }
                ]
              },
              "enabled": true
            }
          },
          "settingsSign": {
            "isSign": "required",
            "signFile": "required",
            "showComment": "optional",
            "signAttributes": "optional",
            "signDocflowSolution": "disabled"
          },
          "allowReassign": true,
          "isIgnoreSubstitutionTarget": ""
        }
      },
      "a53a818e-f2cf-45e7-b625-227818d2b2d6": {
        "x": 456,
        "y": 88,
        "id": "a53a818e-f2cf-45e7-b625-227818d2b2d6",
        "icon": "send_doc",
        "lane": "9018e976-8528-486c-8ea5-25f229cab13f",
        "name": "Подписать документ",
        "type": "sign_item",
        "color": "#fde9a0",
        "exits": [
          "ab3ded85-a1c3-40ee-a0b0-814bae86671e",
          "aae1b77d-bd5b-43a4-b31b-f988fb4e97a3"
        ],
        "width": 80,
        "height": 64,
        "settings": {
          "code": "documents_for_employment",
          "name": "Подписать документ по {ToString({$staff.full_name}, short, Д)}",
          "input": [
            {
              "target": {
                "kind": "context",
                "value": "document_for_employment"
              }
            }
          ],
          "target": "document_for_employment",
          "provider": {
            "code": "CryptoPro",
            "namespace": "system.__digital_sign_provider"
          },
          "signExit": "aae1b77d-bd5b-43a4-b31b-f988fb4e97a3",
          "namespace": "kedo",
          "cancelExit": "ab3ded85-a1c3-40ee-a0b0-814bae86671e",
          "escalation": {
            "byTime": {
              "limit": {
                "code": "limit",
                "days": 0,
                "kind": "variable",
                "hours": 0,
                "minutes": 0,
                "absolute": false,
                "substraction": false
              },
              "action": {
                "notify": true,
                "interrupt": false,
                "receivers": [
                  {
                    "kind": "current"
                  }
                ]
              },
              "enabled": true
            }
          },
          "settingsSign": {
            "isSign": "required",
            "signFile": "required",
            "showComment": "optional",
            "signAttributes": "optional",
            "signDocflowSolution": "disabled"
          },
          "allowReassign": true,
          "isIgnoreSubstitutionTarget": ""
        }
      },
      "b27fbdee-f08d-47dc-ada0-b8658e540435": {
        "x": 104,
        "y": 88,
        "id": "b27fbdee-f08d-47dc-ada0-b8658e540435",
        "icon": "system",
        "lane": "043280ce-ecee-4954-8036-1257dbd54751",
        "name": "Получить пользователя из карточки сотрудника",
        "type": "assignment",
        "color": "#fde9a0",
        "exits": ["07f8db2f-563c-4787-8ee1-57c0a4bc6c39"],
        "width": 80,
        "height": 64,
        "settings": {
          "bindings": [
            {
              "source": {
                "kind": "context",
                "value": "staff.ext_user"
              },
              "target": {
                "kind": "context",
                "value": "staff_user"
              }
            }
          ]
        }
      }
    },
    "lanes": {
      "043280ce-ecee-4954-8036-1257dbd54751": {
        "x": 8,
        "y": 8,
        "id": "043280ce-ecee-4954-8036-1257dbd54751",
        "name": "Инициатор",
        "color": "#d6f0cc",
        "width": 224,
        "height": 600,
        "settings": {
          "type": "dynamic",
          "variable": "__createdBy",
          "permissionExtend": {
            "kind": "simple"
          }
        },
        "direction": "vertical",
        "multiInstance": false
      },
      "9018e976-8528-486c-8ea5-25f229cab13f": {
        "x": 232,
        "y": 8,
        "id": "9018e976-8528-486c-8ea5-25f229cab13f",
        "name": "Сотрудник",
        "color": "#d6f0cc",
        "width": 560,
        "height": 600,
        "settings": {
          "type": "dynamic",
          "groups": [null],
          "variable": "staff_user",
          "permissionExtend": {
            "kind": "simple"
          }
        },
        "direction": "vertical",
        "multiInstance": false
      }
    },
    "paper": {
      "format": "A4",
      "orientation": "landscape"
    },
    "transitions": {
      "07f8db2f-563c-4787-8ee1-57c0a4bc6c39": {
        "id": "07f8db2f-563c-4787-8ee1-57c0a4bc6c39",
        "name": "",
        "path": [
          {
            "x": 184,
            "y": 120
          },
          {
            "x": 264,
            "y": 120
          }
        ],
        "type": "plain",
        "source": "b27fbdee-f08d-47dc-ada0-b8658e540435",
        "target": "1a741281-a56a-41b0-845b-9c2ae345a354",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "49b19291-ba9a-4293-82fe-a468987b2e57": {
        "id": "49b19291-ba9a-4293-82fe-a468987b2e57",
        "name": "Отказать",
        "path": [
          {
            "x": 280,
            "y": 296
          },
          {
            "x": 280,
            "y": 344
          },
          {
            "x": 496,
            "y": 344
          },
          {
            "x": 496,
            "y": 280
          }
        ],
        "type": "default",
        "source": "500903d3-07d5-4af3-8979-efbf9931e998",
        "target": "0273104c-3200-47d3-a72d-30e923e4cb4d",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "554277c3-d271-4dff-8c35-3fc72911d8bd": {
        "id": "554277c3-d271-4dff-8c35-3fc72911d8bd",
        "name": "Кадровый документ",
        "path": [
          {
            "x": 280,
            "y": 136
          },
          {
            "x": 280,
            "y": 232
          }
        ],
        "type": "default",
        "source": "1a741281-a56a-41b0-845b-9c2ae345a354",
        "target": "500903d3-07d5-4af3-8979-efbf9931e998",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "8b7a0eca-2d99-47e4-9fc7-73358abdfec7": {
        "id": "8b7a0eca-2d99-47e4-9fc7-73358abdfec7",
        "name": "Документ для трудоустройства",
        "path": [
          {
            "x": 296,
            "y": 120
          },
          {
            "x": 456,
            "y": 120
          }
        ],
        "type": "plain",
        "source": "1a741281-a56a-41b0-845b-9c2ae345a354",
        "target": "a53a818e-f2cf-45e7-b625-227818d2b2d6",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [
            {
              "a": {
                "kind": "context",
                "value": "document_for_employment"
              },
              "type": "SYS_COLLECTION",
              "inversion": false,
              "operation": {
                "relation": "empty",
                "inversion": true,
                "caseInsensitive": false
              },
              "conjunction": false
            }
          ],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "921b3fd5-72d7-4ebf-ba65-fe702df55d7d": {
        "id": "921b3fd5-72d7-4ebf-ba65-fe702df55d7d",
        "name": "Подписать",
        "path": [
          {
            "x": 320,
            "y": 264
          },
          {
            "x": 480,
            "y": 264
          }
        ],
        "type": "plain",
        "source": "500903d3-07d5-4af3-8979-efbf9931e998",
        "target": "0273104c-3200-47d3-a72d-30e923e4cb4d",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [
            {
              "a": {
                "kind": "context",
                "value": "__service"
              },
              "b": {
                "kind": "manual",
                "value": 99.99
              },
              "type": "FLOAT",
              "inversion": false,
              "operation": {
                "relation": "greater",
                "inversion": false,
                "caseInsensitive": false
              },
              "conjunction": false
            }
          ],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "aae1b77d-bd5b-43a4-b31b-f988fb4e97a3": {
        "id": "aae1b77d-bd5b-43a4-b31b-f988fb4e97a3",
        "name": "Подписать",
        "path": [
          {
            "x": 536,
            "y": 120
          },
          {
            "x": 656,
            "y": 120
          }
        ],
        "type": "plain",
        "source": "a53a818e-f2cf-45e7-b625-227818d2b2d6",
        "target": "1bc3c45f-f859-4401-bbf5-9428bb119c79",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [
            {
              "a": {
                "kind": "context",
                "value": "__service"
              },
              "b": {
                "kind": "manual",
                "value": 99.99
              },
              "type": "FLOAT",
              "inversion": false,
              "operation": {
                "relation": "greater",
                "inversion": false,
                "caseInsensitive": false
              },
              "conjunction": false
            }
          ],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "ab3ded85-a1c3-40ee-a0b0-814bae86671e": {
        "id": "ab3ded85-a1c3-40ee-a0b0-814bae86671e",
        "name": "Отказать",
        "path": [
          {
            "x": 496,
            "y": 152
          },
          {
            "x": 496,
            "y": 248
          }
        ],
        "type": "default",
        "source": "a53a818e-f2cf-45e7-b625-227818d2b2d6",
        "target": "0273104c-3200-47d3-a72d-30e923e4cb4d",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "fc306703-b0c4-4a92-9c26-7bf4a6cdab22": {
        "id": "fc306703-b0c4-4a92-9c26-7bf4a6cdab22",
        "name": "",
        "path": [
          {
            "x": 56,
            "y": 120
          },
          {
            "x": 104,
            "y": 120
          }
        ],
        "type": "plain",
        "source": "00000000-0000-0000-0000-000000000000",
        "target": "b27fbdee-f08d-47dc-ada0-b8658e540435",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      }
    }
  },
  "scripts": "/**\nHere you can write scripts for complex server processing of the context during process execution.\nTo write scripts, use TypeScript (https://www.typescriptlang.org).\nELMA365 SDK documentation available on https://tssdk.elma365.com.\n**/\n",
  "forms": [],
  "settings": {
    "logged": true,
    "debugForm": {
      "allFields": false,
      "formFields": []
    },
    "targetFeed": {
      "type": "instance",
      "variable": ""
    },
    "allowGlobal": false,
    "instanceCard": {
      "allFields": true,
      "formFields": []
    },
    "notifyOnStart": true,
    "allowNamespace": false,
    "applicationContext": false,
    "importsDependencies": [],
    "fieldVisibilityConditions": {
      "limit": {
        "enabled": false,
        "conditions": []
      },
      "staff": {
        "enabled": false,
        "conditions": []
      },
      "staff_user": {
        "enabled": false,
        "conditions": []
      },
      "personel_document": {
        "enabled": false,
        "conditions": []
      },
      "document_for_employment": {
        "enabled": false,
        "conditions": []
      }
    }
  },
  "hideInList": false,
  "applicationLink": false,
  "__deletedAt": null
}
