{
  "__id": "018e83e7-588d-7e0b-87f4-ec1991b646ab",
  "namespace": "kedo.candidate_database",
  "code": "reminder_candidate",
  "category": "00000000-0000-0000-0000-000000000000",
  "__name": "Напоминание кандидату",
  "type": "bpmn",
  "draft": false,
  "version": 1,
  "context": [
    {
      "code": "title",
      "type": "STRING",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": false,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {},
      "view": {
        "name": "Заголовок оповещения",
        "data": {
          "additionalType": "text"
        },
        "input": true,
        "output": true
      }
    },
    {
      "code": "alert",
      "type": "STRING",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": false,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {},
      "view": {
        "name": "Тело оповещения",
        "data": {
          "additionalType": "text"
        },
        "input": true,
        "output": true
      }
    },
    {
      "code": "task_initiator",
      "type": "BOOLEAN",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": false,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {},
      "view": {
        "name": "Задача инициатору",
        "data": {
          "additionalType": "radio",
          "noValue": "Нет",
          "yesValue": "Да"
        },
        "input": true,
        "output": true
      }
    },
    {
      "code": "error",
      "type": "STRING",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": false,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {},
      "view": {
        "name": "error",
        "data": {
          "additionalType": "text"
        },
        "input": true,
        "output": true
      }
    },
    {
      "code": "task_id",
      "type": "STRING",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": false,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {},
      "view": {
        "name": "ID задачи",
        "data": {
          "additionalType": "string"
        },
        "input": true,
        "output": true
      }
    },
    {
      "code": "task_link",
      "type": "LINK",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": false,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {},
      "view": {
        "name": "Ссылка на задачу",
        "data": {},
        "input": true,
        "output": true
      }
    },
    {
      "code": "theme",
      "type": "STRING",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": false,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {},
      "view": {
        "name": "Тема письма",
        "data": {
          "additionalType": "text"
        },
        "input": true,
        "output": true
      }
    },
    {
      "code": "text_sms",
      "type": "STRING",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": false,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {},
      "view": {
        "name": "Текст уведомления для СМС",
        "data": {
          "additionalType": "text"
        },
        "input": true,
        "output": true
      }
    },
    {
      "code": "candidate_database",
      "type": "SYS_COLLECTION",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": true,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {
        "code": "candidate_database",
        "filter": null,
        "bindings": null,
        "namespace": "kedo",
        "isDependent": false,
        "linkedFieldCode": ""
      },
      "view": {
        "name": "Кандидат"
      }
    },
    {
      "code": "execution_time",
      "type": "DATETIME",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": false,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {},
      "view": {
        "name": "Срок выполнения",
        "data": {
          "additionalType": "datetime",
          "defaultTimeType": "startOfDay"
        },
        "input": true,
        "output": true
      }
    },
    {
      "code": "parent_process_link",
      "type": "LINK",
      "searchable": false,
      "indexed": false,
      "deleted": false,
      "array": false,
      "required": false,
      "single": true,
      "defaultValue": null,
      "calcByFormula": false,
      "formula": "",
      "data": {},
      "view": {
        "name": "Ссылка на родительский процесс",
        "data": {},
        "input": true,
        "output": true
      }
    }
  ],
  "manualRun": false,
  "readonly": false,
  "__createdAt": "2024-03-14T07:23:34.751702545Z",
  "__createdBy": "d4c0aacb-19ed-44fa-b229-5f7ed736889c",
  "__updatedAt": "2024-03-15T12:30:42.24286514Z",
  "__updatedBy": "cd06151e-bd48-4554-bb3b-34ae2f4e4eb3",
  "process": {
    "items": {
      "00000000-0000-0000-0000-000000000000": {
        "x": 96,
        "y": 320,
        "id": "00000000-0000-0000-0000-000000000000",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "type": "start",
        "color": "#ffffff",
        "exits": ["62967a07-cdee-4b66-b8a8-4cce2b1ae818"],
        "width": 32,
        "height": 32,
        "settings": {
          "formFields": [
            {
              "code": "__name",
              "display": "Название",
              "tooltip": "Название экземпляра процесса, будет показываться в задачах",
              "readonly": false,
              "required": true
            }
          ],
          "instruction": "",
          "notifyMessage": "Запущен процесс",
          "titleTemplate": "Напоминание кандидату ({$candidate_database})",
          "titleGenerateMethod": "template"
        }
      },
      "0104f438-f87e-4596-94c6-d39a55ffa220": {
        "x": 840,
        "y": 472,
        "id": "0104f438-f87e-4596-94c6-d39a55ffa220",
        "icon": "user",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "Связаться с кандидатом для уточнения",
        "type": "user",
        "color": "#daeef7",
        "exits": [
          "1622b169-141b-4c12-95c9-e2d570c47f98",
          "445f54a1-8947-4984-ba35-3ac4bfdd12fe"
        ],
        "width": 80,
        "height": 64,
        "settings": {
          "name": "Связаться с кандидатом {$candidate_database} для уточнения",
          "notify": true,
          "formCode": "form_a0c7cbf9-f9ef-4a98-a98c-9260e405c74a",
          "authorType": 0,
          "escalation": {
            "byTime": {
              "limit": {
                "days": 0,
                "kind": "duration",
                "hours": 0,
                "minutes": 0,
                "absolute": false
              },
              "action": {
                "notify": false,
                "interrupt": false,
                "receivers": []
              },
              "enabled": false
            }
          },
          "formFields": [
            {
              "code": "candidate_database",
              "data": {
                "listSettings": {
                  "sort": {
                    "field": "",
                    "direction": "",
                    "additionalSortSettings": null
                  },
                  "limit": 10,
                  "buttons": [
                    {
                      "id": "1c3afab1-8a74-4f96-8c64-740fba21689d",
                      "code": "create",
                      "type": "primary",
                      "label": "+ Кандидат",
                      "bindings": [],
                      "immutable": false,
                      "silentRun": false,
                      "permission": "create",
                      "skipRequired": false,
                      "defaultValues": {},
                      "useSimpleForm": false,
                      "simpleFormSize": "default",
                      "allowedGroupIds": [],
                      "allowedStatusIds": [],
                      "processLinkChanged": false,
                      "showForAllowedStatuses": false,
                      "showForAllowedStatusGroups": false
                    }
                  ],
                  "aggregateField": "",
                  "autoUpdateCards": false,
                  "enabledMassActions": false
                },
                "tableSettings": {
                  "displayFields": []
                },
                "createButtonId": "",
                "showCreateItem": true,
                "showSelectItem": true
              },
              "tooltip": "",
              "readonly": true,
              "required": false,
              "hideEmpty": false,
              "subfields": [
                {
                  "code": "phone",
                  "tooltip": "",
                  "readonly": true,
                  "required": false,
                  "hideEmpty": false
                },
                {
                  "code": "email",
                  "tooltip": "",
                  "readonly": true,
                  "required": false,
                  "hideEmpty": false
                },
                {
                  "code": "planned_position",
                  "tooltip": "",
                  "readonly": true,
                  "required": false,
                  "hideEmpty": false
                }
              ]
            }
          ],
          "priorityType": "context_var",
          "allowReassign": true,
          "descriptionType": "context_var",
          "placeContextVar": "",
          "planDatesSettings": {
            "enabled": false,
            "planCodes": {
              "endCode": "",
              "startCode": ""
            }
          },
          "disableEmailNotify": false,
          "isIgnoreSubstitutionTarget": "",
          "externalParticipantsContextVar": ""
        }
      },
      "27784972-3b9b-4197-b20f-110d74030461": {
        "x": 1152,
        "y": 320,
        "id": "27784972-3b9b-4197-b20f-110d74030461",
        "icon": "end",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "",
        "type": "end",
        "color": "#ffffff",
        "exits": [],
        "width": 32,
        "height": 32,
        "settings": {
          "actions": [],
          "isModal": false,
          "actionType": "nothing",
          "messageText": "",
          "redirectUrl": ""
        }
      },
      "393495b4-bf36-41fc-bc9c-d5c1e3aace49": {
        "x": 320,
        "y": 304,
        "id": "393495b4-bf36-41fc-bc9c-d5c1e3aace49",
        "icon": "script",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "Записать ID задачи в контекст",
        "type": "script",
        "color": "#fde9a0",
        "exits": [
          "d4476e0e-b81d-45bc-b179-9f97c6e956a8",
          "2e811098-8f0e-4006-84fa-0901e5947f5b"
        ],
        "width": 80,
        "height": 64,
        "settings": {
          "func": "get_task_id",
          "count": 1,
          "delay": 5,
          "retry": true,
          "escalation": {
            "byError": {
              "exit": "d4476e0e-b81d-45bc-b179-9f97c6e956a8",
              "notify": false,
              "interrupt": true,
              "receivers": []
            }
          }
        }
      },
      "6123b8ef-76a6-46e7-b66f-a5721a4fc641": {
        "x": 184,
        "y": 304,
        "id": "6123b8ef-76a6-46e7-b66f-a5721a4fc641",
        "icon": "script",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "Таймер (10 секунд)",
        "type": "script",
        "color": "#fde9a0",
        "exits": ["9cf97ebb-bdb7-456b-aabc-1ba9a7f49493"],
        "width": 80,
        "height": 64,
        "settings": {
          "func": "timer_10",
          "count": 1,
          "delay": 5,
          "retry": true,
          "escalation": {
            "byError": {
              "notify": false,
              "interrupt": false,
              "receivers": []
            }
          }
        }
      },
      "63f9c20f-da3c-405c-a543-f6ea97e9bd23": {
        "x": 728,
        "y": 320,
        "id": "63f9c20f-da3c-405c-a543-f6ea97e9bd23",
        "icon": "exclusive",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "",
        "type": "gateway",
        "color": "#ffffff",
        "exits": [
          "a19ea8f0-0cb2-4059-8ac8-0a95fc62a364",
          "0e5f980e-e42a-4d7f-af0d-b4d879eb404c"
        ],
        "width": 32,
        "height": 32,
        "settings": {
          "func": "",
          "type": "exclusive",
          "useFunc": false,
          "funcType": "STRING",
          "description": ""
        }
      },
      "89eb4a0f-6ad1-469e-a127-912cd3bdd17e": {
        "x": 992,
        "y": 392,
        "id": "89eb4a0f-6ad1-469e-a127-912cd3bdd17e",
        "icon": "script",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "Прерывание процесса рассмотрения",
        "type": "script",
        "color": "#fde9a0",
        "exits": ["678ceb2c-c2c8-4f29-ad87-2f4349063264"],
        "width": 80,
        "height": 64,
        "settings": {
          "func": "interrupt",
          "count": 1,
          "delay": 5,
          "retry": true,
          "escalation": {
            "byError": {
              "notify": false,
              "interrupt": false,
              "receivers": []
            }
          }
        }
      },
      "967e7db9-6856-42e7-a93c-b03434348cee": {
        "x": 1152,
        "y": 488,
        "id": "967e7db9-6856-42e7-a93c-b03434348cee",
        "icon": "parallel",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "",
        "type": "gateway",
        "color": "#ffffff",
        "exits": ["2068d261-48be-45b6-99b5-372941817cb5"],
        "width": 32,
        "height": 32,
        "settings": {
          "func": "",
          "type": "parallel",
          "useFunc": false,
          "funcType": "STRING",
          "description": ""
        }
      },
      "98804586-0006-45cc-91e0-77dcbc8edec5": {
        "x": 728,
        "y": 488,
        "id": "98804586-0006-45cc-91e0-77dcbc8edec5",
        "icon": "parallel",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "",
        "type": "gateway",
        "color": "#ffffff",
        "exits": [
          "77e9a923-7ab2-4f49-8083-040c06ba0732",
          "e70d1989-d885-45d3-b6b4-cde4ac197676"
        ],
        "width": 32,
        "height": 32,
        "settings": {
          "func": "",
          "type": "parallel",
          "useFunc": false,
          "funcType": "STRING",
          "description": ""
        }
      },
      "9cdb9ed4-35b7-4999-bd32-1be46ee53d66": {
        "x": 320,
        "y": 400,
        "id": "9cdb9ed4-35b7-4999-bd32-1be46ee53d66",
        "icon": "notification",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "Оповещение об ошибке",
        "type": "notification",
        "color": "#ffff66",
        "exits": ["e57d5bb7-1baa-4957-b652-dc8868ea88a7"],
        "width": 80,
        "height": 64,
        "settings": {
          "author": {
            "code": "",
            "kind": "system"
          },
          "target": {
            "kind": "process"
          },
          "receivers": [
            {
              "code": "administrators",
              "kind": "group",
              "multi": true,
              "namespace": "system"
            }
          ],
          "messageBody": "{$error}",
          "messageHeader": "Ошибка в процессе \"Напоминание кандидату\""
        }
      },
      "c6d772d6-55a9-4dde-825d-4e8baee49080": {
        "x": 440,
        "y": 304,
        "id": "c6d772d6-55a9-4dde-825d-4e8baee49080",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "Контроль закрытия задачи",
        "type": "call",
        "color": "#ffffff",
        "exits": ["c8b33726-da00-49f2-9403-d3b8a97768d1"],
        "width": 80,
        "height": 64,
        "settings": {
          "code": "interrupt_notification_process",
          "async": true,
          "input": [
            {
              "source": {
                "kind": "context",
                "value": "task_id"
              },
              "target": {
                "kind": "context",
                "value": "task_id"
              }
            }
          ],
          "output": [],
          "linkCode": "",
          "namespace": "kedo_ext",
          "subProcessTargetFieldCode": ""
        }
      },
      "c828c7da-91e5-4b20-bf6c-f08fae9497fc": {
        "x": 840,
        "y": 568,
        "id": "c828c7da-91e5-4b20-bf6c-f08fae9497fc",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "Оповещение кандидату",
        "type": "call",
        "color": "#ffffff",
        "exits": ["36b84c00-3e70-4397-bd06-bb9c00488924"],
        "width": 80,
        "height": 64,
        "settings": {
          "code": "notification",
          "async": true,
          "input": [
            {
              "source": {
                "kind": "manual",
                "value": true
              },
              "target": {
                "kind": "context",
                "value": "starting_from_working_with_candidate"
              }
            },
            {
              "source": {
                "kind": "context",
                "value": "candidate_database"
              },
              "target": {
                "kind": "context",
                "value": "candidate"
              }
            },
            {
              "source": {
                "kind": "context",
                "value": "theme"
              },
              "target": {
                "kind": "context",
                "value": "topic_of_the_letter"
              }
            },
            {
              "source": {
                "kind": "context",
                "value": "title"
              },
              "target": {
                "kind": "context",
                "value": "alert_head"
              }
            },
            {
              "source": {
                "kind": "context",
                "value": "text_sms"
              },
              "target": {
                "kind": "context",
                "value": "notification_text_for_sms"
              }
            },
            {
              "source": {
                "kind": "context",
                "value": "alert"
              },
              "target": {
                "kind": "context",
                "value": "alert_body"
              }
            }
          ],
          "output": [],
          "linkCode": "",
          "namespace": "kedo",
          "subProcessTargetFieldCode": ""
        }
      },
      "cc13082e-94a3-43ed-9ccd-94e9c030caf3": {
        "x": 344,
        "y": 520,
        "id": "cc13082e-94a3-43ed-9ccd-94e9c030caf3",
        "icon": "end",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "",
        "type": "end",
        "color": "#ffffff",
        "exits": [],
        "width": 32,
        "height": 32,
        "settings": {
          "actions": [],
          "isModal": false,
          "actionType": "nothing",
          "messageText": "",
          "redirectUrl": ""
        }
      },
      "edaeaa92-586c-423d-bf59-764361286699": {
        "x": 664,
        "y": 320,
        "id": "edaeaa92-586c-423d-bf59-764361286699",
        "icon": "timer",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "Ожидание срока задачи",
        "type": "event",
        "color": "#ffffff",
        "exits": ["8e07475b-ffe8-408d-a6b8-d2ca0241074d"],
        "width": 32,
        "height": 32,
        "settings": {
          "kind": "timer",
          "timer": {
            "code": "execution_time",
            "days": 0,
            "kind": "variable",
            "hours": 0,
            "minutes": 0,
            "absolute": false,
            "substraction": false
          }
        }
      },
      "fbca94e0-982a-4fef-8d95-4f111b6ab474": {
        "x": 840,
        "y": 304,
        "id": "fbca94e0-982a-4fef-8d95-4f111b6ab474",
        "lane": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "Оповещение кандидату",
        "type": "call",
        "color": "#ffffff",
        "exits": ["19206d08-3c51-4e83-9211-571f65c70824"],
        "width": 80,
        "height": 64,
        "settings": {
          "code": "notification",
          "async": true,
          "input": [
            {
              "source": {
                "kind": "manual",
                "value": true
              },
              "target": {
                "kind": "context",
                "value": "starting_from_working_with_candidate"
              }
            },
            {
              "source": {
                "kind": "context",
                "value": "candidate_database"
              },
              "target": {
                "kind": "context",
                "value": "candidate"
              }
            },
            {
              "source": {
                "kind": "context",
                "value": "theme"
              },
              "target": {
                "kind": "context",
                "value": "topic_of_the_letter"
              }
            },
            {
              "source": {
                "kind": "context",
                "value": "title"
              },
              "target": {
                "kind": "context",
                "value": "alert_head"
              }
            },
            {
              "source": {
                "kind": "context",
                "value": "text_sms"
              },
              "target": {
                "kind": "context",
                "value": "notification_text_for_sms"
              }
            },
            {
              "source": {
                "kind": "context",
                "value": "alert"
              },
              "target": {
                "kind": "context",
                "value": "alert_body"
              }
            }
          ],
          "output": [],
          "linkCode": "",
          "namespace": "kedo",
          "subProcessTargetFieldCode": ""
        }
      }
    },
    "lanes": {
      "b6c879c8-508a-4e3f-ab68-08c49cb863fb": {
        "x": 8,
        "y": 8,
        "id": "b6c879c8-508a-4e3f-ab68-08c49cb863fb",
        "name": "Инициатор",
        "color": "#d6f0cc",
        "width": 1428,
        "height": 760,
        "settings": {
          "type": "dynamic",
          "variable": "__createdBy",
          "permissionExtend": {
            "kind": "simple"
          }
        },
        "direction": "vertical",
        "multiInstance": false
      }
    },
    "paper": {
      "format": "A4",
      "orientation": "landscape"
    },
    "transitions": {
      "0e5f980e-e42a-4d7f-af0d-b4d879eb404c": {
        "id": "0e5f980e-e42a-4d7f-af0d-b4d879eb404c",
        "name": "",
        "path": [
          {
            "x": 744,
            "y": 352
          },
          {
            "x": 744,
            "y": 488
          }
        ],
        "type": "plain",
        "source": "63f9c20f-da3c-405c-a543-f6ea97e9bd23",
        "target": "98804586-0006-45cc-91e0-77dcbc8edec5",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [
            {
              "a": {
                "kind": "context",
                "value": "task_initiator"
              },
              "b": {
                "kind": "manual",
                "value": true
              },
              "type": "BOOLEAN",
              "inversion": false,
              "operation": {
                "relation": "equal",
                "inversion": false,
                "caseInsensitive": false
              },
              "conjunction": false
            }
          ],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "1622b169-141b-4c12-95c9-e2d570c47f98": {
        "id": "1622b169-141b-4c12-95c9-e2d570c47f98",
        "name": "Продолжить",
        "path": [
          {
            "x": 920,
            "y": 504
          },
          {
            "x": 1152,
            "y": 504
          }
        ],
        "type": "plain",
        "source": "0104f438-f87e-4596-94c6-d39a55ffa220",
        "target": "967e7db9-6856-42e7-a93c-b03434348cee",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "primary",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "19206d08-3c51-4e83-9211-571f65c70824": {
        "id": "19206d08-3c51-4e83-9211-571f65c70824",
        "name": "",
        "path": [
          {
            "x": 920,
            "y": 336
          },
          {
            "x": 1152,
            "y": 336
          }
        ],
        "type": "plain",
        "source": "fbca94e0-982a-4fef-8d95-4f111b6ab474",
        "target": "27784972-3b9b-4197-b20f-110d74030461",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "2068d261-48be-45b6-99b5-372941817cb5": {
        "id": "2068d261-48be-45b6-99b5-372941817cb5",
        "name": "",
        "path": [
          {
            "x": 1168,
            "y": 488
          },
          {
            "x": 1168,
            "y": 352
          }
        ],
        "type": "plain",
        "source": "967e7db9-6856-42e7-a93c-b03434348cee",
        "target": "27784972-3b9b-4197-b20f-110d74030461",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "2e811098-8f0e-4006-84fa-0901e5947f5b": {
        "id": "2e811098-8f0e-4006-84fa-0901e5947f5b",
        "name": "",
        "path": [
          {
            "x": 400,
            "y": 336
          },
          {
            "x": 440,
            "y": 336
          }
        ],
        "type": "plain",
        "source": "393495b4-bf36-41fc-bc9c-d5c1e3aace49",
        "target": "c6d772d6-55a9-4dde-825d-4e8baee49080",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "36b84c00-3e70-4397-bd06-bb9c00488924": {
        "id": "36b84c00-3e70-4397-bd06-bb9c00488924",
        "name": "",
        "path": [
          {
            "x": 920,
            "y": 600
          },
          {
            "x": 1168,
            "y": 600
          },
          {
            "x": 1168,
            "y": 520
          }
        ],
        "type": "plain",
        "source": "c828c7da-91e5-4b20-bf6c-f08fae9497fc",
        "target": "967e7db9-6856-42e7-a93c-b03434348cee",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "445f54a1-8947-4984-ba35-3ac4bfdd12fe": {
        "id": "445f54a1-8947-4984-ba35-3ac4bfdd12fe",
        "name": "Завершить рассмотрение",
        "path": [
          {
            "x": 880,
            "y": 472
          },
          {
            "x": 880,
            "y": 424
          },
          {
            "x": 992,
            "y": 424
          }
        ],
        "type": "plain",
        "source": "0104f438-f87e-4596-94c6-d39a55ffa220",
        "target": "89eb4a0f-6ad1-469e-a127-912cd3bdd17e",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "danger",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "62967a07-cdee-4b66-b8a8-4cce2b1ae818": {
        "id": "62967a07-cdee-4b66-b8a8-4cce2b1ae818",
        "name": "",
        "path": [
          {
            "x": 128,
            "y": 336
          },
          {
            "x": 184,
            "y": 336
          }
        ],
        "type": "plain",
        "source": "00000000-0000-0000-0000-000000000000",
        "target": "6123b8ef-76a6-46e7-b66f-a5721a4fc641",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "678ceb2c-c2c8-4f29-ad87-2f4349063264": {
        "id": "678ceb2c-c2c8-4f29-ad87-2f4349063264",
        "name": "",
        "path": [
          {
            "x": 1072,
            "y": 424
          },
          {
            "x": 1144,
            "y": 424
          },
          {
            "x": 1144,
            "y": 504
          },
          {
            "x": 1152,
            "y": 504
          }
        ],
        "type": "plain",
        "source": "89eb4a0f-6ad1-469e-a127-912cd3bdd17e",
        "target": "967e7db9-6856-42e7-a93c-b03434348cee",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "77e9a923-7ab2-4f49-8083-040c06ba0732": {
        "id": "77e9a923-7ab2-4f49-8083-040c06ba0732",
        "name": "",
        "path": [
          {
            "x": 760,
            "y": 504
          },
          {
            "x": 840,
            "y": 504
          }
        ],
        "type": "plain",
        "source": "98804586-0006-45cc-91e0-77dcbc8edec5",
        "target": "0104f438-f87e-4596-94c6-d39a55ffa220",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "8e07475b-ffe8-408d-a6b8-d2ca0241074d": {
        "id": "8e07475b-ffe8-408d-a6b8-d2ca0241074d",
        "name": "",
        "path": [
          {
            "x": 696,
            "y": 336
          },
          {
            "x": 728,
            "y": 336
          }
        ],
        "type": "plain",
        "source": "edaeaa92-586c-423d-bf59-764361286699",
        "target": "63f9c20f-da3c-405c-a543-f6ea97e9bd23",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "9cf97ebb-bdb7-456b-aabc-1ba9a7f49493": {
        "id": "9cf97ebb-bdb7-456b-aabc-1ba9a7f49493",
        "name": "",
        "path": [
          {
            "x": 264,
            "y": 336
          },
          {
            "x": 320,
            "y": 336
          }
        ],
        "type": "plain",
        "source": "6123b8ef-76a6-46e7-b66f-a5721a4fc641",
        "target": "393495b4-bf36-41fc-bc9c-d5c1e3aace49",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "a19ea8f0-0cb2-4059-8ac8-0a95fc62a364": {
        "id": "a19ea8f0-0cb2-4059-8ac8-0a95fc62a364",
        "name": "",
        "path": [
          {
            "x": 760,
            "y": 336
          },
          {
            "x": 840,
            "y": 336
          }
        ],
        "type": "default",
        "source": "63f9c20f-da3c-405c-a543-f6ea97e9bd23",
        "target": "fbca94e0-982a-4fef-8d95-4f111b6ab474",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "c8b33726-da00-49f2-9403-d3b8a97768d1": {
        "id": "c8b33726-da00-49f2-9403-d3b8a97768d1",
        "name": "",
        "path": [
          {
            "x": 520,
            "y": 336
          },
          {
            "x": 664,
            "y": 336
          }
        ],
        "type": "plain",
        "source": "c6d772d6-55a9-4dde-825d-4e8baee49080",
        "target": "edaeaa92-586c-423d-bf59-764361286699",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "d4476e0e-b81d-45bc-b179-9f97c6e956a8": {
        "id": "d4476e0e-b81d-45bc-b179-9f97c6e956a8",
        "name": "",
        "path": [
          {
            "x": 360,
            "y": 368
          },
          {
            "x": 360,
            "y": 400
          }
        ],
        "type": "error",
        "source": "393495b4-bf36-41fc-bc9c-d5c1e3aace49",
        "target": "9cdb9ed4-35b7-4999-bd32-1be46ee53d66",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "e57d5bb7-1baa-4957-b652-dc8868ea88a7": {
        "id": "e57d5bb7-1baa-4957-b652-dc8868ea88a7",
        "name": "",
        "path": [
          {
            "x": 360,
            "y": 464
          },
          {
            "x": 360,
            "y": 520
          }
        ],
        "type": "plain",
        "source": "9cdb9ed4-35b7-4999-bd32-1be46ee53d66",
        "target": "cc13082e-94a3-43ed-9ccd-94e9c030caf3",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      },
      "e70d1989-d885-45d3-b6b4-cde4ac197676": {
        "id": "e70d1989-d885-45d3-b6b4-cde4ac197676",
        "name": "",
        "path": [
          {
            "x": 744,
            "y": 520
          },
          {
            "x": 744,
            "y": 600
          },
          {
            "x": 840,
            "y": 600
          }
        ],
        "type": "plain",
        "source": "98804586-0006-45cc-91e0-77dcbc8edec5",
        "target": "c828c7da-91e5-4b20-bf6c-f08fae9497fc",
        "settings": {
          "exit": {
            "confirm": "none",
            "interrupt": false,
            "skipCheck": false,
            "formFields": [],
            "buttonClass": "default",
            "confirmText": "",
            "popoverSize": "md",
            "formDescription": ""
          },
          "conditions": [],
          "descritpion": ""
        },
        "nameShift": 0
      }
    }
  },
  "scripts": "/**\nHere you can write scripts for complex server processing of the context during process execution.\nTo write scripts, use TypeScript (https://www.typescriptlang.org).\nELMA365 SDK documentation available on https://tssdk.elma365.com.\n**/\nasync function timer_10(): Promise\u003cvoid\u003e {\n    let currentTime = new Datetime();\n    let needTime = new Datetime().add(new Duration(10, 'seconds'));\n\n    while (!currentTime.after(needTime)) {\n        currentTime = new Datetime();\n    }\n}\n\nasync function get_task_id(): Promise\u003cvoid\u003e {\n    // Получаем экземпляр текущего процесса.\n    const current_process = await System.processes._searchInstances().where(f =\u003e f.__id.eq(Context.id)).first();\n\n    // Получаем родительский процесс, из которого был запущен текущий процесс.\n    const parent_process = await System.processes._searchInstances().where(f =\u003e f.__id.eq(current_process!.data.__parentId!)).first();\n\n    if (!parent_process) {\n        Context.data.error = `Не удалось найти экземпляр родительского процесса. ID текущего процесса: ${current_process!.id}`;\n        throw new Error(Context.data.error);\n    }\n\n    const parent_process_template = await parent_process.getTemplate();\n    const proccess_data = parent_process_template.namespace.split('.');\n\n    /** Формирование строки - шаблон родительского процесса. */\n    const templateNsAndCode = `${proccess_data.join('.')}:${parent_process_template.code}`;\n\n    /** Получаем все задачи шаблона родительского процесса и сортируем их по убыванию. */\n    const tasks = await System.processes._searchTasks()\n        .where((f, g) =\u003e g.and(\n            g.or(\n                f.state.like('in_progress'),\n                f.state.like('assignment')\n            ),\n            f.templateNsAndCode.eq(templateNsAndCode)\n        ))\n        .sort(\"__createdAt\", false)\n        .size(1000)\n        .all();\n\n    /** Получение задач родительского процесса. */\n    let parent_process_tasks = tasks.filter(f =\u003e f.data.instance \u0026\u0026 f.data.instance.__id == parent_process?.id);\n\n    if (parent_process_tasks.length == 0) {\n        Context.data.error = `Не найдена задача, которую нужно отслеживать. ID текущего процесса: ${Context.id}; ID родительского процесса: ${parent_process.id};`;\n        throw new Error(Context.data.error);\n    }\n\n    // Первая задача род. процесса - задача, которую нам нужно контролировать.\n    const need_task = parent_process_tasks[0];\n\n    if (need_task \u0026\u0026 !need_task.data.dueDate) {\n        Context.data.error = `Для задачи ${need_task.data.__name} не установлено время выполнения.`\n        throw new Error(Context.data.error);\n    }\n\n    // Записываем в контекст ID задачи и время выполнения.\n    Context.data.task_id = need_task.id;\n    Context.data.execution_time = need_task.data.dueDate;\n\n    Context.data.parent_process_link = `${System.getBaseUrl()}/admin/monitor/${parent_process.data.__templateId}(p:history/${parent_process.id})`;\n    Context.data.task_link = `${System.getBaseUrl()}/admin/monitor/${parent_process.data.__templateId}(p:task/${need_task.id})`;\n}\n\nasync function interrupt(): Promise\u003cvoid\u003e {\n    const candidate = await Context.data.candidate_database!.fetch();\n    if (candidate.data.id_process) {\n        const status = Context.fields.candidate_database.app.fields.__status.variants.refused\n        await candidate!.setStatus(status)\n        \n        const process = await System.processes._searchInstances().where(f =\u003e f.__id.eq(candidate.data.id_process!)).first();\n        await process!.interrupt('Работа с кандидатом прервана инициатором');\n    }\n    \n}",
  "forms": [
    {
      "id": "",
      "code": "form_a0c7cbf9-f9ef-4a98-a98c-9260e405c74a",
      "name": "Связаться с кандидатом для уточнения",
      "values": {
        "formType": "task-form",
        "formGroup": {
          "path": ["context"]
        }
      },
      "widget": {
        "draft": false,
        "deleted": false,
        "version": 1
      },
      "content": {
        "[footer]": [
          {
            "id": "31979bac-00bd-4123-a901-9d14190c8dde",
            "values": {
              "buttons": {
                "path": ["actionButtons"]
              }
            },
            "content": null,
            "descriptor": "buttons-panel",
            "descriptorVersion": null
          }
        ],
        "[content]": [
          {
            "id": "c18e9118-cda2-49f4-ae50-5414c9b970b2",
            "values": {
              "shadow": true
            },
            "content": {
              "": [
                {
                  "id": "dcdd3e4e-0c49-483b-87c2-8c782a8890f0",
                  "values": {
                    "form": {
                      "path": ["context"]
                    },
                    "fields": {
                      "path": ["fields"]
                    }
                  },
                  "content": null,
                  "descriptor": "dynamic-form",
                  "descriptorVersion": null
                }
              ]
            },
            "descriptor": "modal-body",
            "descriptorVersion": null
          }
        ],
        "[sidebar]": [
          {
            "id": "39d7757a-529f-4526-98f3-fddc66becf85",
            "values": null,
            "content": {
              "": [
                {
                  "id": "abe4b782-6e2d-49cc-a57e-81b636422ee5",
                  "values": {
                    "context": {
                      "path": ["context"]
                    }
                  },
                  "content": null,
                  "descriptor": "target-widget",
                  "descriptorVersion": null
                }
              ]
            },
            "descriptor": "sidebar-widget",
            "descriptorVersion": null
          },
          {
            "id": "231b371a-64ae-4b61-8014-cba6da318ac9",
            "values": null,
            "content": {
              "": [
                {
                  "id": "5e39b91d-aea4-467e-862f-0f8766eb44df",
                  "values": {
                    "context": {
                      "path": ["context"]
                    }
                  },
                  "content": null,
                  "descriptor": "linked-item",
                  "descriptorVersion": null
                }
              ]
            },
            "descriptor": "sidebar-widget",
            "descriptorVersion": null
          },
          {
            "id": "a4469de0-d7f3-11ec-9d64-0242ac120002",
            "values": null,
            "content": {
              "": [
                {
                  "id": "3ead7c41-6dfa-4144-80da-2bfb5f0ccf59",
                  "values": {
                    "task": {
                      "path": ["task"]
                    },
                    "formGroup": {
                      "path": ["context"]
                    }
                  },
                  "content": null,
                  "descriptor": "item-reminder",
                  "descriptorVersion": null
                }
              ]
            },
            "descriptor": "sidebar-widget",
            "descriptorVersion": null
          },
          {
            "id": "56d1d0e8-aa83-4cdd-ae43-294b26ad4d04",
            "values": null,
            "content": {
              "": [
                {
                  "id": "e1525e34-14ba-456b-b703-f407945c01e0",
                  "values": {
                    "formGroup": {
                      "path": ["context"]
                    }
                  },
                  "content": null,
                  "descriptor": "item-tasks",
                  "descriptorVersion": 4
                }
              ]
            },
            "descriptor": "sidebar-widget",
            "descriptorVersion": null
          },
          {
            "id": "eef018f2-1d3a-4600-a19d-791733b28b5e",
            "values": null,
            "content": {
              "": [
                {
                  "id": "e0a17dec-603a-461a-becf-861637630584",
                  "values": {
                    "target": {
                      "path": ["target"]
                    }
                  },
                  "content": null,
                  "descriptor": "messages-target",
                  "descriptorVersion": null
                }
              ]
            },
            "descriptor": "sidebar-widget",
            "descriptorVersion": null
          }
        ],
        "[formInfoPanel]": [
          {
            "id": "52a6afa1-df8a-480f-8f4e-d6c9eaa23a3a",
            "values": {
              "__validateResult": {
                "path": ["context", "__validateResult"]
              }
            },
            "content": null,
            "descriptor": "validation-info-block",
            "descriptorVersion": null
          }
        ],
        "[headerControls]": [
          {
            "id": "475aa008-aaff-402f-8de2-408bae1f1928",
            "values": {
              "task": {
                "path": ["task"]
              }
            },
            "content": null,
            "descriptor": "task-percent-widget",
            "descriptorVersion": null
          },
          {
            "id": "702d9c59-77ae-4dd5-b71a-a5fe7b58858f",
            "values": {
              "item": {
                "path": ["__itemRef"]
              }
            },
            "content": null,
            "descriptor": "extension-zone-toolbar-widget",
            "descriptorVersion": null
          },
          {
            "id": "f7b11c79-4267-4f5b-a002-dd629d549682",
            "values": {
              "task": {
                "path": ["task"]
              },
              "skipRulesCheck": true
            },
            "content": null,
            "descriptor": "process-item-map",
            "descriptorVersion": null
          },
          {
            "id": "ff2500ee-6573-49cd-a9e8-2d5c93350f26",
            "values": {
              "icon": "menu_vertical",
              "view": "icon",
              "label": "bpm.tasks.item@menu",
              "action": {
                "path": ["menuAction"]
              }
            },
            "content": null,
            "descriptor": "button",
            "descriptorVersion": null
          }
        ],
        "[headerCustomization]": []
      },
      "descriptor": "item-form-complex-popup",
      "descriptorVersion": 2
    }
  ],
  "settings": {
    "logged": true,
    "debugForm": {
      "allFields": false,
      "formFields": [
        {
          "code": "candidate_database",
          "data": {
            "code": "candidate_database",
            "namespace": "kedo"
          },
          "type": "SYS_COLLECTION",
          "view": {
            "name": "Кандидат"
          },
          "array": true,
          "single": true
        }
      ]
    },
    "targetFeed": {
      "type": "object",
      "variable": "candidate_database"
    },
    "allowGlobal": false,
    "instanceCard": {
      "allFields": true,
      "formFields": []
    },
    "notifyOnStart": true,
    "allowNamespace": false,
    "applicationContext": false,
    "importsDependencies": [],
    "fieldVisibilityConditions": {
      "alert": {
        "enabled": false,
        "conditions": []
      },
      "error": {
        "enabled": false,
        "conditions": []
      },
      "theme": {
        "enabled": false,
        "conditions": []
      },
      "title": {
        "enabled": false,
        "conditions": []
      },
      "task_id": {
        "enabled": false,
        "conditions": []
      },
      "text_sms": {
        "enabled": false,
        "conditions": []
      },
      "candidate": {
        "enabled": false,
        "conditions": []
      },
      "task_link": {
        "enabled": false,
        "conditions": []
      },
      "execution_time": {
        "enabled": false,
        "conditions": []
      },
      "task_initiator": {
        "enabled": false,
        "conditions": []
      },
      "parent_process_link": {
        "enabled": false,
        "conditions": []
      }
    }
  },
  "hideInList": false,
  "applicationLink": false,
  "__deletedAt": null
}
