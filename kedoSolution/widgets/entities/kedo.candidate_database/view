{
  "__id": "018f1058-afd6-76f2-ac47-4c0938a977c6",
  "namespace": "kedo.candidate_database",
  "code": "view",
  "__name": "Форма просмотра",
  "description": "",
  "extensionZoneCode": "",
  "sort": 0,
  "category": "00000000-0000-0000-0000-000000000000",
  "version": 19,
  "hidden": false,
  "draft": false,
  "readonly": false,
  "descriptor": {
    "types": ["form"],
    "template": {
      "id": "28b07186-c176-4052-bada-7c88052796e3",
      "descriptor": "item-form-complex-popup",
      "descriptorVersion": 2,
      "values": {
        "formGroup": {
          "path": ["item"]
        }
      },
      "content": {
        "[sidebar]": [
          {
            "id": "32a2c1e4-d376-4aea-8808-09ff7d74034b",
            "descriptor": "sidebar-widget",
            "content": {
              "": [
                {
                  "id": "484d74f7-e2f0-413b-83fd-42416ffc4c9f",
                  "descriptor": "portal-user-profile-status",
                  "values": {
                    "formGroup": {
                      "path": ["item"]
                    }
                  }
                }
              ]
            }
          },
          {
            "id": "2f4caa85-bf2f-4379-b888-119b342093c8",
            "descriptor": "sidebar-widget",
            "values": {
              "title": "Статус в Диадок"
            },
            "content": {
              "": [
                {
                  "id": "6dbf42cc-a55b-4720-827a-93d271b847b0",
                  "descriptor": "diadoc-status",
                  "values": {
                    "tooltip": "app-integration@diadoc-status",
                    "itemModel": {
                      "path": ["itemModel"]
                    },
                    "applicationItem": {
                      "path": ["item"]
                    }
                  }
                }
              ]
            }
          },
          {
            "id": "cbd8cadb-d5e7-4b19-91da-5881637efc78",
            "descriptor": "sidebar-widget",
            "values": {
              "title": "Статус подписи"
            },
            "content": {
              "": [
                {
                  "id": "5476c0e0-829c-4d53-b03b-88b0d6534fb0",
                  "descriptor": "app-sign-status",
                  "values": {
                    "itemModel": {
                      "path": ["itemModel"]
                    }
                  }
                }
              ]
            }
          },
          {
            "id": "1c6ef61f-6d0e-41d1-8a1f-211bc70f3d92",
            "descriptor": "sidebar-widget",
            "content": {
              "": [
                {
                  "id": "3a3d29c6-7fca-42eb-95f8-74789b8b7f22",
                  "descriptor": "docflow-approval-lists",
                  "values": {
                    "item": {
                      "path": ["itemModel"]
                    }
                  }
                }
              ]
            }
          },
          {
            "id": "8326be58-15ff-4903-8ab0-e20b08b8306b",
            "descriptor": "sidebar-widget",
            "content": {
              "": [
                {
                  "id": "3a3d29c6-7fca-42eb-95f8-74789b8b7f22",
                  "descriptor": "docflow-inform-lists",
                  "values": {
                    "item": {
                      "path": ["itemModel"]
                    }
                  }
                }
              ]
            }
          },
          {
            "id": "a3c6e12f-c346-4519-932b-7ab965384039",
            "descriptor": "sidebar-widget",
            "content": {
              "": [
                {
                  "id": "4cc755bb-f919-4ff7-8e47-5c59047dad62",
                  "descriptor": "item-status",
                  "values": {
                    "item": {
                      "path": ["itemModel"]
                    },
                    "application": {
                      "path": ["application"]
                    }
                  }
                }
              ]
            }
          },
          {
            "id": "ff81ce95-4e79-44b7-9084-d7b0e0f764c3",
            "descriptor": "sidebar-widget",
            "content": {
              "": [
                {
                  "id": "d23366cd-07b0-4ae4-bb2c-73a203ec7786",
                  "descriptor": "item-tasks",
                  "descriptorVersion": 4,
                  "values": {
                    "formGroup": {
                      "path": ["item"]
                    }
                  }
                }
              ]
            }
          },
          {
            "id": "3ab3e301-da8a-4030-ba48-4e02c136b812",
            "descriptor": "sidebar-widget",
            "content": {
              "": [
                {
                  "id": "5c77c4f0-b9f3-4d77-ac9c-5aaadde543dd",
                  "descriptor": "messages-target",
                  "values": {
                    "target": {
                      "path": ["target"]
                    }
                  }
                }
              ]
            }
          }
        ],
        "[headerControls]": [
          {
            "id": "d8e970da-6c0b-49fb-963c-d2515788b7b1",
            "descriptor": "item-subscribe",
            "values": {
              "item": {
                "path": ["itemModel"]
              },
              "application": {
                "path": ["application"]
              }
            }
          },
          {
            "id": "5a72dd17-31f2-4412-a056-a474e01ac17c",
            "descriptor": "button",
            "values": {
              "icon": "send_approve",
              "view": "icon",
              "action": {
                "path": ["docflowSendAction"]
              },
              "tooltip": "Отправить",
              "runProcessSettings": {
                "kind": "",
                "settings": {
                  "code": "",
                  "field": "",
                  "binding": null,
                  "namespace": ""
                }
              },
              "createAppItemSettings": {
                "kind": "",
                "settings": {
                  "code": "",
                  "field": "",
                  "binding": null,
                  "namespace": ""
                }
              }
            }
          },
          {
            "id": "b0237e26-4b99-4ce8-9d6f-a78b44c9263b",
            "descriptor": "button",
            "values": {
              "view": "icon",
              "label": "Права доступа",
              "action": {
                "path": ["accessSettings"]
              },
              "runProcessSettings": {
                "kind": "",
                "settings": {
                  "code": "",
                  "field": "",
                  "binding": null,
                  "namespace": ""
                }
              },
              "createAppItemSettings": {
                "kind": "",
                "settings": {
                  "code": "",
                  "field": "",
                  "binding": null,
                  "namespace": ""
                }
              },
              "icon": "lock"
            }
          },
          {
            "id": "17a52e8f-7486-4031-bd01-5838fcfc8f70",
            "descriptor": "extension-zone-toolbar-widget",
            "values": {
              "item": {
                "path": ["__itemRef"]
              }
            }
          },
          {
            "id": "13599e1c-12ed-11eb-adc1-0242ac120002",
            "descriptor": "edo-diadoc-full-widget",
            "values": {
              "icon": "lock",
              "item": {
                "path": ["item"]
              },
              "view": "icon",
              "label": "Права доступа",
              "itemModel": {
                "path": ["itemModel"]
              }
            }
          },
          {
            "id": "1d3e0cf2-9996-43a6-945d-4b949ff7939e",
            "descriptor": "app-signing",
            "descriptorVersion": 3,
            "values": {
              "label": "Права доступа",
              "itemModel": {
                "path": ["itemModel"]
              }
            }
          },
          {
            "id": "44437579-2a34-45c7-98e7-398999a65fd4",
            "descriptor": "button",
            "values": {
              "view": "default",
              "label": "Повторное рассмотрение",
              "onClick": null,
              "runInPopover": null,
              "runActionEnum": [
                {
                  "code": "runProcess",
                  "name": "Запустить процесс"
                }
              ],
              "__isConstValues": [],
              "__outlet": "",
              "processPopoverSize": [
                {
                  "code": "default",
                  "name": "shared.common.button@widget-process-popover-size-default",
                  "translate": true
                }
              ],
              "runProcessSettings": {
                "kind": "BlobObject",
                "settings": {
                  "code": "working_with_candidate",
                  "field": "candidate_database",
                  "binding": [
                    {
                      "source": {
                        "kind": "manual",
                        "value": true
                      },
                      "target": {
                        "kind": "context",
                        "value": "reconsideration"
                      },
                      "convert": "undefined",
                      "nestedBindings": null
                    },
                    {
                      "source": {
                        "kind": "context",
                        "value": "item"
                      },
                      "target": {
                        "kind": "context",
                        "value": "candidate_database"
                      },
                      "convert": "to_array",
                      "nestedBindings": null
                    }
                  ],
                  "namespace": "kedo.candidate_database"
                }
              },
              "createAppItemSettings": {
                "kind": "",
                "settings": {
                  "code": "",
                  "field": "",
                  "binding": null,
                  "namespace": ""
                }
              },
              "__renderContentOnDemand": false,
              "action": null,
              "__baseURL": "",
              "__relativeURL": ""
            }
          },
          {
            "id": "ac6aa847-522d-43b9-8a05-63a00fe01146",
            "descriptor": "button",
            "values": {
              "runProcessSettings": {
                "kind": "",
                "settings": {
                  "code": "",
                  "field": "",
                  "binding": null,
                  "namespace": ""
                }
              },
              "action": null,
              "__baseURL": "",
              "__isConstValues": [],
              "createAppItemSettings": {
                "kind": "",
                "settings": {
                  "code": "",
                  "field": "",
                  "binding": null,
                  "namespace": ""
                }
              },
              "onClick": {
                "kind": "Function",
                "name": "interrupt",
                "type": "client"
              },
              "__outlet": "",
              "runInPopover": null,
              "runActionEnum": [
                {
                  "code": "undefined",
                  "name": "shared.common.button@widget-runAction-none",
                  "translate": true
                }
              ],
              "processPopoverSize": [
                {
                  "code": "default",
                  "name": "shared.common.button@widget-process-popover-size-default",
                  "translate": true
                }
              ],
              "view": "danger",
              "__relativeURL": "",
              "__renderContentOnDemand": false,
              "label": "Прервать работу с канидатом"
            }
          }
        ],
        "[headerUpperTitle]": [
          {
            "id": "7fe87b6f-803f-40af-ae04-2c46f1919291",
            "descriptor": "app-navigation-crumbs-tree-widget",
            "values": {
              "item": {
                "path": ["itemModel"]
              },
              "application": {
                "path": ["application"]
              }
            }
          }
        ],
        "[headerCustomization]": [],
        "[footer]": [
          {
            "id": "1ecb44bd-d561-4e77-8b0f-58af4bfcc88f",
            "descriptor": "zone-content",
            "values": {
              "zoneCode": "[footer]"
            }
          }
        ],
        "[content]": [
          {
            "id": "c18e9118-cda2-49f4-ae50-5414c9b970b2",
            "descriptor": "modal-body",
            "values": {
              "shadow": true
            },
            "content": {
              "": [
                {
                  "id": "b9dbfcad-d5e2-49d0-bfc9-0e817c7a30e6",
                  "descriptor": "dynamic-form",
                  "values": {
                    "form": {
                      "path": ["item"]
                    },
                    "fields": {
                      "path": ["fields"]
                    }
                  }
                },
                {
                  "id": "90fe37e3-f34c-47df-88fa-d920b3bdbe36",
                  "descriptor": "row-layout",
                  "values": {
                    "elementsAlignEnum": [
                      {
                        "code": "left",
                        "name": "shared.common.row-layout@widget-elements-align-left"
                      }
                    ],
                    "__renderContentAsync": false,
                    "__outlet": "",
                    "__styles": "margin: 0px; padding: 0px; display: flex; gap: 10px;",
                    "__baseURL": "",
                    "__relativeURL": "",
                    "__isConstValues": []
                  },
                  "content": {
                    "": [
                      {
                        "id": "f149eba0-4ed6-49b5-8f04-b898de361d77",
                        "descriptor": "dynamic-form-row",
                        "values": {
                          "showDisplayName": true,
                          "control": {
                            "path": ["item", "date_employment"]
                          },
                          "__baseURL": "",
                          "hideEmpty": false,
                          "__readOnly": true,
                          "__isConstValues": [],
                          "tooltip": null,
                          "__outlet": "",
                          "required": false,
                          "bindingMode": false,
                          "__relativeURL": ""
                        }
                      },
                      {
                        "id": "cab192d2-c902-4f69-bd1f-83e7794e8691",
                        "descriptor": "popover",
                        "values": {
                          "positionEnum": [
                            {
                              "code": "bottom",
                              "name": "Снизу"
                            }
                          ],
                          "showBuilderContent": true,
                          "__renderContentAsync": false,
                          "__outlet": "",
                          "__styles": "",
                          "sizeEnum": [
                            {
                              "code": "sm",
                              "name": "Маленький"
                            }
                          ],
                          "__baseURL": "",
                          "__classes": "",
                          "__relativeURL": "",
                          "__isConstValues": []
                        },
                        "content": {
                          "popover-opener": [
                            {
                              "id": "af2fcbef-5676-4706-823f-6be1e7546443",
                              "descriptor": "button",
                              "values": {
                                "__baseURL": "",
                                "runInPopover": null,
                                "runActionEnum": [
                                  {
                                    "code": "undefined",
                                    "name": "shared.common.button@widget-runAction-none",
                                    "translate": true
                                  }
                                ],
                                "processPopoverSize": [
                                  {
                                    "code": "default",
                                    "name": "shared.common.button@widget-process-popover-size-default",
                                    "translate": true
                                  }
                                ],
                                "createAppItemSettings": {
                                  "kind": "",
                                  "settings": {
                                    "code": "",
                                    "field": "",
                                    "binding": null,
                                    "namespace": ""
                                  }
                                },
                                "action": null,
                                "__outlet": "",
                                "onClick": null,
                                "__relativeURL": "",
                                "__isConstValues": [],
                                "runProcessSettings": {
                                  "kind": "",
                                  "settings": {
                                    "code": "",
                                    "field": "",
                                    "binding": null,
                                    "namespace": ""
                                  }
                                },
                                "view": "default",
                                "label": "Изменить"
                              }
                            }
                          ],
                          "popover-content": [
                            {
                              "id": "43069514-cd1d-4514-bc95-1727eac8e554",
                              "descriptor": "modal-body",
                              "content": {
                                "": [
                                  {
                                    "id": "d6717c04-3494-4a61-b1ed-8e7eddffed0f",
                                    "descriptor": "dynamic-form-row",
                                    "values": {
                                      "control": {
                                        "path": ["date_employment"]
                                      },
                                      "tooltip": null,
                                      "__outlet": "",
                                      "__readOnly": null,
                                      "bindingMode": false,
                                      "__relativeURL": "",
                                      "showDisplayName": true,
                                      "required": false,
                                      "__baseURL": "",
                                      "hideEmpty": false,
                                      "displayName": "Новая дата трудоустройства",
                                      "__isConstValues": []
                                    }
                                  },
                                  {
                                    "id": "67175c7e-7df8-4565-99d6-37f794e3edf0",
                                    "descriptor": "button",
                                    "values": {
                                      "label": "Сохранить",
                                      "__outlet": "",
                                      "runProcessSettings": {
                                        "kind": "",
                                        "settings": {
                                          "code": "",
                                          "field": "",
                                          "binding": null,
                                          "namespace": ""
                                        }
                                      },
                                      "createAppItemSettings": {
                                        "kind": "",
                                        "settings": {
                                          "code": "",
                                          "field": "",
                                          "binding": null,
                                          "namespace": ""
                                        }
                                      },
                                      "onClick": {
                                        "kind": "Function",
                                        "name": "changeDateEmployment",
                                        "type": "client"
                                      },
                                      "__relativeURL": "",
                                      "runActionEnum": [
                                        {
                                          "code": "undefined",
                                          "name": "shared.common.button@widget-runAction-none",
                                          "translate": true
                                        }
                                      ],
                                      "action": null,
                                      "__baseURL": "",
                                      "runInPopover": null,
                                      "__renderContentOnDemand": false,
                                      "view": "primary",
                                      "__isConstValues": [],
                                      "processPopoverSize": [
                                        {
                                          "code": "default",
                                          "name": "shared.common.button@widget-process-popover-size-default",
                                          "translate": true
                                        }
                                      ]
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      }
    },
    "fields": [
      {
        "code": "date_employment",
        "type": "DATETIME",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": false,
        "required": false,
        "single": true,
        "defaultValue": null,
        "calcByFormula": false,
        "formula": "",
        "data": {},
        "view": {
          "name": "Дата трудоустройства",
          "data": {
            "additionalType": "date",
            "defaultTimeType": "startOfDay",
            "timeOptional": false
          },
          "input": true,
          "output": true
        }
      }
    ],
    "fieldVisibilityConditions": {
      "date_employment": {
        "enabled": false,
        "conditions": []
      }
    },
    "scriptOptions": {},
    "clientScripts": "/* Client scripts module */\n\nasync function interrupt(): Promise\u003cvoid\u003e {\n    if (Context.data.id_process) {\n        const candidate = await Application.search().where(f =\u003e f.__id.eq(Context.data.__id)).first();\n        const status = Application.fields.__status.variants.refused\n        await candidate!.setStatus(status)\n        \n        const process = await System.processes._searchInstances().where(f =\u003e f.__id.eq(Context.data.id_process!)).first();\n        await process!.interrupt('Работа с кандидатом прервана инициатором');\n    }\n    \n}\n\nasync function changeDateEmployment(): Promise\u003cvoid\u003e {\n    await Server.rpc.changeDateEmploymentInCandidate();\n    const process = await System.processes._searchInstances().where(f =\u003e f.__id.eq(Context.data.id_process!)).first();\n        try {\n            const context = {possible_date_employment: ViewContext.data.date_employment, change_timer: true}\n            process?.updateContext(context, 'Изменена дата трудоустройства');\n            const timer1 = await process?.getTimer('f5852b93-d90b-4ec8-a75c-7201a0792f00');\n            if (timer1) {\n                timer1.interrupt()\n            }\n            const timer2 = await process?.getTimer('a7bed67d-516b-4983-827a-c1d0934add4d');\n            if (timer2) {\n                timer2.interrupt()\n            }\n        } catch (e) {\n\n        }\n        \n}\n",
    "clientScriptOptions": {
      "allowServer": true
    },
    "serverScripts": "/* Server scripts module */\nasync function changeDateEmploymentInCandidate(): Promise\u003cvoid\u003e {\n    if (Context.data.id_process) {\n        const candidate = await Application.search().where(f =\u003e f.__id.eq(Context.data.__id)).first();\n        if (candidate) {\n           candidate.data.date_employment = ViewContext.data.date_employment;\n            await candidate!.save() \n        }\n    }\n}",
    "serverScriptOptions": {},
    "widgetZones": [
      {
        "code": "[footer]"
      }
    ],
    "dataFieldCode": "item"
  },
  "dataNamespace": "kedo",
  "dataCode": "candidate_database",
  "runtime": {
    "version": 1,
    "clientScripts": "System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server, System) {\n        async function interrupt() {\n            if (Context.data.id_process) {\n                const candidate = await Application.search().where(f =\u003e f.__id.eq(Context.data.__id)).first();\n                const status = Application.fields.__status.variants.refused;\n                await candidate.setStatus(status);\n                const process = await System.processes._searchInstances().where(f =\u003e f.__id.eq(Context.data.id_process)).first();\n                await process.interrupt('Работа с кандидатом прервана инициатором');\n            }\n        }\n        async function changeDateEmployment() {\n            await Server.rpc.changeDateEmploymentInCandidate();\n            const process = await System.processes._searchInstances().where(f =\u003e f.__id.eq(Context.data.id_process)).first();\n            try {\n                const context = { possible_date_employment: ViewContext.data.date_employment, change_timer: true };\n                process === null || process === void 0 ? void 0 : process.updateContext(context, 'Изменена дата трудоустройства');\n                const timer1 = await (process === null || process === void 0 ? void 0 : process.getTimer('f5852b93-d90b-4ec8-a75c-7201a0792f00'));\n                if (timer1) {\n                    timer1.interrupt();\n                }\n                const timer2 = await (process === null || process === void 0 ? void 0 : process.getTimer('a7bed67d-516b-4983-827a-c1d0934add4d'));\n                if (timer2) {\n                    timer2.interrupt();\n                }\n            }\n            catch (e) {\n            }\n        }\n        return {\n            interrupt,\n            changeDateEmployment\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n",
    "clientFnDeclarations": [
      {
        "name": "interrupt",
        "parameters": [],
        "type": "[object Object]"
      },
      {
        "name": "changeDateEmployment",
        "parameters": [],
        "type": "[object Object]"
      }
    ],
    "serverScripts": "async function changeDateEmploymentInCandidate() {\n    if (Context.data.id_process) {\n        const candidate = await Application.search().where(f =\u003e f.__id.eq(Context.data.__id)).first();\n        if (candidate) {\n            candidate.data.date_employment = ViewContext.data.date_employment;\n            await candidate.save();\n        }\n    }\n}\n",
    "serverFnDeclarations": [
      {
        "name": "changeDateEmploymentInCandidate",
        "parameters": [],
        "type": "[object Object]"
      }
    ],
    "clientDependencies": {
      "applications": [
        {
          "namespace": "kedo",
          "code": "candidate_database"
        }
      ],
      "collections": [
        {
          "namespace": "kedo",
          "code": "candidate_database"
        }
      ],
      "pages": []
    }
  },
  "__createdAt": "2024-04-24T13:43:18.740781218Z",
  "__createdBy": "e6fbb566-3df2-420e-a7f3-03b97d2ac599",
  "__updatedAt": "2024-05-06T09:50:41.64083194Z",
  "__updatedBy": "e6fbb566-3df2-420e-a7f3-03b97d2ac599",
  "__deletedAt": null
}
