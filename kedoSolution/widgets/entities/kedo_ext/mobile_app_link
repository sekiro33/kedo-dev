{"__id":"018fb8c3-aad0-783e-ac43-d5675196677e","namespace":"kedo_ext","code":"mobile_app_link","__name":"QR-код для приложения","description":"","extensionZoneCode":"","sort":0,"category":"00000000-0000-0000-0000-000000000000","version":6,"hidden":false,"draft":false,"readonly":false,"descriptor":{"template":{"id":"bed5c212-d6c7-487d-9d33-d27de11619d1","descriptor":"component","content":{"":[]}},"fields":[{"code":"app_link","type":"LINK","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Ссылка на портал","data":{},"input":false,"output":false}},{"code":"settings_app","type":"SYS_COLLECTION","searchable":false,"indexed":false,"deleted":false,"array":true,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{"code":"settings","filter":{"value":{"tf":{}},"enabled":false},"bindings":null,"namespace":"kedo","isDependent":false,"linkedFieldCode":""},"view":{"name":"Приложение Настройки","data":{},"input":false,"output":false}},{"code":"debug","type":"STRING","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"debug","data":{"additionalType":"string"},"input":false,"output":false}}],"fieldVisibilityConditions":{"debug":{"enabled":false,"conditions":[]},"app_link":{"enabled":false,"conditions":[]},"settings_app":{"enabled":false,"conditions":[]}},"scriptOptions":{},"clientScripts":"import QRious from \"qrious.js\";\n\ndeclare const console: any;\ndeclare const document: any;\ndeclare const window: any;\n\nasync function onInit(): Promise\u003cvoid\u003e {\n    const appLink = await Namespace.portal.generateELMAAppUrl(true);\n    \n    if (appLink) {\n        let findQrCodeContainer = window.setInterval(() =\u003e {\n            const qrImg = document.querySelector(\".qr-code-img\");\n            if (!qrImg) {\n                console.log(\"no image\");\n                return;\n            };\n            window.clearInterval(findQrCodeContainer);\n            const qr = new QRious({\n                value: appLink,\n                size: 300\n            });\n            const dataUrl64 = qr.toDataURL();\n            qrImg.src = dataUrl64;\n        }, 500)\n    };\n};","clientScriptOptions":{"allowServer":true},"serverScripts":"/* Server scripts module */\n","serverScriptOptions":{}},"dataNamespace":"","dataCode":"","runtime":{"version":1,"clientScripts":"System.register([\"qrious.js\"], function (exports_1, context_1) {\n    \"use strict\";\n    var qrious_js_1;\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server, System) {\n        async function onInit() {\n            const appLink = await Namespace.portal.generateELMAAppUrl(true);\n            if (appLink) {\n                let findQrCodeContainer = window.setInterval(() =\u003e {\n                    const qrImg = document.querySelector(\".qr-code-img\");\n                    if (!qrImg) {\n                        console.log(\"no image\");\n                        return;\n                    }\n                    ;\n                    window.clearInterval(findQrCodeContainer);\n                    const qr = new qrious_js_1.default({\n                        value: appLink,\n                        size: 300\n                    });\n                    const dataUrl64 = qr.toDataURL();\n                    qrImg.src = dataUrl64;\n                }, 500);\n            }\n            ;\n        }\n        ;\n        return {\n            onInit\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [\n            function (qrious_js_1_1) {\n                qrious_js_1 = qrious_js_1_1;\n            }\n        ],\n        execute: function () {\n        }\n    };\n});\n","clientFnDeclarations":[{"name":"onInit","parameters":[],"type":"[object Object]"}]},"__createdAt":"2024-05-27T06:36:22.095741059Z","__createdBy":"59e0911f-230a-4b6d-becf-6b302a91977a","__updatedAt":"2024-06-04T11:23:28.362190517Z","__updatedBy":"59e0911f-230a-4b6d-becf-6b302a91977a","__deletedAt":null}
