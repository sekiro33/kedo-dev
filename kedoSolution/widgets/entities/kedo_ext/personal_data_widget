{
  "__id": "018fe325-b9c2-7a51-8360-deecde8e573c",
  "namespace": "kedo_ext",
  "code": "personal_data_widget",
  "__name": "Виджет Личные данные",
  "description": "",
  "extensionZoneCode": "",
  "sort": 0,
  "category": "00000000-0000-0000-0000-000000000000",
  "version": 32,
  "hidden": false,
  "draft": false,
  "readonly": false,
  "descriptor": {
    "icon": "business_portfolio_type_1",
    "template": {
      "id": "96ceb221-66e8-4991-8f36-442733ac84ca",
      "descriptor": "component",
      "content": {
        "": [
          {
            "id": "6458aa27-4f2b-49e9-9990-8c430d5220c4",
            "descriptor": "code",
            "values": {
              "hideContent": false,
              "contentPlaceholder": "HTML",
              "html": "\u003cstyle\u003e\n\n    .my-profile {\n\n    }\n\n    .my-profile.kedo_my-profile_wrapper {\n        margin: 0;\n        padding: 0;\n        font-family: 'SF Pro Display';\n        margin-top: 0;\n        margin-bottom: 0;\n        padding-top: 0;\n        padding-bottom: 0;\n        font-size: 16px;\n        background-color: #F5F6FA;\n    }\n\n    .svg {\n        fill: none;\n    }\n\n    .my-profile.h3 {\n        font-size: 2rem\n    }\n\n    .my-profile.kedo_my-profile_wrapper {\n        background-color: #F5F6FA;\n    }\n\n    .my-profile.settings_modal-button {\n        padding: .5rem;\n        border-radius: 4px;\n        border: 1px solid #0055FF;\n    }\n\n    .my-profile.settings_modal-button.confirm {\n        color: white;\n        background-color: #0055FF;\n    }\n\n    .my-profile.settings_modal-button.cancel {\n        color: #0055FF;\n        background-color: white;\n    }\n\n    .my-profile.settings_modal-footer {\n        padding: 0 2rem;\n        padding-top: 1rem;\n        display: flex;\n        gap: 1rem;\n        align-items: center;\n        justify-content: flex-start;\n    }\n\n    @keyframes kedo-loader-rotate {\n        to {\n            transform: rotate(.5turn)\n        }\n    }\n\n    @keyframes kedo-spinner-rotate {\n        0% {\n            transform: rotate(0)\n        }\n\n        100% {\n            transform: rotate(360deg)\n        }\n    }\n\n    .my-profile.common-widget-title {\n        display: flex;\n        justify-content: space-between;\n        gap: 1rem\n    }\n\n    .my-profile.common-content_title_text {\n        pointer-events: none\n    }\n\n    .my-profile.common-content_title_tab {\n        border-radius: 8px;\n        background-color: transparent;\n        border: 1px solid #05f;\n        padding: .35rem 1rem;\n        color: #05f;\n        user-select: none;\n        transition: all .3s;\n        cursor: pointer\n    }\n\n    .my-profile.common-content_title_tab.active {\n        background-color: #05f;\n        color: #fff\n    }\n\n    .my-profile.common-content_title_tab:hover {\n        background-color: #05f;\n        color: #fff\n    }\n\n    .my-profile.active h3 {\n        color: #05f\n    }\n\n    .my-profile.active .item-header {\n        color: #000\n    }\n\n    .my-profile.active path {\n        stroke: #05f\n    }\n\n    .my-profile.widget-container {\n        display: flex;\n        gap: 1.25rem\n    }\n\n    .my-profile.widget-title {\n        display: flex;\n        justify-content: space-between\n    }\n\n    .my-profile.item-header_container {\n        display: flex;\n        margin-bottom: .5rem;\n        justify-content: space-between\n    }\n\n    .my-profile.item-header {\n        font-size: 16px;\n        font-style: normal;\n        font-weight: 400;\n        line-height: 140%;\n        color: #979797\n    }\n\n    .my-profile.widget-item {\n        padding: 1.5rem;\n        box-sizing: border-box;\n        border-radius: 8px;\n        background-color: #fff;\n        display: flex;\n        flex-direction: column;\n        flex-basis: 25%;\n        transition: all .3s\n    }\n\n    a.widget-item {\n        text-decoration: none\n    }\n\n    a.widget-item:hover {\n        box-shadow: 0 0 13px 0 rgba(0, 0, 0, .1)\n    }\n\n    .my-profile.header-container {\n        position: fixed;\n        z-index: 100;\n        width: 100%;\n        background: #fff\n    }\n\n    .my-profile.kedo__my-profile_header {\n        text-align: left\n    }\n\n    .my-profile.kedo__my-profle_header-title.common-widget-title {\n        background-color: transparent;\n        border-bottom: none;\n        padding: 1rem 0\n    }\n\n    .my-profile.title-text {\n        font-size: 2.4rem;\n        margin-bottom: 0\n    }\n\n    .my-profile.kedo__my-profle_header-content {\n        gap: 1rem;\n        display: flex\n    }\n\n    .my-profile.kedo__my-profle_header-content div,\n    .my-profile.kedo__my-profle_header-content h3 {\n        color: #000\n    }\n\n    a.kedo__my-profle_header-title-button {\n        transition: all .3s\n    }\n\n    a.kedo__my-profle_header-title-button:hover {\n        text-decoration: none\n    }\n\n    a.kedo__my-profle_header-title-button:hover {\n        background-color: #fff;\n        color: #05f\n    }\n\n    .my-profile.kedo__my-profle_header-user-content {\n        background-color: #fff;\n        border-radius: 1rem;\n        display: flex;\n        flex-grow: 2;\n        padding: 2rem;\n        gap: 2rem\n    }\n\n    .my-profile.kedo__my-profle_header-user-info {\n        flex-shrink: 0;\n        display: flex;\n        align-items: center;\n        gap: 2rem;\n        max-width: 40%;\n        flex-grow: 2\n    }\n\n    .kedo__my-profle_header-user_avatar-container {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: relative\n    }\n\n    .avatar-container_svg {\n        opacity: 0;\n        position: absolute;\n        transition: all .3s;\n        z-index: 2;\n        width: 75px;\n        height: 50px\n    }\n\n    .avatar-container_svg path {\n        transition: all .3s\n    }\n\n    .avatar-container_svg:hover {\n        cursor: pointer\n    }\n\n    .avatar-container_svg:hover path {\n        fill: #737373\n    }\n\n    .kedo__my-profle_header-user_avatar-container:hover .avatar-container_svg {\n        opacity: 1\n    }\n\n    .kedo__my-profle_header-user_avatar-container:hover {\n        filter: brightness(85%)\n    }\n\n    .kedo__my-profle_header-user-avatar {\n        border-radius: 50%;\n        min-width: 144px;\n        height: 144px;\n        position: relative;\n        align-items: center;\n        justify-content: center;\n        object-fit: cover\n    }\n\n    .my-profile.kedo__my-profle_header-user-work-info {\n        display: flex;\n        flex-direction: column\n    }\n\n    .my-profile.user-name {\n        color: #fff;\n        font-weight: 600;\n        font-size: 24px\n    }\n\n    .my-profile.user-position {\n        color: #fff;\n        font-weight: 400;\n        font-size: small\n    }\n\n    .my-profile.kedo__my-profle_header-user-work-content {\n        border-left: 1px solid #fff;\n        flex-grow: 3;\n        align-items: center;\n        display: flex;\n        justify-content: space-around;\n        flex-wrap: wrap;\n        border-left: 2px solid #5082e6\n    }\n\n    .my-profile.work-content-item {\n        display: flex;\n        align-items: center;\n        gap: 1rem;\n        flex-basis: 30rem\n    }\n\n    .my-profile.work-content-item_img {\n        border-radius: 8px;\n        height: 42px;\n        width: 42px;\n        border: 1px solid #5082e6;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 1rem\n    }\n\n    .my-profile.work-content-item_info {\n        display: flex;\n        flex-direction: column\n    }\n\n    .my-profile.work-content-item_info-title {\n        color: #fffFFFB2\n    }\n\n    .my-profile.work-content-item_info-value {\n        color: #000;\n        font-weight: 600\n    }\n\n    .my-profile.kedo__my-profle_header-notifications {\n        background-color: #ffe5914d;\n        padding: 1rem;\n        display: flex;\n        flex-direction: column;\n        gap: 1rem;\n        border-radius: 1rem;\n        width: 20rem;\n        flex-shrink: 0\n    }\n\n    .my-profile.notifications-title {\n        display: flex;\n        gap: 1rem;\n        align-items: center\n    }\n\n    .my-profile.notifications-text {\n        font-weight: 600;\n        font-size: 18px\n    }\n\n    .my-profile.notifications-img {\n        min-width: 42px;\n        height: 42px;\n        background-color: #fabe00;\n        border-radius: 8px;\n        display: flex;\n        align-items: center;\n        justify-content: center\n    }\n\n    .my-profile.notification-item {\n        display: flex;\n        gap: .5rem;\n        align-items: center;\n        font-size: 300\n    }\n\n    .my-profile.kedo__my-profle_header-notifications input[type=radio] {\n        appearance: none;\n        background-color: #fff;\n        padding: 0;\n        margin: 0;\n        font: inherit;\n        color: currentColor;\n        width: 1.5rem;\n        height: 1.5rem;\n        border: 1px solid #828282;\n        border-radius: 50%;\n        transform: translateY(-.075em);\n        display: grid;\n        place-content: center\n    }\n\n    .my-profile.kedo__my-profle_header-notifications input[type=radio]::before {\n        content: \"\";\n        width: .7rem;\n        height: .7rem;\n        border-radius: 50%;\n        transform: scale(0);\n        transition: 120ms transform ease-in-out;\n        box-shadow: inset 1em 1em var(--form-control-color);\n        background-color: #fabe00\n    }\n\n    .my-profile.kedo__my-profle_header-notifications input[type=radio]:checked::before {\n        transform: scale(1)\n    }\n\n    .my-profile.kedo__my-profile_header-notification-label {\n        display: flex;\n        flex-direction: column;\n        gap: 1rem\n    }\n\n    .my-profile.user-info-title {\n        font-family: Helvetica;\n        font-weight: 600;\n        font-size: 16px\n    }\n\n    /* @keyframes spinner-rotation {\n        from {\n            transform: rotate(0)\n        }\n\n        to {\n            transform: rotate(360deg)\n        }\n    }\n\n    .kedo-loader-wrapper {\n        background-color: white;\n        opacity: 1;\n        z-index: 999;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        transition: all .5s;\n    }\n\n    .kedo-loader-wrapper.hidden {\n        z-index: -1;\n        opacity: 0;\n    }\n\n    .kedo-loader {\n        width: 50px;\n        --b: 8px;\n        aspect-ratio: 1;\n        border-radius: 50%;\n        background: #514b82;\n        -webkit-mask: repeating-conic-gradient(#0000 0deg, #000 1deg 70deg, #0000 71deg 90deg), radial-gradient(farthest-side, #0000 calc(100% - var(--b) - 1px), #000 calc(100% - var(--b)));\n        -webkit-mask-composite: destination-in;\n        mask-composite: intersect;\n        animation: kedo-loader-rotate 1s infinite;\n    }\n\n    .kedo-spinner {\n        animation: kedo-spinner-rotate 0.6s linear infinite;\n        height: 24px;\n        width: 24px;\n        fill: black;\n    }\n\n    @keyframes kedo-loader-rotate {\n        to {\n            transform: rotate(.5turn)\n        }\n    }\n\n    @keyframes kedo-spinner-rotate {\n        0% {\n            transform: rotate(0deg);\n        }\n\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n\n    /* loader stages */\n    .st0 {\n        opacity: 0.6;\n    }\n\n    .st1 {\n        opacity: 0.5;\n    }\n\n    .st2 {\n        opacity: 0.4;\n    }\n\n    .st3 {\n        opacity: 0.3;\n    }\n\n    .st4 {\n        opacity: 0.8;\n    }\n\n    .st5 {\n        opacity: 0.9;\n    }\n\n    .st6 {\n        opacity: 0.1;\n    }\n\n    .st7 {\n        opacity: 0.2;\n    } */\n\n    @media (max-width:1320px) {\n        .my-profile.kedo__my-profle_header-user-work-content {\n            align-items: start;\n            flex-grow: 0;\n            gap: 2rem;\n            font-size: 14px\n        }\n\n        .kedo__my-profle_header-user-avatar {\n            min-width: 100px;\n            height: 100px\n        }\n\n        .my-profile.user-name {\n            font-size: 14px\n        }\n\n        .my-profile.user-position {\n            font-size: 12px\n        }\n    }\n\n    @media (max-width:1200px) {\n        .my-profile.kedo__my-profle_header-user-info {\n            flex-direction: column;\n            justify-content: center;\n            gap: 2rem\n        }\n\n        .my-profile.kedo__my-profle_header-user-work-content {\n            font-size: 12px\n        }\n    }\n\n    @media (max-width:720px) {\n        .my-profile.kedo__my-profle_header-notifications {\n            width: 100%\n        }\n\n        .my-profile.kedo__my-profle_header-content {\n            flex-direction: column\n        }\n    }\n\n    @media (max-width:450px) {\n        .my-profile.common-widget-title {\n            border-bottom: 1px solid #d9d9d9;\n            background-color: #fff;\n            padding: .5rem .8rem\n        }\n\n        .my-profile.common-content_title_text:not(.business_trips-page_main-content_title_text):not(.services-page_main-content_title_text):not(.vacations-page_main-content_title_text):after {\n            position: absolute;\n            content: url(\"data:image/svg+xml,%3Csvg width='9' height='6' viewBox='0 0 9 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4.12969 5.09184C4.32812 5.31056 4.67188 5.31056 4.87031 5.09184L8.5047 1.08597C8.7962 0.764662 8.56822 0.25 8.13439 0.25H0.86561C0.431776 0.25 0.203796 0.764663 0.495303 1.08597L4.12969 5.09184Z' fill='black'/%3E%3C/svg%3E\");\n            right: -1.5rem;\n            top: -.1rem;\n            cursor: pointer;\n            pointer-events: all\n        }\n\n        .my-profile.common-content_title_text {\n            font-size: 16px;\n            font-weight: 600;\n            position: relative\n        }\n\n        .my-profile.widget-item {\n            flex-basis: auto;\n            flex-grow: 1;\n            max-width: auto\n        }\n\n        .my-profile.kedo__my-profle_header-user-work-content {\n            border-left: 0;\n            border-top: 1px solid #fff;\n            margin: 2rem;\n            padding: 2rem 0 0 0\n        }\n\n        .my-profile.kedo__my-profle_header-user-content {\n            flex-direction: column\n        }\n\n        .my-profile.kedo__my-profle_header-user-info {\n            flex-direction: row;\n            max-width: 100%;\n            padding-bottom: 0\n        }\n\n        .my-profile.user-name {\n            font-size: 20px\n        }\n\n        .my-profile.user-position {\n            font-size: 14 px\n        }\n    }\n\u003c/style\u003e\n\u003cdiv class=\"my-profile kedo_my-profile_wrapper\"\u003e\n    \u003c!-- \u003cdiv class=\"kedo-loader-wrapper\" data-loader=\"profile\"\u003e\n        \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 26 26\" data-test=\"spinner\" class=\"kedo-spinner\"\u003e\n            \u003cpath d=\"M13 3v-2c-2.7 0-5.4.9-7.7 2.8l-.8.7 1.4 1.4c2-1.9 4.5-2.9 7.1-2.9z\" class=\"st0\"\u003e\u003c/path\u003e\n            \u003cpath d=\"M5.9 5.9l-1.4-1.4c-2.3 2.3-3.5 5.4-3.5 8.5h2c0-2.6 1-5.1 2.9-7.1z\" class=\"st1\"\u003e\n            \u003c/path\u003e\n            \u003cpath d=\"M3 13h-2c0 2.7.9 5.4 2.8 7.7l.7.8 1.4-1.4c-1.9-2-2.9-4.5-2.9-7.1z\" class=\"st2\"\u003e\n            \u003c/path\u003e\n            \u003cpath d=\"M5.9 20.1l-1.4 1.4c2.3 2.3 5.4 3.5 8.5 3.5v-2c-2.6 0-5.1-1-7.1-2.9z\" class=\"st3\"\u003e\u003c/path\u003e\n            \u003cpath d=\"M20.1 5.9l1.4-1.4c-2.3-2.3-5.4-3.5-8.5-3.5v2c2.6 0 5.1 1 7.1 2.9z\" class=\"st4\"\u003e\n            \u003c/path\u003e\n            \u003cpath d=\"M23 13h2c0-2.7-.9-5.4-2.8-7.7l-.7-.8-1.4 1.4c1.9 2 2.9 4.5 2.9 7.1z\" class=\"st5\"\u003e\u003c/path\u003e\n            \u003cpath d=\"M20.1 20.1l1.4 1.4c2.3-2.3 3.5-5.4 3.5-8.5h-2c0 2.6-1 5.1-2.9 7.1z\" class=\"st6\"\u003e\u003c/path\u003e\n            \u003cpath d=\"M20.7 22.2l.8-.7-1.4-1.4c-2 2-4.5 2.9-7.1 2.9v2c2.7 0 5.4-.9 7.7-2.8z\" class=\"st7\"\u003e\u003c/path\u003e\n        \u003c/svg\u003e\n    \u003c/div\u003e --\u003e\n    \u003cdiv class=\"my-profile kedo__my-profile_header\"\u003e\n        \u003cdiv class=\"my-profile kedo__my-profle_header-title common-widget-title\"\u003e\n            \u003ch3 class=\"my-profile h3 title-text\"\u003eМой профиль\u003c/h3\u003e\n            \u003ca class=\"my-profile kedo__my-profle_header-title-button common-content_title_tab active\"\u003e\n                Изменить данные\n            \u003c/a\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"my-profile kedo__my-profle_header-content\"\u003e\n            \u003cdiv class=\"my-profile kedo__my-profle_header-user-content\"\u003e\n                \u003cdiv class=\"my-profile kedo__my-profle_header-user-info\"\u003e\n                    \u003cdiv class=\"my-profile kedo__my-profle_header-user_avatar-container\"\u003e\n                        \u003cinput class=\"my-profile avatar-file-input\" type=\"file\" accept=\".jpg, .jpeg, .png\" style=\"display: none;\"\u003e\n                        \u003csvg class=\"my-profile avatar-container_svg svg\" width=\"40\" height=\"35\" viewBox=\"0 0 40 35\" fill=\"none\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                            \u003cpath\n                                d=\"M26.6512 8.59091H35.9554V30.6818H4.04632V8.59091H13.3506L15.1915 3.68182H24.8179L26.6512 8.59091ZM25.2398 0H15.1915C13.6574 0 12.2844 0.951137 11.7475 2.38551L10.7963 4.90909H4.04632C2.01365 4.90909 0.364502 6.55824 0.364502 8.59091V30.6818C0.364502 32.7145 2.01365 34.3637 4.04632 34.3637H35.9554C37.9881 34.3637 39.6372 32.7145 39.6372 30.6818V8.59091C39.6372 6.55824 37.9881 4.90909 35.9554 4.90909H29.2054L28.1085 1.99432C27.6637 0.790057 26.5208 0 25.2398 0ZM20.0009 28.8409C14.923 28.8409 10.7963 24.7142 10.7963 19.6364C10.7963 14.5585 14.923 10.4318 20.0009 10.4318C25.0787 10.4318 29.2054 14.5585 29.2054 19.6364C29.2054 24.7142 25.0787 28.8409 20.0009 28.8409ZM20.0009 14.1136C16.9557 14.1136 14.4781 16.5912 14.4781 19.6364C14.4781 22.6815 16.9557 25.1591 20.0009 25.1591C23.046 25.1591 25.5236 22.6815 25.5236 19.6364C25.5236 16.5912 23.046 14.1136 20.0009 14.1136Z\"\n                                fill=\"#D9D9D9\" fill-opacity=\"0.7\" /\u003e\n                        \u003c/svg\u003e\n\n                        \u003cimg class=\"my-profile kedo__my-profle_header-user-avatar\"\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\"my-profile kedo__my-profle_header-user-work-info\"\u003e\n                        \u003ch3 class=\"my-profile user-name\"\u003eКубина Елена Сергеевна\u003c/h3\u003e\n                        \u003cdiv class=\"my-profile user-position\"\u003eРуководитель проектов\n                            отдела маркетинга\u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n                \u003cdiv class=\"my-profile kedo__my-profle_header-user-work-content\"\u003e\n                    \u003cdiv class=\"my-profile work-content-item email\"\u003e\n                        \u003cdiv class=\"my-profile work-content-item_img\"\u003e\n                            \u003csvg class=\"svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\"\n                                xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                                \u003cpath\n                                    d=\"M14.5 2H1.5C0.671562 2 0 2.67156 0 3.5V12.5C0 13.3284 0.671562 14 1.5 14H14.5C15.3284 14 16 13.3284 16 12.5V3.5C16 2.67156 15.3284 2 14.5 2ZM14.5 3.5V4.77516C13.7993 5.34575 12.6823 6.233 10.2942 8.10297C9.76787 8.51694 8.72538 9.51147 8 9.49988C7.27475 9.51159 6.23191 8.51678 5.70584 8.10297C3.31813 6.23328 2.20078 5.34584 1.5 4.77516V3.5H14.5ZM1.5 12.5V6.69994C2.21606 7.27028 3.23153 8.07063 4.77931 9.28263C5.46234 9.82028 6.6585 11.0072 8 11C9.33491 11.0072 10.5159 9.8375 11.2204 9.28288C12.7682 8.07091 13.7839 7.27034 14.5 6.69997V12.5H1.5Z\"\n                                    fill=\"#5082E6\" /\u003e\n                            \u003c/svg\u003e\n\n\n                        \u003c/div\u003e\n                        \u003cdiv class=\"my-profile work-content-item_info\"\u003e\n                            \u003cdiv class=\"my-profile work-content-item_info-title\"\u003e\n                                Почта\n                            \u003c/div\u003e\n                            \u003cdiv class=\"my-profile work-content-item_info-value\"\u003e\n                                example@mail.com\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\"my-profile work-content-item phone\"\u003e\n                        \u003cdiv class=\"my-profile work-content-item_img\"\u003e\n                            \u003csvg class=\"svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\"\n                                xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                                \u003cpath\n                                    d=\"M17.2414 8.8265C17.3406 8.16115 17.3081 7.47998 17.1438 6.82503C16.9269 5.95981 16.4801 5.14042 15.8035 4.46381C15.1269 3.7872 14.3075 3.34042 13.4423 3.12347C12.7874 2.95924 12.1061 2.92671 11.4408 3.02589\"\n                                    stroke=\"#5082E6\" stroke-width=\"1.5\" stroke-linecap=\"square\" /\u003e\n                                \u003cpath\n                                    d=\"M14.2631 8.51182C14.3694 7.79907 14.1482 7.04693 13.5995 6.49826C13.0508 5.9496 12.2986 5.72835 11.5859 5.8346\"\n                                    stroke=\"#5082E6\" stroke-width=\"1.5\" stroke-linecap=\"square\" /\u003e\n                                \u003cpath\n                                    d=\"M6.48968 4.19156C6.77476 4.19156 7.0374 4.34615 7.17575 4.59539L8.13564 6.32442C8.26131 6.5508 8.26719 6.82463 8.15141 7.05623L7.22671 8.90563C7.22671 8.90563 7.49469 10.2834 8.61619 11.4049C9.73769 12.5264 11.1108 12.7897 11.1108 12.7897L12.9599 11.8652C13.1917 11.7493 13.4657 11.7553 13.6922 11.8812L15.4261 12.8452C15.6751 12.9836 15.8295 13.2461 15.8295 13.531V15.5216C15.8295 16.5354 14.8879 17.2675 13.9274 16.9434C11.9547 16.2778 8.89249 15.0104 6.9516 13.0695C5.01067 11.1286 3.74329 8.06639 3.07764 6.09367C2.75355 5.13315 3.48572 4.19156 4.49942 4.19156H6.48968Z\"\n                                    stroke=\"#5082E6\" stroke-width=\"1.5\" /\u003e\n                            \u003c/svg\u003e\n                        \u003c/div\u003e\n                        \u003cdiv class=\"my-profile work-content-item_info\"\u003e\n                            \u003cdiv class=\"my-profile work-content-item_info-title\"\u003e\n                                Телефон\n                            \u003c/div\u003e\n                            \u003cdiv class=\"my-profile work-content-item_info-value\"\u003e\n                                89123456789\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\"my-profile work-content-item organization\"\u003e\n                        \u003cdiv class=\"my-profile work-content-item_img\"\u003e\n                            \u003csvg class=\"svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\"\n                                xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                                \u003cpath\n                                    d=\"M7 6.625V5.375C7 5.16875 7.16875 5 7.375 5H8.625C8.83125 5 9 5.16875 9 5.375V6.625C9 6.83125 8.83125 7 8.625 7H7.375C7.16875 7 7 6.83125 7 6.625ZM11.375 7H12.625C12.8313 7 13 6.83125 13 6.625V5.375C13 5.16875 12.8313 5 12.625 5H11.375C11.1687 5 11 5.16875 11 5.375V6.625C11 6.83125 11.1687 7 11.375 7ZM7.375 10H8.625C8.83125 10 9 9.83125 9 9.625V8.375C9 8.16875 8.83125 8 8.625 8H7.375C7.16875 8 7 8.16875 7 8.375V9.625C7 9.83125 7.16875 10 7.375 10ZM11.375 10H12.625C12.8313 10 13 9.83125 13 9.625V8.375C13 8.16875 12.8313 8 12.625 8H11.375C11.1687 8 11 8.16875 11 8.375V9.625C11 9.83125 11.1687 10 11.375 10ZM9 12.625V11.375C9 11.1687 8.83125 11 8.625 11H7.375C7.16875 11 7 11.1687 7 11.375V12.625C7 12.8313 7.16875 13 7.375 13H8.625C8.83125 13 9 12.8313 9 12.625ZM11.375 13H12.625C12.8313 13 13 12.8313 13 12.625V11.375C13 11.1687 12.8313 11 12.625 11H11.375C11.1687 11 11 11.1687 11 11.375V12.625C11 12.8313 11.1687 13 11.375 13ZM17 16.875V18H3V16.875C3 16.6687 3.16875 16.5 3.375 16.5H3.98438V2.75C3.98438 2.33437 4.31875 2 4.73438 2H15.2656C15.6812 2 16.0156 2.33437 16.0156 2.75V16.5H16.625C16.8313 16.5 17 16.6687 17 16.875ZM5.48438 16.4688H9V14.375C9 14.1687 9.16875 14 9.375 14H10.625C10.8313 14 11 14.1687 11 14.375V16.4688H14.5156V3.53125L5.5 3.5L5.48438 16.4688Z\"\n                                    fill=\"#5082E6\" /\u003e\n                            \u003c/svg\u003e\n                        \u003c/div\u003e\n                        \u003cdiv class=\"my-profile work-content-item_info\"\u003e\n                            \u003cdiv class=\"my-profile work-content-item_info-title\"\u003e\n                                Организация\n                            \u003c/div\u003e\n                            \u003cdiv class=\"my-profile work-content-item_info-value\"\u003e\n                                Крон-Ц\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\"my-profile work-content-item subdivision\"\u003e\n                        \u003cdiv class=\"my-profile work-content-item_img\"\u003e\n                            \u003csvg class=\"svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\"\n                                xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                                \u003cpath\n                                    d=\"M15.6021 8.71429C16.7073 8.71429 17.6024 7.83527 17.6024 6.75C17.6024 5.66473 16.7073 4.78571 15.6021 4.78571C14.4969 4.78571 13.6018 5.66473 13.6018 6.75C13.6018 7.83527 14.4969 8.71429 15.6021 8.71429ZM15.6021 5.96429C16.0422 5.96429 16.4022 6.31786 16.4022 6.75C16.4022 7.18214 16.0422 7.53571 15.6021 7.53571C15.1621 7.53571 14.802 7.18214 14.802 6.75C14.802 6.31786 15.1621 5.96429 15.6021 5.96429ZM4.40037 8.71429C5.50555 8.71429 6.40069 7.83527 6.40069 6.75C6.40069 5.66473 5.50555 4.78571 4.40037 4.78571C3.2952 4.78571 2.40006 5.66473 2.40006 6.75C2.40006 7.83527 3.2952 8.71429 4.40037 8.71429ZM4.40037 5.96429C4.84044 5.96429 5.2005 6.31786 5.2005 6.75C5.2005 7.18214 4.84044 7.53571 4.40037 7.53571C3.96031 7.53571 3.60025 7.18214 3.60025 6.75C3.60025 6.31786 3.96031 5.96429 4.40037 5.96429ZM14.3119 11.1426C13.6243 10.1408 12.2941 9.76763 11.1164 10.1188C10.7614 10.2243 10.3888 10.2833 9.99875 10.2833C9.60869 10.2833 9.23613 10.2243 8.88107 10.1188C7.70339 9.76763 6.37318 10.1384 5.68557 11.1426C5.37553 11.5944 5.1955 12.1371 5.1955 12.7214V13.8214C5.1955 14.4721 5.73308 15 6.39569 15H13.5968C14.2594 15 14.797 14.4721 14.797 13.8214V12.7214C14.802 12.1371 14.622 11.5944 14.3119 11.1426ZM13.6018 13.8214H6.40069V12.7214C6.40069 11.8277 7.1308 11.096 8.03594 11.0714C8.67354 11.3317 9.33364 11.4643 10.0012 11.4643C10.6689 11.4643 11.329 11.3317 11.9666 11.0714C12.8717 11.096 13.6018 11.8252 13.6018 12.7214V13.8214ZM15.9022 9.5H15.3021C14.8695 9.5 14.4669 9.63013 14.1319 9.85112C14.4669 10.0991 14.762 10.3962 14.992 10.74C15.0895 10.7056 15.1921 10.6786 15.2996 10.6786H15.8997C16.3947 10.6786 16.7998 11.0763 16.7998 11.5625C16.7998 11.8866 17.0699 12.1518 17.3999 12.1518C17.73 12.1518 18 11.8866 18 11.5625C18.0025 10.4257 17.0598 9.5 15.9022 9.5ZM10.0012 9.5C11.549 9.5 12.8017 8.26987 12.8017 6.75C12.8017 5.23013 11.549 4 10.0012 4C8.45351 4 7.20081 5.23013 7.20081 6.75C7.20081 8.26987 8.45351 9.5 10.0012 9.5ZM10.0012 5.17857C10.8839 5.17857 11.6015 5.88326 11.6015 6.75C11.6015 7.61674 10.8839 8.32143 10.0012 8.32143C9.11861 8.32143 8.401 7.61674 8.401 6.75C8.401 5.88326 9.11861 5.17857 10.0012 5.17857ZM5.8706 9.85112C5.53555 9.63013 5.13299 9.5 4.70042 9.5H4.10033C2.94265 9.5 2 10.4257 2 11.5625C2 11.8866 2.27004 12.1518 2.60009 12.1518C2.93015 12.1518 3.20019 11.8866 3.20019 11.5625C3.20019 11.0763 3.60525 10.6786 4.10033 10.6786H4.70042C4.81044 10.6786 4.91295 10.7056 5.00797 10.74C5.24051 10.3962 5.53555 10.0991 5.8706 9.85112Z\"\n                                    fill=\"#5082E6\" /\u003e\n                            \u003c/svg\u003e\n\n\n                        \u003c/div\u003e\n                        \u003cdiv class=\"my-profile work-content-item_info\"\u003e\n                            \u003cdiv class=\"my-profile work-content-item_info-title\"\u003e\n                                Отдел\n                            \u003c/div\u003e\n                            \u003cdiv class=\"my-profile work-content-item_info-value\"\u003e\n                                Маркетинг\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n            \u003cdiv class=\"my-profile kedo__my-profle_header-notifications\"\u003e\n                \u003cdiv class=\"my-profile notifications-title\"\u003e\n                    \u003cdiv class=\"my-profile notifications-img\"\u003e\n                        \u003csvg class=\"svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                            \u003cpath\n                                d=\"M20.654 16.152C19.8778 15.341 18.4253 14.1211 18.4253 10.125C18.4253 7.08984 16.2364 4.66016 13.2849 4.06406V3.25C13.2849 2.55977 12.7096 2 12 2C11.2904 2 10.7151 2.55977 10.7151 3.25V4.06406C7.76358 4.66016 5.57466 7.08984 5.57466 10.125C5.57466 14.1211 4.12221 15.341 3.34596 16.152C3.10489 16.4039 2.99802 16.7051 3.00003 17C3.00445 17.6406 3.52154 18.25 4.28976 18.25H19.7102C20.4785 18.25 20.996 17.6406 21 17C21.002 16.7051 20.8951 16.4035 20.654 16.152ZM5.71328 16.375C6.56587 15.2824 7.498 13.4715 7.50242 10.1477C7.50242 10.1398 7.50001 10.1328 7.50001 10.125C7.50001 7.70859 9.51456 5.75 12 5.75C14.4854 5.75 16.5 7.70859 16.5 10.125C16.5 10.1328 16.4976 10.1398 16.4976 10.1477C16.502 13.4719 17.4341 15.2828 18.2867 16.375H5.71328ZM12 22C13.4191 22 14.5702 20.8809 14.5702 19.5H9.42978C9.42978 20.8809 10.5809 22 12 22Z\"\n                                fill=\"#323232\" /\u003e\n                        \u003c/svg\u003e\n\n                    \u003c/div\u003e\n                    \u003cdiv class=\"my-profile notifications-text\"\u003eСпособ уведомления\u003c/div\u003e\n                \u003c/div\u003e\n                \u003cdiv class=\"my-profile kedo__my-profile_header-notification-label\"\u003e\n                    \u003cdiv class=\"my-profile notification-item\"\u003e\n                        \u003cinput type=\"radio\" id=\"notification-message\" name=\"notification\" value=\"sms\"\u003e\n                        \u003clabel for=\"contactChoice1\"\u003eСМС\u003c/label\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\"my-profile notification-item\"\u003e\n                        \u003cinput type=\"radio\" id=\"notification-email\"\n                                        name=\"notification\" value=\"email\"\u003e\n                        \u003clabel for=\"contactChoice2\"\u003eПочта\u003c/label\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\"my-profile notification-item\"\u003e\n                        \u003cinput type=\"radio\" id=\"notification-email-phone\"\n                                        name=\"notification\" value=\"email_and_sms\"\u003e\n                        \u003clabel for=\"contactChoice3\"\u003eСМС и Почта\u003c/label\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\"my-profile notification-item\"\u003e\n                        \u003cinput type=\"radio\" id=\"without-notification\"\n                                        name=\"notification\" value=\"without\"\u003e\n                        \u003clabel for=\"contactChoice3\"\u003eБез уведомлений\u003c/label\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n\u003c/div\u003e"
            }
          }
        ]
      }
    },
    "fields": [
      {
        "code": "staff_app",
        "type": "SYS_COLLECTION",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": true,
        "required": false,
        "single": true,
        "defaultValue": null,
        "calcByFormula": false,
        "formula": "",
        "data": {
          "code": "staff",
          "filter": {
            "value": {
              "tf": {}
            },
            "enabled": false
          },
          "bindings": null,
          "namespace": "kedo",
          "isDependent": false,
          "linkedFieldCode": ""
        },
        "view": {
          "name": "Приложение Сотрудники",
          "data": {},
          "input": false,
          "output": false
        }
      },
      {
        "code": "event_listeners_set",
        "type": "BOOLEAN",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": false,
        "required": false,
        "single": true,
        "defaultValue": false,
        "calcByFormula": false,
        "formula": "",
        "data": {},
        "view": {
          "name": "Обработчики событий установлены",
          "data": {
            "additionalType": "radio",
            "noValue": "Нет",
            "yesValue": "Да"
          },
          "input": false,
          "output": false
        }
      },
      {
        "code": "avatar_base64",
        "type": "STRING",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": false,
        "required": false,
        "single": true,
        "defaultValue": null,
        "calcByFormula": false,
        "formula": "",
        "data": {},
        "view": {
          "name": "Аватар Base64",
          "data": {
            "additionalType": "string"
          },
          "input": false,
          "output": false
        }
      }
    ],
    "fieldVisibilityConditions": {
      "staff_app": {
        "enabled": false,
        "conditions": []
      },
      "avatar_base64": {
        "enabled": false,
        "conditions": []
      },
      "event_listeners_set": {
        "enabled": false,
        "conditions": []
      }
    },
    "scriptOptions": {},
    "clientScripts": "declare const console: any;\ndeclare const window: any;\ndeclare const document: any;\ndeclare const navigator: any;\ndeclare const DOMParser: any;\ndeclare const FileReader: any;\n\ntype staff = ApplicationItem\u003cApplication$kedo$staff$Data, any\u003e;\ntype organization = ApplicationItem\u003cApplication$kedo$organization$Data, any\u003e;\ntype family = ApplicationItem\u003cApplication$kedo$family_composition_app$Data, any\u003e;\ntype subdivision = ApplicationItem\u003cApplication$kedo$structural_subdivision$Data, any\u003e;\ntype position = ApplicationItem\u003cApplication$kedo$position$Data, any\u003e;\ntype status = ApplicationItem\u003cApplication$kedo$statuses$Data, any\u003e;\n\ntype category = {\n    name: string,\n    assignment_date: string,\n    expiration_date: string\n};\n\ntype componentObj = {\n    cls: string,\n    component: any;\n};\n\ntype objData = {\n    id: string,\n    code: string,\n    ns: string,\n    name: string,\n    status: string,\n    status_code: string,\n    business_type: string,\n    render_zone: string,\n    created_at: TDatetime,\n    item_type: string,\n    link: string,\n    start_date?: string,\n    end_date?: string,\n    start_date_obj: TDate | TDatetime,\n    end_date_obj: TDate | TDatetime,\n    vacation_type?: string,\n    vacation_code?: string,\n    duration?: number,\n    cityId?: string,\n    cityName?: string,\n    staffId: string,\n    work_type?: string,\n    type_employment?: string,\n};\n\ntype userSettings = {\n    notifications: string,\n    provider: string,\n    default_page: string\n};\n\nenum LoaderType {\n    COMMON = \"common\",\n    MAIN = \"main\",\n    TASKS = \"tasks\",\n    DOCUMENTS = \"documents\",\n    SERVICES = \"services\",\n    BUSINESS_TRIPS = \"business_trips\",\n    VACATIONS = \"vacations\",\n    PROFILE = \"profile\",\n    DOCUMENTS_WIDGET = \"personnel_documents_widget\",\n    ISSUES_WIDGET = \"issues_widget\",\n    VACATION_WIDGET = \"vacation_widget\",\n};\n\nclass UserDataManager {\n    user: CurrentUserItem;\n    staff: staff;\n    organization: organization | undefined;\n    subdivision: subdivision | undefined;\n    position: position | undefined;\n    avatarLink: string | undefined;\n    allStaff: staff[];\n};\n\nclass DomManager {\n    constructor() {\n        this.userInfoTemplateContent = undefined;\n        this.loader = undefined;\n        this.parser = new DOMParser();\n        this.domLoaded = false;\n    };\n\n    parser: typeof DOMParser;\n    root: componentObj | undefined;\n    loader: componentObj | undefined;\n    userInfoTemplateContent: any | undefined\n    domLoaded: boolean;\n\n    async renderProfileSection() {\n\n        if (!Context.data.event_listeners_set) {\n            const changeUserDataButton = document.querySelector(\".kedo__my-profle_header-title-button\");\n            changeUserDataButton.href = `${window.location.href}(p:run/kedo.employees_personal_data/processing_application_personal_data;values=%7B%7D;silentRun=true)`;\n        };\n\n        const settingsModal = document.querySelector(\".settings_modal-container\");\n        const emailValue = document.querySelector(\".work-content-item.email .work-content-item_info-value\");\n        const phoneValue = document.querySelector(\".work-content-item.phone .work-content-item_info-value\");\n        const organizationValue = document.querySelector(\".work-content-item.organization .work-content-item_info-value\");\n        const subdivisionValue = document.querySelector(\".work-content-item.subdivision .work-content-item_info-value\");\n        const userPositionNode = document.querySelector(\".user-position\");\n        const userAvatarContainer = document.querySelector(\".kedo__my-profle_header-user-avatar\");\n\n        if (userDataManager.avatarLink) {\n            userAvatarContainer.src = userDataManager.avatarLink;\n        };\n\n        userPositionNode.textContent = userDataManager.position ? userDataManager.position.data.__name : \"Должность не указана\";\n\n        emailValue.textContent = userDataManager.staff.data.email ? userDataManager.staff.data.email.email : \"Не указан\";\n        phoneValue.textContent = userDataManager.staff.data.phone ? userDataManager.staff.data.phone.tel : \"Не указан\";\n\n        organizationValue.textContent = userDataManager.organization ? userDataManager.organization.data.__name : \"Не указана\";\n        subdivisionValue.textContent = userDataManager.subdivision ? userDataManager.subdivision.data.__name : \"Не указано\";\n\n        if (userDataManager.staff.data.notification) {\n            const notificationsRadio = document.querySelectorAll(\".notification-item input\");\n            const notificationToSelect = \u003cany\u003eArray.from(notificationsRadio).find((node: any) =\u003e userDataManager.staff.data.notification!.code === node.value);\n\n            if (notificationToSelect) {\n                notificationToSelect.click();\n            };\n\n            notificationsRadio.forEach((node: any) =\u003e node.addEventListener(\"change\", async () =\u003e {\n                const notificationValue = userDataManager.staff.fields.notification.data.variants.find(variant =\u003e variant.code === node.value);\n                if (notificationValue) {\n                    userDataManager.staff.data.notification = { name: notificationValue.name, code: \u003cany\u003enotificationValue.code };\n                    await userDataManager.staff.save();\n                };\n            }));\n        };\n\n        const avatarSvgButton = document.querySelector(\".avatar-container_svg\");\n        const avatarInput = document.querySelector(\".avatar-file-input\")\n\n        if (!Context.data.event_listeners_set) {\n\n            avatarSvgButton.addEventListener(\"click\", () =\u003e {\n                avatarInput.click();\n            });\n\n            avatarInput.addEventListener(\"change\", () =\u003e {\n                const reader = new FileReader();\n                const file = avatarInput.files[0];\n                reader.readAsDataURL(file);\n                reader.onload = async function () {\n                    const [imgBase64, imgDataUrl] = [reader.result.split(\",\")[1], reader.result];\n                    Context.data.avatar_base64 = imgBase64;\n\n                    [userAvatarContainer].forEach((img: any) =\u003e {\n                        img.src = imgDataUrl;\n                    });\n\n                    await Server.rpc.setUserAvatar();\n                };\n                reader.onerror = function (error: any) {\n                    console.log('error: ', error);\n                };\n            });\n        }\n\n        const userNameContainer = document.querySelector(\".user-name\");\n\n        userNameContainer.textContent = userDataManager.staff.data.__name;\n\n        this.handleLoader(LoaderType.PROFILE);\n    };\n\n    handleLoader(loaderType: LoaderType) {\n        const waitForLoader = window.setInterval(() =\u003e {\n            const loader = document.querySelector(`.kedo-loader-wrapper[data-loader=${loaderType}]`);\n            if (!loader) {\n                return\n            };\n            window.clearInterval(waitForLoader)\n            loader.classList.toggle(\"hidden\");\n\n        }, 100)\n    };\n}\n\n/**\n * Класс, хранящий в себе глобальные объекты, прямо или косвенно связанные с пользователем/сотрудником, необходимые для отрисовки компонентов\n */\nclass SystemDataManager {\n    statuses: status[];\n    users: UserItem[];\n    allEmploymentPlacements: ApplicationItem\u003cApplication$kedo$employment_directory$Data, any\u003e[];\n    allOrgs: ApplicationItem\u003cApplication$kedo$organization$Data, any\u003e[];\n    allStructuralSubdivisions: ApplicationItem\u003cApplication$kedo$structural_subdivision$Data, any\u003e[];\n    allStaff: staff[];\n};\n\n/**\n * Функция используется для получения всех динамических данных, связанных с пользователем (документы, задачи)\n * @param refresh признак того, что идет обновление данных\n * @param refreshTasks признак того, что нужно только обновление задач\n */\nasync function getOrRefreshData(): Promise\u003cvoid\u003e {\n\n    userDataManager.organization = await Context.fields.staff_app.app.fields.organization.app.search().where((f, g) =\u003e g.and(\n        f.__deletedAt.eq(null),\n        f.__id.eq(userDataManager.staff.data.organization!.id)\n    )).first();\n    userDataManager.subdivision = await Context.fields.staff_app.app.fields.structural_subdivision.app.search().where((f, g) =\u003e g.and(\n        f.__deletedAt.eq(null),\n        f.__id.eq(userDataManager.staff.data.structural_subdivision!.id)\n    )).first();\n\n    userDataManager.position = userDataManager.staff.data.position ? await userDataManager.staff.data.position.fetch() : undefined;\n    userDataManager.avatarLink = userDataManager.user.data.avatar ? await userDataManager.user.data.avatar.getDownloadUrl() : undefined;\n\n    domManager.renderProfileSection();\n};\n\n/**\n * Функция используется для отрисовки и обновления компонентов после того, как все данные загрузились (userDataManager.allDocsLoaded = true)\n * @param refresh признако того, что идёт обновление данных\n */\nfunction renderOrRefreshComponents() {\n    getOrRefreshData();\n    Context.data.event_listeners_set = true;\n};\n\nasync function getData() {\n    const currentUser = await System.users.getCurrentUser();\n    const currentStaff = await Context.fields.staff_app.app.search().where(f =\u003e f.ext_user.in([currentUser])).first();\n\n    if (currentStaff) {\n    userDataManager.staff = currentStaff;\n    Context.data.staff_app = currentStaff;\n    userDataManager.user = \u003cCurrentUserItem\u003ecurrentUser;\n    }\n\n    userDataManager.organization = await Context.fields.staff_app.app.fields.organization.app.search().where((f, g) =\u003e g.and(\n        f.__deletedAt.eq(null),\n        f.__id.eq(userDataManager.staff.data.organization!.id)\n    )).first();\n    userDataManager.subdivision = await Context.fields.staff_app.app.fields.structural_subdivision.app.search().where((f, g) =\u003e g.and(\n        f.__deletedAt.eq(null),\n        f.__id.eq(userDataManager.staff.data.structural_subdivision!.id)\n    )).first();\n\n    userDataManager.avatarLink = userDataManager.user.data.avatar ? await userDataManager.user.data.avatar.getDownloadUrl() : undefined;\n    userDataManager.position = userDataManager.staff.data.position ? await userDataManager.staff.data.position.fetch() : undefined;\n}\n\nconst userDataManager = new UserDataManager();\nconst systemDataManager = new SystemDataManager();\nconst domManager = new DomManager();\n\nasync function onInit() {\n    await getData();\n}\n\nasync function onLoad() {\n    domManager.renderProfileSection();    \n}",
    "clientScriptOptions": {
      "allowServer": true
    },
    "serverScripts": "async function setUserAvatar(): Promise\u003cvoid\u003e {\n    const user = await System.users.getCurrentUser();\n    const newImg = await user.fields.avatar.create(\"avatar.jpg\", base64ToArrayBuffer(Context.data.avatar_base64!));\n    user.data.avatar = newImg;\n    await user.save();\n};\n\nfunction base64ToArrayBuffer(base64: string): ArrayBuffer {\n    let binaryString = atob(base64);\n    let bytes = new Uint8Array(binaryString.length);\n\n    for (let i = 0; i \u003c binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    };\n\n    return bytes.buffer;\n};",
    "serverScriptOptions": {}
  },
  "dataNamespace": "",
  "dataCode": "",
  "runtime": {
    "version": 1,
    "clientScripts": "System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server, System) {\n        let LoaderType;\n        (function (LoaderType) {\n            LoaderType[\"COMMON\"] = \"common\";\n            LoaderType[\"MAIN\"] = \"main\";\n            LoaderType[\"TASKS\"] = \"tasks\";\n            LoaderType[\"DOCUMENTS\"] = \"documents\";\n            LoaderType[\"SERVICES\"] = \"services\";\n            LoaderType[\"BUSINESS_TRIPS\"] = \"business_trips\";\n            LoaderType[\"VACATIONS\"] = \"vacations\";\n            LoaderType[\"PROFILE\"] = \"profile\";\n            LoaderType[\"DOCUMENTS_WIDGET\"] = \"personnel_documents_widget\";\n            LoaderType[\"ISSUES_WIDGET\"] = \"issues_widget\";\n            LoaderType[\"VACATION_WIDGET\"] = \"vacation_widget\";\n        })(LoaderType || (LoaderType = {}));\n        ;\n        class UserDataManager {\n        }\n        ;\n        class DomManager {\n            constructor() {\n                this.userInfoTemplateContent = undefined;\n                this.loader = undefined;\n                this.parser = new DOMParser();\n                this.domLoaded = false;\n            }\n            ;\n            async renderProfileSection() {\n                if (!Context.data.event_listeners_set) {\n                    const changeUserDataButton = document.querySelector(\".kedo__my-profle_header-title-button\");\n                    changeUserDataButton.href = `${window.location.href}(p:run/kedo.employees_personal_data/processing_application_personal_data;values=%7B%7D;silentRun=true)`;\n                }\n                ;\n                const settingsModal = document.querySelector(\".settings_modal-container\");\n                const emailValue = document.querySelector(\".work-content-item.email .work-content-item_info-value\");\n                const phoneValue = document.querySelector(\".work-content-item.phone .work-content-item_info-value\");\n                const organizationValue = document.querySelector(\".work-content-item.organization .work-content-item_info-value\");\n                const subdivisionValue = document.querySelector(\".work-content-item.subdivision .work-content-item_info-value\");\n                const userPositionNode = document.querySelector(\".user-position\");\n                const userAvatarContainer = document.querySelector(\".kedo__my-profle_header-user-avatar\");\n                if (userDataManager.avatarLink) {\n                    userAvatarContainer.src = userDataManager.avatarLink;\n                }\n                ;\n                userPositionNode.textContent = userDataManager.position ? userDataManager.position.data.__name : \"Должность не указана\";\n                emailValue.textContent = userDataManager.staff.data.email ? userDataManager.staff.data.email.email : \"Не указан\";\n                phoneValue.textContent = userDataManager.staff.data.phone ? userDataManager.staff.data.phone.tel : \"Не указан\";\n                organizationValue.textContent = userDataManager.organization ? userDataManager.organization.data.__name : \"Не указана\";\n                subdivisionValue.textContent = userDataManager.subdivision ? userDataManager.subdivision.data.__name : \"Не указано\";\n                if (userDataManager.staff.data.notification) {\n                    const notificationsRadio = document.querySelectorAll(\".notification-item input\");\n                    const notificationToSelect = Array.from(notificationsRadio).find((node) =\u003e userDataManager.staff.data.notification.code === node.value);\n                    if (notificationToSelect) {\n                        notificationToSelect.click();\n                    }\n                    ;\n                    notificationsRadio.forEach((node) =\u003e node.addEventListener(\"change\", async () =\u003e {\n                        const notificationValue = userDataManager.staff.fields.notification.data.variants.find(variant =\u003e variant.code === node.value);\n                        if (notificationValue) {\n                            userDataManager.staff.data.notification = { name: notificationValue.name, code: notificationValue.code };\n                            await userDataManager.staff.save();\n                        }\n                        ;\n                    }));\n                }\n                ;\n                const avatarSvgButton = document.querySelector(\".avatar-container_svg\");\n                const avatarInput = document.querySelector(\".avatar-file-input\");\n                if (!Context.data.event_listeners_set) {\n                    avatarSvgButton.addEventListener(\"click\", () =\u003e {\n                        avatarInput.click();\n                    });\n                    avatarInput.addEventListener(\"change\", () =\u003e {\n                        const reader = new FileReader();\n                        const file = avatarInput.files[0];\n                        reader.readAsDataURL(file);\n                        reader.onload = async function () {\n                            const [imgBase64, imgDataUrl] = [reader.result.split(\",\")[1], reader.result];\n                            Context.data.avatar_base64 = imgBase64;\n                            [userAvatarContainer].forEach((img) =\u003e {\n                                img.src = imgDataUrl;\n                            });\n                            await Server.rpc.setUserAvatar();\n                        };\n                        reader.onerror = function (error) {\n                            console.log('error: ', error);\n                        };\n                    });\n                }\n                const userNameContainer = document.querySelector(\".user-name\");\n                userNameContainer.textContent = userDataManager.staff.data.__name;\n                this.handleLoader(LoaderType.PROFILE);\n            }\n            ;\n            handleLoader(loaderType) {\n                const waitForLoader = window.setInterval(() =\u003e {\n                    const loader = document.querySelector(`.kedo-loader-wrapper[data-loader=${loaderType}]`);\n                    if (!loader) {\n                        return;\n                    }\n                    ;\n                    window.clearInterval(waitForLoader);\n                    loader.classList.toggle(\"hidden\");\n                }, 100);\n            }\n            ;\n        }\n        class SystemDataManager {\n        }\n        ;\n        async function getOrRefreshData() {\n            userDataManager.organization = await Context.fields.staff_app.app.fields.organization.app.search().where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.__id.eq(userDataManager.staff.data.organization.id))).first();\n            userDataManager.subdivision = await Context.fields.staff_app.app.fields.structural_subdivision.app.search().where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.__id.eq(userDataManager.staff.data.structural_subdivision.id))).first();\n            userDataManager.position = userDataManager.staff.data.position ? await userDataManager.staff.data.position.fetch() : undefined;\n            userDataManager.avatarLink = userDataManager.user.data.avatar ? await userDataManager.user.data.avatar.getDownloadUrl() : undefined;\n            domManager.renderProfileSection();\n        }\n        ;\n        function renderOrRefreshComponents() {\n            getOrRefreshData();\n            Context.data.event_listeners_set = true;\n        }\n        ;\n        async function getData() {\n            const currentUser = await System.users.getCurrentUser();\n            const currentStaff = await Context.fields.staff_app.app.search().where(f =\u003e f.ext_user.in([currentUser])).first();\n            if (currentStaff) {\n                userDataManager.staff = currentStaff;\n                Context.data.staff_app = currentStaff;\n                userDataManager.user = currentUser;\n            }\n            userDataManager.organization = await Context.fields.staff_app.app.fields.organization.app.search().where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.__id.eq(userDataManager.staff.data.organization.id))).first();\n            userDataManager.subdivision = await Context.fields.staff_app.app.fields.structural_subdivision.app.search().where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.__id.eq(userDataManager.staff.data.structural_subdivision.id))).first();\n            userDataManager.avatarLink = userDataManager.user.data.avatar ? await userDataManager.user.data.avatar.getDownloadUrl() : undefined;\n            userDataManager.position = userDataManager.staff.data.position ? await userDataManager.staff.data.position.fetch() : undefined;\n        }\n        const userDataManager = new UserDataManager();\n        const systemDataManager = new SystemDataManager();\n        const domManager = new DomManager();\n        async function onInit() {\n            await getData();\n        }\n        async function onLoad() {\n            domManager.renderProfileSection();\n        }\n        return {\n            getOrRefreshData,\n            renderOrRefreshComponents,\n            getData,\n            onInit,\n            onLoad\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n",
    "clientFnDeclarations": [
      {
        "name": "getOrRefreshData",
        "parameters": [],
        "type": "[object Object]"
      },
      {
        "name": "renderOrRefreshComponents",
        "parameters": [],
        "type": ""
      },
      {
        "name": "getData",
        "parameters": [],
        "type": ""
      },
      {
        "name": "onInit",
        "parameters": [],
        "type": ""
      },
      {
        "name": "onLoad",
        "parameters": [],
        "type": ""
      }
    ],
    "serverScripts": "async function setUserAvatar() {\n    const user = await System.users.getCurrentUser();\n    const newImg = await user.fields.avatar.create(\"avatar.jpg\", base64ToArrayBuffer(Context.data.avatar_base64));\n    user.data.avatar = newImg;\n    await user.save();\n}\n;\nfunction base64ToArrayBuffer(base64) {\n    let binaryString = atob(base64);\n    let bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i \u003c binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    ;\n    return bytes.buffer;\n}\n;\n",
    "serverFnDeclarations": [
      {
        "name": "setUserAvatar",
        "parameters": [],
        "type": "[object Object]"
      },
      {
        "name": "base64ToArrayBuffer",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          }
        ],
        "type": "[object Object]"
      }
    ]
  },
  "__createdAt": "2024-06-04T12:07:31.514962201Z",
  "__createdBy": "7e61e9a9-edda-49a3-baa2-87b36c4fbb6c",
  "__updatedAt": "2024-06-06T14:35:35.45999474Z",
  "__updatedBy": "7e61e9a9-edda-49a3-baa2-87b36c4fbb6c",
  "__deletedAt": null
}
