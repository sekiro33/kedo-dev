{
  "__id": "018fe325-9d9a-7985-95f6-3b1aec6fae43",
  "namespace": "kedo_ext",
  "code": "last_business_trips_widget",
  "__name": "Виджет Ближайшие командировки",
  "description": "",
  "extensionZoneCode": "",
  "sort": 0,
  "category": "00000000-0000-0000-0000-000000000000",
  "version": 8,
  "hidden": false,
  "draft": false,
  "readonly": false,
  "descriptor": {
    "template": {
      "id": "e2f552a0-d02a-4a1d-ba3b-282edf05e53e",
      "descriptor": "component",
      "content": {
        "": [
          {
            "id": "4d3c2dc6-b15c-4fca-a362-76972ce82df2",
            "descriptor": "code",
            "values": {
              "html": "\u003cstyle\u003e\n\n    .nearest_bt {\n\n    }\n\n    .nearest_bt.business_trips-page_main-container {\n        --inactive: #CAD1D8;\n        margin: 0;\n        padding: 0;\n        font-family: 'SF Pro Display';\n        margin-top: 0;\n        margin-bottom: 0;\n        padding-top: 0;\n        padding-bottom: 0;\n        font-size: 16px;\n    }\n\n    .nearest_bt p,\n    .nearest_bt h1,\n    .nearest_bt h2,\n    .nearest_bt h3,\n    .nearest_bt h4,\n    .nearest_bt h5 {\n        margin-bottom: 0;\n    }\n\n    /* .business_trips-page_main-container {\n        padding: 0 20px;\n    } */\n\n    /* .business_trips-page_main-content_title-text {\n        font-size: 1.8rem;\n        margin-bottom: 2rem;\n    } */\n\n    .nearest_bt.item-status {\n        display: flex;\n        justify-content: start;\n        align-items: center;\n        gap: .5rem;\n    }\n\n    .nearest_bt.active .personnel-events-widget_item_header-icon path {\n        stroke: none;\n        fill: #0055FF;\n    }\n\n    .nearest_bt.item-icon-container path {\n        stroke: white;\n        fill: none;\n    }\n\n    .nearest_bt.widget-container {\n        display: flex;\n        gap: 1.25rem;\n    }\n\n    .nearest_bt.item-header_container {\n        display: flex;\n        margin-bottom: 0.5rem;\n        justify-content: space-between;\n    }\n\n    .nearest_bt.item-icon-container {\n        background-color: #cad1d8;\n        width: 36px;\n        height: 36px;\n        box-sizing: border-box;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 8px;\n    }\n\n    .nearest_bt.item-header {\n        font-size: 16px;\n        font-style: normal;\n        font-weight: 400;\n        line-height: 140%;\n        color: #979797;\n    }\n\n    .nearest_bt.widget-item {\n        padding: 1.5rem;\n        box-sizing: border-box;\n        border-radius: 8px;\n        background-color: #fff;\n        display: flex;\n        flex-direction: column;\n        flex-basis: 25%;\n        transition: all 0.3s;\n    }\n\n    a.widget-item {\n        text-decoration: none;\n    }\n\n    a.widget-item:hover {\n        box-shadow: 0 0 13px 0 rgba(0, 0, 0, 0.1);\n    }\n\n    .nearest_bt.item-shortand {\n        color: #05f;\n        font-size: 20px;\n        font-weight: 500;\n        margin-bottom: 1rem;\n    }\n\n    .nearest_bt.item-status {\n        display: flex;\n        justify-content: start;\n        align-items: center;\n        gap: 0.5rem;\n    }\n\n    .nearest_bt.status-dot {\n        border-radius: 50%;\n        background-color: #bcbcbc;\n        width: 10px;\n        min-width: 10px;\n        height: 10px;\n    }\n\n    .nearest_bt.status-name {\n        color: #bcbcbc;\n        font-size: 16px;\n        font-weight: 400;\n    }\n\n    .nearest_bt.header-container {\n        position: fixed;\n        z-index: 100;\n        width: 100%;\n        background: #fff;\n    }\n\n    @keyframes spinner-rotation {\n        from {\n            transform: rotate(0);\n        }\n\n        to {\n            transform: rotate(360deg);\n        }\n    }\n\n    .kedo-spinner {\n        animation: kedo-spinner-rotate 0.6s linear infinite;\n        height: 24px;\n        width: 24px;\n        fill: black;\n    }\n\n    .kedo-loader-wrapper {\n        background-color: white;\n        opacity: 1;\n        z-index: 999;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        transition: all 0.5s;\n    }\n\n    .kedo-loader-wrapper.hidden {\n        z-index: -1;\n        opacity: 0;\n    }\n\n    .kedo-loader {\n        width: 50px;\n        --b: 8px;\n        aspect-ratio: 1;\n        border-radius: 50%;\n        background: #514b82;\n        -webkit-mask: repeating-conic-gradient(#0000 0deg,\n                #000 1deg 70deg,\n                #0000 71deg 90deg),\n            radial-gradient(farthest-side,\n                #0000 calc(100% - var(--b) - 1px),\n                #000 calc(100% - var(--b)));\n        -webkit-mask-composite: destination-in;\n        mask-composite: intersect;\n        animation: kedo-loader-rotate 1s infinite;\n    }\n\n    .nearest_bt.common-widget-title {\n        display: flex;\n        justify-content: space-between;\n        gap: 1rem;\n    }\n\n    .nearest_bt.common-content_title_text {\n        pointer-events: none;\n    }\n\n    .nearest_bt.common-content_title_tab {\n        border-radius: 8px;\n        background-color: transparent;\n        border: 1px solid #05f;\n        padding: 0.35rem 1rem;\n        color: #05f;\n        user-select: none;\n        transition: all 0.3s;\n        cursor: pointer;\n    }\n\n    .nearest_bt.common-content_title_tab:hover {\n        background-color: #05f;\n        color: #fff;\n    }\n\n    .nearest_bt.main-widget {\n        display: flex;\n        flex-direction: column;\n        gap: 1.25rem;\n    }\n\n    .nearest_bt.widget-container {\n        display: flex;\n        gap: 1.25rem;\n    }\n\n    .nearest_bt.widget-title {\n        display: flex;\n        justify-content: space-between;\n    }\n\n    .nearest_bt.widget-item {\n        padding: 1.5rem;\n        box-sizing: border-box;\n        border-radius: 8px;\n        background-color: #fff;\n        display: flex;\n        flex-direction: column;\n        flex-basis: 25%;\n        transition: all 0.3s;\n    }\n\n    a.widget-item {\n        text-decoration: none;\n    }\n\n    a.widget-item:hover {\n        box-shadow: 0 0 13px 0 rgba(0, 0, 0, 0.1);\n    }\n\n    .nearest_bt.widgets-expand {\n        color: #0047ff;\n        border: none;\n        background-color: transparent;\n        cursor: pointer;\n    }\n\n    .nearest_bt.title-text {\n        font-size: 2.4rem;\n        margin-bottom: 0;\n    }\n\n    .nearest_bt.business_trips-page_main-content_title-button:hover {\n        color: #0047ff;\n        text-decoration: none;\n    }\n\n    .nearest_bt.business_trips_widget-item {\n        min-height: 130px;\n        justify-content: center;\n        align-items: center;\n        border: 1px dashed #cad1d8;\n    }\n\n    .nearest_bt.business_trips_widget-item:hover {\n        border: 1px dashed #05f;\n    }\n\n    a.business_trips-page_main-content_add-item:hover {\n        text-decoration: none;\n    }\n\n    @keyframes spinner-rotation {\n        from {\n            transform: rotate(0);\n        }\n\n        to {\n            transform: rotate(360deg);\n        }\n    }\n\n    @keyframes kedo-loader-rotate {\n        to {\n            transform: rotate(0.5turn);\n        }\n    }\n\n    @keyframes kedo-spinner-rotate {\n        0% {\n            transform: rotate(0deg);\n        }\n\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n\n    .st0 {\n        opacity: 0.6;\n    }\n\n    .st1 {\n        opacity: 0.5;\n    }\n\n    .st2 {\n        opacity: 0.4;\n    }\n\n    .st3 {\n        opacity: 0.3;\n    }\n\n    .st4 {\n        opacity: 0.8;\n    }\n\n    .st5 {\n        opacity: 0.9;\n    }\n\n    .st6 {\n        opacity: 0.1;\n    }\n\n    .st7 {\n        opacity: 0.2;\n    }\n\n    @media (max-width: 450px) {\n        .nearest_bt.widget-item {\n            flex-basis: auto;\n            flex-grow: 1;\n            max-width: auto;\n        }\n\n        .nearest_bt.main-page {\n            margin-top: 4rem;\n        }\n\n        .nearest_bt.main-page_main-content {\n            padding: 20px 16px 24px;\n            margin-bottom: 4rem;\n        }\n\n        .nearest_bt.common-widget-title {\n            padding: 0.5rem 0.8rem;\n        }\n\n        .nearest_bt.common-content_title_text:not(.business_trips-page_main-content_title_text):not(.services-page_main-content_title_text):not(.vacations-page_main-content_title_text):after {\n            position: absolute;\n            content: url(\"data:image/svg+xml,%3Csvg width='9' height='6' viewBox='0 0 9 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4.12969 5.09184C4.32812 5.31056 4.67188 5.31056 4.87031 5.09184L8.5047 1.08597C8.7962 0.764662 8.56822 0.25 8.13439 0.25H0.86561C0.431776 0.25 0.203796 0.764663 0.495303 1.08597L4.12969 5.09184Z' fill='black'/%3E%3C/svg%3E\");\n            right: -1.5rem;\n            top: -0.1rem;\n            cursor: pointer;\n            pointer-events: all;\n        }\n\n        .nearest_bt.common-content_title_text {\n            font-size: 16px;\n            font-weight: 600;\n            position: relative;\n        }\n\n        .nearest_bt.widget-item {\n            flex-basis: auto;\n            flex-grow: 1;\n            max-width: auto;\n        }\n\n        .nearest_bt.page-widget {\n            background-color: #f5f6fa;\n            gap: 0;\n        }\n\n        .nearest_bt.business_trips-page_main-content_title {\n            padding: 1rem;\n        }\n\n        .nearest_bt.business_trips-page_main-content-widget_container {\n            padding: 0 1rem;\n            flex-direction: column;\n        }\n    }\n\u003c/style\u003e\n\n\u003cdiv class=\"nearest_bt business_trips-page_main-container\"\u003e\n    \u003cdiv class=\"kedo-loader-wrapper hidden\" data-loader=\"business_trips_widget\"\u003e\n        \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 26 26\" data-test=\"spinner\" class=\"kedo-spinner\"\u003e\n            \u003cpath d=\"M13 3v-2c-2.7 0-5.4.9-7.7 2.8l-.8.7 1.4 1.4c2-1.9 4.5-2.9 7.1-2.9z\" class=\"st0\"\u003e\u003c/path\u003e\n            \u003cpath d=\"M5.9 5.9l-1.4-1.4c-2.3 2.3-3.5 5.4-3.5 8.5h2c0-2.6 1-5.1 2.9-7.1z\" class=\"st1\"\u003e\n            \u003c/path\u003e\n            \u003cpath d=\"M3 13h-2c0 2.7.9 5.4 2.8 7.7l.7.8 1.4-1.4c-1.9-2-2.9-4.5-2.9-7.1z\" class=\"st2\"\u003e\n            \u003c/path\u003e\n            \u003cpath d=\"M5.9 20.1l-1.4 1.4c2.3 2.3 5.4 3.5 8.5 3.5v-2c-2.6 0-5.1-1-7.1-2.9z\" class=\"st3\"\u003e\u003c/path\u003e\n            \u003cpath d=\"M20.1 5.9l1.4-1.4c-2.3-2.3-5.4-3.5-8.5-3.5v2c2.6 0 5.1 1 7.1 2.9z\" class=\"st4\"\u003e\n            \u003c/path\u003e\n            \u003cpath d=\"M23 13h2c0-2.7-.9-5.4-2.8-7.7l-.7-.8-1.4 1.4c1.9 2 2.9 4.5 2.9 7.1z\" class=\"st5\"\u003e\u003c/path\u003e\n            \u003cpath d=\"M20.1 20.1l1.4 1.4c2.3-2.3 3.5-5.4 3.5-8.5h-2c0 2.6-1 5.1-2.9 7.1z\" class=\"st6\"\u003e\u003c/path\u003e\n            \u003cpath d=\"M20.7 22.2l.8-.7-1.4-1.4c-2 2-4.5 2.9-7.1 2.9v2c2.7 0 5.4-.9 7.7-2.8z\" class=\"st7\"\u003e\u003c/path\u003e\n        \u003c/svg\u003e\n    \u003c/div\u003e\n    \u003cdiv class=\"nearest_bt common-widget-title business_trips-page_main-content_title\"\u003e\n        \u003ch4 class=\"nearest_bt business_trips-page_main-content_title-text\"\u003e\n            Ближайшие\n        \u003c/h4\u003e\n    \u003c/div\u003e\n    \u003cdiv class=\"nearest_bt business_trips-page_main-content-widget_container widget-container\"\u003e\n        \u003cdiv class=\"nearest_bt widget-item business_trips_widget-item\"\u003e\n            \u003ca class=\"nearest_bt common-content_title_tab business_trips-page_main-content_add-item\"\u003e\n                + Командировка\n            \u003c/a\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003ctemplate class=\"nearest_bt personnel-events-widget_item-template\"\u003e\n    \u003ca class=\"nearest_bt personnel-events-widget_item widget-item\"\u003e\n        \u003cdiv class=\"nearest_bt personnel-events-widget_item_header item-header_container\"\u003e\n            \u003cp class=\"nearest_bt personnel-events-widget_item_header-date item-header\"\u003e\n\n            \u003c/p\u003e\n            \u003cdiv class=\"nearest_bt personnel-events-widget_item_header-icon item-icon-container\"\u003e\n\n            \u003c/div\u003e\n        \u003c/div\u003e\n        \u003ch3 class=\"nearest_bt personnel-events-widget_item_shortand item-shortand\"\u003e\n\n        \u003c/h3\u003e\n        \u003cdiv class=\"nearest_bt personnel-events-widget_item_status item-status\"\u003e\n            \u003cdiv class=\"nearest_bt status-dot\"\u003e\n\n            \u003c/div\u003e\n            \u003cp class=\"nearest_bt status-name\"\u003e\n\n            \u003c/p\u003e\n        \u003c/div\u003e\n    \u003c/a\u003e\n\u003c/template\u003e",
              "hideContent": false,
              "contentPlaceholder": ""
            }
          }
        ]
      }
    },
    "fields": [
      {
        "code": "statuses_app",
        "type": "SYS_COLLECTION",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": true,
        "required": false,
        "single": true,
        "defaultValue": null,
        "calcByFormula": false,
        "formula": "",
        "data": {
          "code": "statuses",
          "filter": {
            "value": {
              "tf": {}
            },
            "enabled": false
          },
          "bindings": null,
          "namespace": "kedo",
          "isDependent": false,
          "linkedFieldCode": ""
        },
        "view": {
          "name": "Приложение Статусы",
          "data": {},
          "input": true,
          "output": true
        }
      },
      {
        "code": "business_trips_app",
        "type": "SYS_COLLECTION",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": true,
        "required": false,
        "single": true,
        "defaultValue": null,
        "calcByFormula": false,
        "formula": "",
        "data": {
          "code": "business_trips",
          "filter": {
            "value": {
              "tf": {}
            },
            "enabled": false
          },
          "bindings": null,
          "namespace": "kedo",
          "isDependent": false,
          "linkedFieldCode": ""
        },
        "view": {
          "name": "Приложение Командировки",
          "data": {},
          "input": true,
          "output": true
        }
      },
      {
        "code": "staff_app",
        "type": "SYS_COLLECTION",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": true,
        "required": false,
        "single": true,
        "defaultValue": null,
        "calcByFormula": false,
        "formula": "",
        "data": {
          "code": "staff",
          "filter": {
            "value": {
              "tf": {}
            },
            "enabled": false
          },
          "bindings": null,
          "namespace": "kedo",
          "isDependent": false,
          "linkedFieldCode": ""
        },
        "view": {
          "name": "Приложение Сотрудники",
          "data": {},
          "input": true,
          "output": true
        }
      },
      {
        "code": "closest_business_trips",
        "type": "SYS_COLLECTION",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": true,
        "required": false,
        "single": false,
        "defaultValue": null,
        "calcByFormula": false,
        "formula": "",
        "data": {
          "code": "business_trips",
          "filter": {
            "value": {
              "tf": {}
            },
            "enabled": false
          },
          "bindings": null,
          "namespace": "kedo",
          "isDependent": false,
          "linkedFieldCode": ""
        },
        "view": {
          "name": "Ближайшие командировки",
          "data": {},
          "input": true,
          "output": true
        }
      }
    ],
    "fieldVisibilityConditions": {
      "staff_app": {
        "enabled": false,
        "conditions": []
      },
      "statuses_app": {
        "enabled": false,
        "conditions": []
      },
      "business_trips_app": {
        "enabled": false,
        "conditions": []
      },
      "closest_business_trips": {
        "enabled": false,
        "conditions": []
      }
    },
    "scriptOptions": {},
    "clientScripts": "declare const console: any, window: any, document: any, DOMParser: any;\n\ntype blockConstructor = {\n    titleClass: string,\n    titleContent: string,\n    iconClass?: string,\n    iconContent?: string,\n    extraContentClass?: string,\n    extraContent?: string,\n    status?: string,\n    link?: string\n};\n\nconst monthReference: Record\u003cstring, string\u003e = {\n    \"1\": \"Января\",\n    \"2\": \"Февраля\",\n    \"3\": \"Марта\",\n    \"4\": \"Апреля\",\n    \"5\": \"Мая\",\n    \"6\": \"Июня\",\n    \"7\": \"Июля\",\n    \"8\": \"Августа\",\n    \"9\": \"Сентября\",\n    \"10\": \"Октября\",\n    \"11\": \"Ноября\",\n    \"12\": \"Декабря\"\n};\n\nconst svgToTypeReference = {\n    business_trip: `\u003csvg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\n    \u003cg clip-path=\"url(#clip0_2710_613)\"\u003e\n    \u003cmask id=\"mask0_2710_613\" style=\"mask-type:luminance\" maskUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"20\" height=\"20\"\u003e\n    \u003cpath d=\"M20 0H0V20H20V0Z\" fill=\"white\"/\u003e\n    \u003c/mask\u003e\n    \u003cg mask=\"url(#mask0_2710_613)\"\u003e\n    \u003cpath d=\"M2.08203 17.0783H17.9154\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003cpath d=\"M3.55003 13.0267L1.62793 9.69758C2.03222 9.46416 4.03276 10.1621 4.77749 10.5442L8.81999 9.0972L5.36362 3.11061L7.07803 3.00771L12.6616 8.19995L16.0993 7.11178C17.6217 6.67628 18.1018 7.50787 18.1977 7.67399C18.7738 8.67183 17.6097 9.34387 17.4434 9.43987C16.1131 10.208 3.55003 13.0267 3.55003 13.0267Z\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003c/g\u003e\n    \u003c/g\u003e\n    \u003cdefs\u003e\n    \u003cclipPath id=\"clip0_2710_613\"\u003e\n    \u003crect width=\"20\" height=\"20\" fill=\"white\"/\u003e\n    \u003c/clipPath\u003e\n    \u003c/defs\u003e\n    \u003c/svg\u003e\n    `,\n    other: `\u003csvg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\n    \u003cpath d=\"M15.8335 1.6665H4.16683C3.70659 1.6665 3.3335 2.0396 3.3335 2.49984V17.4998C3.3335 17.9601 3.70659 18.3332 4.16683 18.3332H15.8335C16.2937 18.3332 16.6668 17.9601 16.6668 17.4998V2.49984C16.6668 2.0396 16.2937 1.6665 15.8335 1.6665Z\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003cpath d=\"M7.0835 11.25H12.9168\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003cpath d=\"M7.0835 8.75H12.9168\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003cpath d=\"M7.0835 5.83301H12.9168\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003cpath d=\"M7.0835 14.1665H10.0002\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003c/svg\u003e\n    `\n};\n\nconst issueCodeToNameReference = {\n    application_for_financial_assistance: \"Заявка на материальную помощь\",\n    benefit_application: \"Заявка на выплату пособия\",\n    certificate: \"Справка\",\n    category_assignment: \"Заявка на присвоениее категории\",\n    employees_personal_data: \"Заявка на изменение ПДн\",\n    free_from: \"Заявка в свободной форме\",\n    business_trips: \"Командировка\",\n    businesstrip_requests: \"Командировка\",\n    holidays: \"Отпуск\",\n    vacations: \"Отпуск\",\n    dismissal_app: \"Увольнение\",\n    execution_duties: \"Заявка на ИО\",\n    transfer_application: \"Заявка на перевод\",\n    employment_app: \"Трудоустройство\",\n    medical_request: \"Медосмотр\",\n    cancel_applications: \"Отмена документа\",\n    application_for_the_transfer_of_salary_to_the_current_account: \"Перечисление ЗП на расчетный счет\",\n    setlement_sheet: \"Расчётный листок\"\n};\n\nclass DomManager {\n    allStatuses: ApplicationItem\u003cApplication$kedo$statuses$Data, any\u003e[];\n    allBusinessTrips: ApplicationItem\u003cApplication$kedo$business_trips$Data, any\u003e[];\n    baseUrl = window.location.href;\n    businessTripNodeTemplate: any;\n    businessTripContainer: any;\n    parser: typeof DOMParser;\n    elementLoader: any;\n\n    setActive(element: any) {\n        element.classList.add(\"active\");\n    };\n\n    handleLoader() {\n        this.elementLoader.classList.toggle(\"hidden\");\n    };\n\n    processComponent(element: any, elementData: blockConstructor, setActive = false) {\n        const title = element.querySelector(`.${elementData.titleClass}`);\n        title.textContent = elementData.titleContent;\n        if (elementData.iconClass) {\n            const iconContainer = element.querySelector(`.${elementData.iconClass}`)\n            const svg = this.parser.parseFromString(elementData.iconContent, \"text/html\").body.firstChild;\n            iconContainer.append(svg);\n        };\n        if (elementData.extraContentClass) {\n            const extraContentContainer = element.querySelector(`.${elementData.extraContentClass}`);\n            extraContentContainer.textContent = elementData.extraContent;\n        };\n        if (elementData.status) {\n            const statusContainer = element.querySelector(\".status-name\");\n            statusContainer.textContent = elementData.status;\n        };\n        if (setActive) {\n            this.setActive(element);\n        };\n        if (elementData.link) {\n            element.href = elementData.link;\n        };\n    };\n\n    renderComponent(domElement: any, elementToAppend: any, prepend = false, elementData?: blockConstructor, setActive = false, onclick?: Function) {\n        if (elementData) {\n            this.processComponent(elementToAppend, elementData, setActive);\n        };\n        if (onclick) {\n            elementToAppend.addEventListener(\"click\", onclick);\n        };\n        if (prepend) {\n            if (Array.isArray(elementToAppend)) {\n                domElement.prepend(...elementToAppend);\n                return;\n            };\n            domElement.prepend(elementToAppend);\n        } else {\n            if (Array.isArray(elementToAppend)) {\n                domElement.append(...elementToAppend);\n                return;\n            };\n            domElement.appendChild(elementToAppend);\n        };\n    };\n};\n\nconst domManager = new DomManager();\n\nasync function onInit(): Promise\u003cvoid\u003e {\n    //init().then(_ =\u003e domManager.handleLoader());\n    init();\n};\n\nasync function init(): Promise\u003cvoid\u003e {\n    \n    const newBusinessTripButton = document.querySelector(\".business_trips-page_main-content_add-item\");\n    newBusinessTripButton.href = `${window.location.href}(p:item/business_trips/businesstrip_requests)`;\n    \n    const user = await System.users.getCurrentUser();\n    const staff = await Context.fields.staff_app.app.search().where((f, g) =\u003e g.and(\n        f.__deletedAt.eq(null),\n        f.ext_user.eq(user)\n    )).first();\n\n    if (!staff) {\n        return;\n    };\n\n    domManager.allStatuses = await Context.fields.statuses_app.app.search().where(f =\u003e f.__deletedAt.eq(null)).size(100).all();\n    domManager.allBusinessTrips = await Context.fields.closest_business_trips.app.search().where((f, g) =\u003e g.and(\n        f.__deletedAt.eq(null),\n        f.kedo_staff.link(staff)\n    )).sort(\"start_date\").size(2).all();\n    domManager.parser = new DOMParser();\n    renderPage();\n};\n\nasync function renderPage(): Promise\u003cvoid\u003e {\n\n    domManager.businessTripNodeTemplate = document.querySelector(\".personnel-events-widget_item-template\");\n    domManager.businessTripContainer = document.querySelector(\".business_trips-page_main-content-widget_container\");\n    domManager.elementLoader = document.querySelector(\"[data-loader=business_trips_widget]\");\n\n    domManager.allBusinessTrips.forEach(businessTrip =\u003e {\n        const [startDay, startMonth, startYear] = businessTrip.data.start_date_string ? businessTrip.data.start_date_string.split(\".\") : [\"\", \"\", \"\"];\n        const [endDay, endMonth, endYear] = businessTrip.data.end_date_string ? businessTrip.data.end_date_string.split(\".\") : [\"\", \"\", \"\"];\n        const businessTripStatus = domManager.allStatuses.find(status =\u003e status.id === businessTrip.data.kedo_status?.id);\n\n        let elementData: blockConstructor;\n\n        try {\n            elementData = {\n                titleClass: \"item-header\",\n                titleContent: `${startDay} ${monthReference[startMonth.replace(\"0\", \"\")].toLowerCase()} - ${endDay} ${monthReference[endMonth.replace(\"0\", \"\")].toLowerCase()}`,\n                iconClass: \"item-icon-container\",\n                iconContent: svgToTypeReference.other,\n                extraContentClass: \"item-shortand\",\n                extraContent: issueCodeToNameReference[\"business_trips\"],\n                status: businessTripStatus ? businessTripStatus.data.__name : \"Не определён\",\n                link: `${domManager.baseUrl}(p:item/business_trips/businesstrip_requests/${businessTrip.id})`\n            };\n        } catch (e) {\n            elementData = {\n                titleClass: \"item-header\",\n                titleContent: `${startDay} ${monthReference[startMonth.startsWith(\"0\") ? startMonth.replace(\"0\", \"\") : startMonth]} - ${endDay} ${monthReference[endMonth.startsWith(\"0\") ? endMonth.replace(\"0\", \"\") : endMonth]}`,\n                iconClass: \"item-icon-container\",\n                iconContent: svgToTypeReference.other,\n                extraContentClass: \"item-shortand\",\n                extraContent: issueCodeToNameReference[\"business_trips\"],\n                status: businessTripStatus ? businessTripStatus.data.__name : \"Не определён\",\n                link: `${domManager.baseUrl}(p:item/business_trips/businesstrip_requests/${businessTrip.id})`\n            };\n        };\n\n        const newIssueItem = domManager.businessTripNodeTemplate.content.cloneNode(true).querySelector(\".personnel-events-widget_item\");\n        domManager.renderComponent(domManager.businessTripContainer, newIssueItem, false, elementData);\n    });\n};",
    "clientScriptOptions": {
      "allowServer": true
    },
    "serverScripts": "/* Server scripts module */\n",
    "serverScriptOptions": {}
  },
  "dataNamespace": "",
  "dataCode": "",
  "runtime": {
    "version": 1,
    "clientScripts": "System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server, System) {\n        const monthReference = {\n            \"1\": \"Января\",\n            \"2\": \"Февраля\",\n            \"3\": \"Марта\",\n            \"4\": \"Апреля\",\n            \"5\": \"Мая\",\n            \"6\": \"Июня\",\n            \"7\": \"Июля\",\n            \"8\": \"Августа\",\n            \"9\": \"Сентября\",\n            \"10\": \"Октября\",\n            \"11\": \"Ноября\",\n            \"12\": \"Декабря\"\n        };\n        const svgToTypeReference = {\n            business_trip: `\u003csvg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\n    \u003cg clip-path=\"url(#clip0_2710_613)\"\u003e\n    \u003cmask id=\"mask0_2710_613\" style=\"mask-type:luminance\" maskUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"20\" height=\"20\"\u003e\n    \u003cpath d=\"M20 0H0V20H20V0Z\" fill=\"white\"/\u003e\n    \u003c/mask\u003e\n    \u003cg mask=\"url(#mask0_2710_613)\"\u003e\n    \u003cpath d=\"M2.08203 17.0783H17.9154\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003cpath d=\"M3.55003 13.0267L1.62793 9.69758C2.03222 9.46416 4.03276 10.1621 4.77749 10.5442L8.81999 9.0972L5.36362 3.11061L7.07803 3.00771L12.6616 8.19995L16.0993 7.11178C17.6217 6.67628 18.1018 7.50787 18.1977 7.67399C18.7738 8.67183 17.6097 9.34387 17.4434 9.43987C16.1131 10.208 3.55003 13.0267 3.55003 13.0267Z\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003c/g\u003e\n    \u003c/g\u003e\n    \u003cdefs\u003e\n    \u003cclipPath id=\"clip0_2710_613\"\u003e\n    \u003crect width=\"20\" height=\"20\" fill=\"white\"/\u003e\n    \u003c/clipPath\u003e\n    \u003c/defs\u003e\n    \u003c/svg\u003e\n    `,\n            other: `\u003csvg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\n    \u003cpath d=\"M15.8335 1.6665H4.16683C3.70659 1.6665 3.3335 2.0396 3.3335 2.49984V17.4998C3.3335 17.9601 3.70659 18.3332 4.16683 18.3332H15.8335C16.2937 18.3332 16.6668 17.9601 16.6668 17.4998V2.49984C16.6668 2.0396 16.2937 1.6665 15.8335 1.6665Z\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003cpath d=\"M7.0835 11.25H12.9168\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003cpath d=\"M7.0835 8.75H12.9168\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003cpath d=\"M7.0835 5.83301H12.9168\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003cpath d=\"M7.0835 14.1665H10.0002\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/\u003e\n    \u003c/svg\u003e\n    `\n        };\n        const issueCodeToNameReference = {\n            application_for_financial_assistance: \"Заявка на материальную помощь\",\n            benefit_application: \"Заявка на выплату пособия\",\n            certificate: \"Справка\",\n            category_assignment: \"Заявка на присвоениее категории\",\n            employees_personal_data: \"Заявка на изменение ПДн\",\n            free_from: \"Заявка в свободной форме\",\n            business_trips: \"Командировка\",\n            businesstrip_requests: \"Командировка\",\n            holidays: \"Отпуск\",\n            vacations: \"Отпуск\",\n            dismissal_app: \"Увольнение\",\n            execution_duties: \"Заявка на ИО\",\n            transfer_application: \"Заявка на перевод\",\n            employment_app: \"Трудоустройство\",\n            medical_request: \"Медосмотр\",\n            cancel_applications: \"Отмена документа\",\n            application_for_the_transfer_of_salary_to_the_current_account: \"Перечисление ЗП на расчетный счет\",\n            setlement_sheet: \"Расчётный листок\"\n        };\n        class DomManager {\n            constructor() {\n                this.baseUrl = window.location.href;\n            }\n            setActive(element) {\n                element.classList.add(\"active\");\n            }\n            ;\n            handleLoader() {\n                this.elementLoader.classList.toggle(\"hidden\");\n            }\n            ;\n            processComponent(element, elementData, setActive = false) {\n                const title = element.querySelector(`.${elementData.titleClass}`);\n                title.textContent = elementData.titleContent;\n                if (elementData.iconClass) {\n                    const iconContainer = element.querySelector(`.${elementData.iconClass}`);\n                    const svg = this.parser.parseFromString(elementData.iconContent, \"text/html\").body.firstChild;\n                    iconContainer.append(svg);\n                }\n                ;\n                if (elementData.extraContentClass) {\n                    const extraContentContainer = element.querySelector(`.${elementData.extraContentClass}`);\n                    extraContentContainer.textContent = elementData.extraContent;\n                }\n                ;\n                if (elementData.status) {\n                    const statusContainer = element.querySelector(\".status-name\");\n                    statusContainer.textContent = elementData.status;\n                }\n                ;\n                if (setActive) {\n                    this.setActive(element);\n                }\n                ;\n                if (elementData.link) {\n                    element.href = elementData.link;\n                }\n                ;\n            }\n            ;\n            renderComponent(domElement, elementToAppend, prepend = false, elementData, setActive = false, onclick) {\n                if (elementData) {\n                    this.processComponent(elementToAppend, elementData, setActive);\n                }\n                ;\n                if (onclick) {\n                    elementToAppend.addEventListener(\"click\", onclick);\n                }\n                ;\n                if (prepend) {\n                    if (Array.isArray(elementToAppend)) {\n                        domElement.prepend(...elementToAppend);\n                        return;\n                    }\n                    ;\n                    domElement.prepend(elementToAppend);\n                }\n                else {\n                    if (Array.isArray(elementToAppend)) {\n                        domElement.append(...elementToAppend);\n                        return;\n                    }\n                    ;\n                    domElement.appendChild(elementToAppend);\n                }\n                ;\n            }\n            ;\n        }\n        ;\n        const domManager = new DomManager();\n        async function onInit() {\n            init();\n        }\n        ;\n        async function init() {\n            const newBusinessTripButton = document.querySelector(\".business_trips-page_main-content_add-item\");\n            newBusinessTripButton.href = `${window.location.href}(p:item/business_trips/businesstrip_requests)`;\n            const user = await System.users.getCurrentUser();\n            const staff = await Context.fields.staff_app.app.search().where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.ext_user.eq(user))).first();\n            if (!staff) {\n                return;\n            }\n            ;\n            domManager.allStatuses = await Context.fields.statuses_app.app.search().where(f =\u003e f.__deletedAt.eq(null)).size(100).all();\n            domManager.allBusinessTrips = await Context.fields.closest_business_trips.app.search().where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.kedo_staff.link(staff))).sort(\"start_date\").size(2).all();\n            domManager.parser = new DOMParser();\n            renderPage();\n        }\n        ;\n        async function renderPage() {\n            domManager.businessTripNodeTemplate = document.querySelector(\".personnel-events-widget_item-template\");\n            domManager.businessTripContainer = document.querySelector(\".business_trips-page_main-content-widget_container\");\n            domManager.elementLoader = document.querySelector(\"[data-loader=business_trips_widget]\");\n            domManager.allBusinessTrips.forEach(businessTrip =\u003e {\n                const [startDay, startMonth, startYear] = businessTrip.data.start_date_string ? businessTrip.data.start_date_string.split(\".\") : [\"\", \"\", \"\"];\n                const [endDay, endMonth, endYear] = businessTrip.data.end_date_string ? businessTrip.data.end_date_string.split(\".\") : [\"\", \"\", \"\"];\n                const businessTripStatus = domManager.allStatuses.find(status =\u003e { var _a; return status.id === ((_a = businessTrip.data.kedo_status) === null || _a === void 0 ? void 0 : _a.id); });\n                let elementData;\n                try {\n                    elementData = {\n                        titleClass: \"item-header\",\n                        titleContent: `${startDay} ${monthReference[startMonth.replace(\"0\", \"\")].toLowerCase()} - ${endDay} ${monthReference[endMonth.replace(\"0\", \"\")].toLowerCase()}`,\n                        iconClass: \"item-icon-container\",\n                        iconContent: svgToTypeReference.other,\n                        extraContentClass: \"item-shortand\",\n                        extraContent: issueCodeToNameReference[\"business_trips\"],\n                        status: businessTripStatus ? businessTripStatus.data.__name : \"Не определён\",\n                        link: `${domManager.baseUrl}(p:item/business_trips/businesstrip_requests/${businessTrip.id})`\n                    };\n                }\n                catch (e) {\n                    elementData = {\n                        titleClass: \"item-header\",\n                        titleContent: `${startDay} ${monthReference[startMonth.startsWith(\"0\") ? startMonth.replace(\"0\", \"\") : startMonth]} - ${endDay} ${monthReference[endMonth.startsWith(\"0\") ? endMonth.replace(\"0\", \"\") : endMonth]}`,\n                        iconClass: \"item-icon-container\",\n                        iconContent: svgToTypeReference.other,\n                        extraContentClass: \"item-shortand\",\n                        extraContent: issueCodeToNameReference[\"business_trips\"],\n                        status: businessTripStatus ? businessTripStatus.data.__name : \"Не определён\",\n                        link: `${domManager.baseUrl}(p:item/business_trips/businesstrip_requests/${businessTrip.id})`\n                    };\n                }\n                ;\n                const newIssueItem = domManager.businessTripNodeTemplate.content.cloneNode(true).querySelector(\".personnel-events-widget_item\");\n                domManager.renderComponent(domManager.businessTripContainer, newIssueItem, false, elementData);\n            });\n        }\n        ;\n        return {\n            onInit,\n            init,\n            renderPage\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n",
    "clientFnDeclarations": [
      {
        "name": "onInit",
        "parameters": [],
        "type": "[object Object]"
      },
      {
        "name": "init",
        "parameters": [],
        "type": "[object Object]"
      },
      {
        "name": "renderPage",
        "parameters": [],
        "type": "[object Object]"
      }
    ]
  },
  "__createdAt": "2024-06-04T12:07:24.308803959Z",
  "__createdBy": "7e61e9a9-edda-49a3-baa2-87b36c4fbb6c",
  "__updatedAt": "2024-06-06T14:09:39.829845422Z",
  "__updatedBy": "7e61e9a9-edda-49a3-baa2-87b36c4fbb6c",
  "__deletedAt": null
}
