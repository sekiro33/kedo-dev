{
  "__id": "018fe324-85ba-769f-b5b9-b0388cf58bd5",
  "namespace": "kedo_ext",
  "code": "business_trips_widget",
  "__name": "Виджет Командировки",
  "description": "",
  "extensionZoneCode": "",
  "sort": 0,
  "category": "00000000-0000-0000-0000-000000000000",
  "version": 4,
  "hidden": false,
  "draft": false,
  "readonly": false,
  "descriptor": {
    "template": {
      "id": "e897b849-ba45-41ba-9012-c5a494e5308e",
      "descriptor": "component",
      "content": {
        "": [
          {
            "id": "1c3346e2-40a1-43f0-9297-435e50210c4f",
            "descriptor": "code",
            "values": {
              "html": "\u003clink rel=\"stylesheet\" href=\"\u003c%= UI.widget.filePath %\u003e/lib/vanilla-calendar/dark.min.css\"\u003e\u003c/link\u003e\n\u003clink rel=\"stylesheet\" href=\"\u003c%= UI.widget.filePath %\u003e/lib/vanilla-calendar/light.min.css\"\u003e\u003c/link\u003e\n\u003clink rel=\"stylesheet\" href=\"\u003c%= UI.widget.filePath %\u003e/lib/vanilla-calendar/vanilla-calendar.min.css\"\u003e\u003c/link\u003e\n\u003cscript type=\"text/javascript\" src=\"\u003c%= UI.widget.filePath %\u003e/lib/vanilla-calendar/vanilla-calendar.min.js\"\u003e\u003c/script\u003e\n\u003cscript type=\"text/javascript\" src=\"\u003c%= UI.widget.filePath %\u003e/lib/paginator/pagination.min.js\"\u003e\u003c/script\u003e",
              "hideContent": true,
              "contentPlaceholder": "imports"
            }
          },
          {
            "id": "93ca6aa5-edc0-4092-9320-22a38a52d6a4",
            "descriptor": "code",
            "values": {
              "contentPlaceholder": "",
              "html": "\u003cstyle\u003e\n    .bt {}\n\n    .dropdown-modal {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        z-index: 9;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        transition: all .3s;\n        opacity: 1;\n    }\n\n    .dropdown-modal.hidden {\n        opacity: 0;\n        z-index: -1;\n    }\n\n    .title-search {\n        /* width: 100%; */\n        padding: 0.5rem 1rem;\n        border-radius: 4px;\n        background: #FFF;\n        border: none;\n        box-sizing: border-box;\n        position: relative;\n        transition: all .3s;\n    }\n\n    .common-content_title_search-extend_item-value_calendar .vanilla-calendar-header {\n        margin-bottom: 0;\n        border-top-right-radius: 8px;\n        border-top-left-radius: 8px;\n        border-top: 1px solid #D9D9D9;\n        border-right: 1px solid #D9D9D9;\n        border-left: 1px solid #D9D9D9;\n    }\n\n    .common-content_title_search-extend_item-value_calendar .vanilla-calendar-wrapper {\n        background-color: white;\n        padding: 1rem;\n        border-bottom-left-radius: 8px;\n        border-bottom-right-radius: 8px;\n        border-bottom: 1px solid #D9D9D9;\n        border-left: 1px solid #D9D9D9;\n        border-right: 1px solid #D9D9D9;\n    }\n\n    .vanilla-calendar.common-content_title_search-extend_item-value_calendar {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        background-color: white;\n        z-index: 2;\n        padding: 0;\n        top: 4rem;\n        right: -20%;\n    }\n\n    .bt.business_trips-page-business_trips_table {\n        margin: 0;\n        padding: 0;\n        font-family: 'SF Pro Display';\n        margin-top: 0;\n        margin-bottom: 0;\n        padding-top: 0;\n        padding-bottom: 0;\n        font-size: 16px\n    }\n\n    .bt h3 {\n        font-size: 2rem;\n    }\n\n    .btsvg {\n        fill: none;\n    }\n\n    @keyframes spinner-rotation {\n        from {\n            transform: rotate(0);\n        }\n\n        to {\n            transform: rotate(360deg);\n        }\n    }\n\n    .kedo-spinner {\n        animation: kedo-spinner-rotate .6s linear infinite;\n        height: 24px;\n        width: 24px;\n        fill: #000;\n    }\n\n    .kedo-loader-wrapper {\n        background-color: #fff;\n        opacity: 1;\n        z-index: 8;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        transition: all .5s;\n    }\n\n    .kedo-loader {\n        width: 50px;\n        --b: 8px;\n        aspect-ratio: 1;\n        border-radius: 50%;\n        background: #514b82;\n        -webkit-mask: repeating-conic-gradient(#0000 0deg, #000 1deg 70deg, #0000 71deg 90deg), radial-gradient(farthest-side, #0000 calc(100% - var(--b) - 1px), #000 calc(100% - var(--b)));\n        -webkit-mask-composite: destination-in;\n        mask-composite: intersect;\n        animation: kedo-loader-rotate 1s infinite;\n    }\n\n    @keyframes spinner-rotation {\n        from {\n            transform: rotate(0);\n        }\n\n        to {\n            transform: rotate(360deg);\n        }\n    }\n\n    @keyframes kedo-loader-rotate {\n        to {\n            transform: rotate(.5turn);\n        }\n    }\n\n    @keyframes kedo-spinner-rotate {\n        0% {\n            transform: rotate(0);\n        }\n\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n\n    .st0 {\n        opacity: .6;\n    }\n\n    .st1 {\n        opacity: .5;\n    }\n\n    .st2 {\n        opacity: .4;\n    }\n\n    .st3 {\n        opacity: .3;\n    }\n\n    .st4 {\n        opacity: .8;\n    }\n\n    .st5 {\n        opacity: .9;\n    }\n\n    .st6 {\n        opacity: .1;\n    }\n\n    .st7 {\n        opacity: .2;\n    }\n\n    .bt.business_trips-page-business_trips_table {\n        display: flex;\n        flex-direction: column;\n        gap: 2rem;\n    }\n\n    .bt.active-page-item {\n        background-color: #f5f6fa;\n        padding: 30px 20px 44px;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n        gap: 2.5rem;\n        position: relative;\n        min-height: 100dvh\n    }\n\n    .hidden {\n        display: none;\n    }\n\n    .bt.active-page-item.hidden {\n        display: none;\n    }\n\n    .bt.mobile {\n        max-width: 100%;\n        border-bottom-right-radius: 0;\n        border-bottom-left-radius: 0;\n        background-color: #fff;\n    }\n\n    /* .bt.title-search{\n        padding:.5rem 1rem;\n        border-radius:4px;\n        background:#fff;\n        border:none;\n        box-sizing:border-box;\n        position:relative;\n        transition:all .3s;\n    } */\n    .bt.search-choice-items {\n        display: flex;\n        position: absolute;\n        transform: rotateX(90deg);\n        transform-origin: top;\n        flex-direction: column;\n        top: 3rem;\n        gap: .5rem;\n        width: 100%;\n        box-sizing: border-box;\n        height: fit-content;\n        z-index: 2;\n        background-color: #fff;\n        border-bottom: 1px solid #d9d9d9;\n        border-left: 1px solid #d9d9d9;\n        border-right: 1px solid #d9d9d9;\n        border-bottom-left-radius: 8px;\n        border-bottom-right-radius: 8px;\n        transition: all .1s;\n        max-height: 15rem;\n        overflow: auto;\n    }\n\n    .bt.search-choice-items.expanded {\n        transform: rotateX(0);\n    }\n\n    .content_paginator {\n        display: flex;\n        align-items: center;\n        font-size: 18px;\n        font-weight: 600;\n        font-style: normal;\n        line-height: 22px;\n        padding: 0 .5rem;\n        max-height: 2rem;\n    }\n\n    .paginator_item {\n        color: #05f;\n        padding: .75rem 1rem;\n        transition: all .3s;\n        border-radius: 4px;\n    }\n\n    .paginator_item:hover {\n        cursor: pointer;\n        background-color: #e3ebfc;\n    }\n\n    .paginator_item.active {\n        color: #fff;\n        background-color: #5082e6;\n    }\n\n    .paginator-button {\n        color: #05f;\n    }\n\n    .paginator-button:hover {\n        cursor: pointer;\n    }\n\n    .bt.search-item {\n        padding: .5rem 1rem;\n        cursor: pointer;\n    }\n\n    .bt.search-item:hover {\n        background-color: #f3f6ff;\n    }\n\n    .bt.common-widget-title {\n        display: flex;\n        justify-content: space-between;\n        gap: 1rem;\n    }\n\n    .bt.common-content_title_text {\n        pointer-events: none;\n    }\n\n    .bt.common-content_table {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        border-radius: 8px;\n        background-color: #fff;\n        font-size: 15px;\n        font-weight: 400;\n    }\n\n    .bt.common-content_table.hidden {\n        display: none;\n    }\n\n    .bt.common-content_table-item {\n        display: flex;\n        flex-grow: 1;\n        padding: 1rem 2rem;\n        gap: 1rem;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    .bt.common-table-content {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        padding: .5rem 0;\n    }\n\n    .bt.common-table-content .common-content_table-item {\n        padding: 1rem 1.5rem;\n        margin: 0 .5rem;\n        border-radius: 8px;\n        min-height: 5.75rem;\n    }\n\n    .bt.common-table-content .common-content_table-item:hover {\n        background-color: #f3f6ff;\n        cursor: pointer;\n    }\n\n    .vanilla-calendar.common-content_title_search-extend_item-value_calendar {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        background-color: #fff;\n        z-index: 2;\n        padding: 0;\n        top: 4rem;\n        right: -20%;\n    }\n\n    .vanilla-calendar.hidden {\n        display: none;\n    }\n\n    .vanilla-calendar-wrapper,\n    .vanilla-calendar-header {\n        background-color: #FFF;\n    }\n\n    .bt.common-content_title_search-extend {\n        display: flex;\n        flex-direction: column;\n        padding: 1rem 1.5rem;\n        position: absolute;\n        width: 100%;\n        box-sizing: border-box;\n        height: fit-content;\n        background-color: #fff;\n        box-shadow: 0 6px 28px 0 rgba(37, 41, 65, .16);\n        top: 3.5rem;\n        gap: 1rem;\n        font-size: 15px;\n        transform: rotateX(90deg);\n        transform-origin: top;\n    }\n\n    .bt.common-content_title_search-extend.expanded {\n        transform: rotateX(0);\n        z-index: 10;\n    }\n\n    .bt.common-content_title_search-extend_item {\n        background-color: #fff;\n    }\n\n    .bt.common-content_title_search-extend_item .title-search {\n        border: 1px solid #d9d9d9;\n    }\n\n    .bt.common-content_mobile_container-item_status {\n        font-size: 12px;\n        font-weight: 500;\n        padding: .6rem .9rem;\n        border-radius: 8px;\n        background-color: #bcbcbc;\n        max-width: fit-content;\n    }\n\n    .bt.common-content_title_search-extend_footer {\n        display: flex;\n        gap: 1rem;\n    }\n\n    .bt.common-content_mobile_footer {\n        position: fixed;\n        bottom: 0;\n        display: flex;\n        flex-direction: column;\n        gap: 1rem;\n        border-top-right-radius: 20px;\n        border-top-left-radius: 20px;\n        background-color: #fff;\n        width: 100%;\n        transition: all .3s;\n        transform: translateY(0);\n        z-index: 3;\n        max-height: 80%;\n        overflow-y: auto;\n    }\n\n    .bt.common-content_mobile_footer.hidden {\n        transform: translateY(100%);\n    }\n\n    .bt.common-content_mobile_footer-item {\n        display: flex;\n        padding: 1rem;\n        align-items: center;\n        justify-content: center;\n        border-bottom: 1px solid #f0f0f0;\n    }\n\n    .bt.common-content_mobile_footer-item:first-child,\n    .common-content_mobile_footer-item:last-child {\n        border: none;\n    }\n\n    .bt.common-content_title_tab {\n        border-radius: 8px;\n        background-color: transparent;\n        border: 1px solid #05f;\n        padding: .35rem 1rem;\n        color: #05f;\n        user-select: none;\n        transition: all .3s;\n        cursor: pointer;\n    }\n\n    .bt.common-content_title_tab.active {\n        background-color: #05f;\n        color: #fff;\n    }\n\n    .bt.common-content_title_tab:hover {\n        background-color: #05f;\n        color: #fff;\n    }\n\n    .bt.common_search-date {\n        flex-grow: 0;\n        flex-basis: 30%;\n        display: flex;\n        position: relative;\n    }\n\n    .bt.title-search:focus {\n        outline: 1px solid #84adff;\n    }\n\n    .bt.active h3 {\n        color: #05f;\n    }\n\n    .bt.active .status-name {\n        color: #b1cbff;\n    }\n\n    .bt.active path {\n        stroke: #05f;\n    }\n\n    .bt.main-widget {\n        display: flex;\n        flex-direction: column;\n        gap: 1.25rem;\n    }\n\n    .bt.widget-container {\n        display: flex;\n        gap: 1.25rem;\n    }\n\n    .bt.widget-title {\n        display: flex;\n        justify-content: space-between;\n    }\n\n    .bt.widget-item {\n        padding: 1.5rem;\n        box-sizing: border-box;\n        border-radius: 8px;\n        background-color: #fff;\n        display: flex;\n        flex-direction: column;\n        flex-basis: 25%;\n        transition: all .3s;\n    }\n\n    a.widget-item {\n        text-decoration: none;\n    }\n\n    a.widget-item:hover {\n        box-shadow: 0 0 13px 0 rgba(0, 0, 0, .1);\n    }\n\n    .bt.item-status {\n        display: flex;\n        justify-content: start;\n        align-items: center;\n        gap: .5rem;\n    }\n\n    .bt.status-name {\n        color: #bcbcbc;\n        font-size: 16px;\n        font-weight: 400;\n    }\n\n    .bt.main-page_mobile-footer {\n        display: none;\n        position: fixed;\n        bottom: 0;\n        width: 100%;\n        flex-direction: column;\n        z-index: 2;\n    }\n\n    .bt.other-item svg path {\n        stroke: none;\n    }\n\n    .bt.task-item-title {\n        font-weight: 600;\n    }\n\n    .bt g {\n        fill: transparent;\n    }\n\n    .bt.title-text {\n        font-size: 2.4rem;\n        margin-bottom: 0;\n    }\n\n    .bt.common-widget-title_left {\n        display: flex;\n        align-items: center;\n        justify-content: left;\n        flex-basis: 45%;\n        gap: .6rem;\n        flex-wrap: wrap;\n    }\n\n    .bt.right-arrow {\n        color: #05f;\n    }\n\n    .bt.common-widget-title_right {\n        display: flex;\n        align-items: center;\n        justify-content: right;\n        flex-grow: 1;\n    }\n\n    .bt.business_trips-page_main-content_title-right.common-widget-title_right {\n        width: 100%;\n    }\n\n    .bt.common-content_title_search {\n        width: 70rem;\n        position: relative;\n    }\n\n    .bt.common-content_title_search-extend_title-img {\n        cursor: pointer;\n    }\n\n    .bt.common-content_title_search-extend_title-img path {\n        transition: all .3s;\n    }\n\n    .bt.common-content_title_search-extend_title-img:hover path {\n        fill: #739af0;\n    }\n\n    .bt.common-content_title_search-extend_title {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    .bt.common-content_title_search-extend_content {\n        display: flex;\n        flex-direction: column;\n        padding: 1rem 0;\n        gap: 3rem;\n        overflow-y: visible;\n        flex: 2;\n    }\n\n    .bt.common-content_title_search-extend_item {\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n        gap: 1rem;\n    }\n\n    .bt.common-content_title_search-extend_item-label {\n        flex-basis: 30%;\n    }\n\n    .bt.common-content_title_search-extend_item-value {\n        flex-grow: 1;\n        position: relative;\n    }\n\n    .bt.common-content_title_search-extend_item-value {\n        flex-grow: 1;\n        position: relative;\n    }\n\n    .bt.common-content_title_search-extend_item-value.task-search-date {\n        flex-grow: 0;\n        flex-basis: 30%;\n        display: flex;\n        position: relative;\n    }\n\n    .bt.common-content_title_search-extend_input-date-label {\n        max-width: 10rem;\n        outline: 0;\n        border: none;\n        text-align: center;\n    }\n\n    .bt.common-content_title_search-extend_input-date:has(.common-content_title_search-extend_input-date-label:invalid) {\n        border: 1px solid red;\n    }\n\n    .bt.common-content_title_search-extend_input-date {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    .bt.common-content_title_search-extend_input-date-img {\n        display: flex;\n    }\n\n    .bt.common-content_title_search-extend_input-date-arrow {\n        display: flex;\n        transition: all .3s;\n        cursor: pointer;\n    }\n\n    .bt.common-content_title_search-input_img {\n        position: absolute;\n        top: 15%;\n        right: 1rem;\n        cursor: pointer;\n    }\n\n    .bt.common-content_title_search-extend_input-status {\n        position: relative;\n    }\n\n    .bt.common-content_title_search-extend_input-status-arrow {\n        position: absolute;\n        top: 25%;\n        right: .7rem;\n        transition: all .3s;\n        transform-origin: center;\n        display: flex;\n        cursor: pointer;\n    }\n\n    .bt.common-content_title_search-extend_input-status-arrow {\n        position: absolute;\n        top: 25%;\n        right: .7rem;\n        transition: all .3s;\n        transform-origin: center;\n        display: flex;\n        cursor: pointer;\n    }\n\n    .bt.common-content_title_search-extend_input-status-values {\n        display: flex;\n        position: absolute;\n        transform: rotateX(90deg);\n        transform-origin: top;\n        flex-direction: column;\n        top: 2rem;\n        gap: .5rem;\n        width: 100%;\n        box-sizing: border-box;\n        height: fit-content;\n        z-index: 2;\n        background-color: #fff;\n        border-bottom: 1px solid #d9d9d9;\n        border-left: 1px solid #d9d9d9;\n        border-right: 1px solid #d9d9d9;\n        border-bottom-left-radius: 8px;\n        border-bottom-right-radius: 8px;\n        transition: all .1s;\n    }\n\n    .bt.input-status-values_item {\n        padding: .5rem 1rem;\n        cursor: pointer;\n    }\n\n    .bt.input-status-values_item:hover {\n        background-color: #f3f6ff;\n    }\n\n    .bt.table-content {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        border-radius: 8px;\n        background-color: #fff;\n        font-size: 15px;\n        font-weight: 400;\n    }\n\n    .bt.table-content.hidden {\n        display: none;\n    }\n\n    .bt.common-content_table-title {\n        display: flex;\n        width: 100%;\n        border-bottom: 1px solid #d9d9d9;\n        color: #c4c4c4;\n    }\n\n    a.common-content_table-item {\n        color: #000;\n    }\n\n    a.common-content_table-item:hover {\n        color: #000;\n        text-decoration: none;\n    }\n\n    .bt.task-staff {\n        display: flex;\n        align-items: center;\n        flex-basis: 30%;\n        gap: 1rem;\n    }\n\n    .bt.task-type {\n        flex-basis: 10%;\n    }\n\n    .bt.task-status {\n        flex-basis: 20%;\n        max-width: 15rem;\n    }\n\n    .bt.common-content_table-item-section_status {\n        padding: .5rem .75rem;\n        border-radius: 8px;\n        background-color: #c4c4c4;\n        font-size: 12px;\n        display: flex;\n        justify-content: center;\n        flex-grow: 0;\n    }\n\n    .bt.common-content_table-empty {\n        display: flex;\n        width: 100%;\n        padding: 4rem;\n        align-items: center;\n        justify-content: center;\n        border-radius: 8px;\n    }\n\n    .bt.common-content_table-empty.hidden {\n        display: none;\n    }\n\n    .paginator-item {\n        color: #05f;\n        padding: .75rem 1.4rem;\n        transition: all .3s;\n        border-radius: 4px;\n    }\n\n    .paginator-item:hover {\n        cursor: pointer;\n        background-color: #e3ebfc;\n    }\n\n    .paginator-item.active {\n        color: #fff;\n        background-color: #5082e6;\n    }\n\n    .paginator-item::marker {\n        content: \"\";\n    }\n\n    .bt.main-page_vacation-widget {\n        background-color: #cbdcff;\n        width: 100%;\n        border-radius: 13px;\n        display: flex;\n        padding: 2.25rem;\n        box-sizing: border-box;\n        justify-content: space-between;\n        position: relative;\n    }\n\n    .bt.main-page_vacation-widget-img {\n        position: relative;\n        flex-basis: 50%;\n    }\n\n    .bt.svg-vacation {\n        position: absolute;\n        top: -25%;\n        right: -1rem;\n        height: 22rem;\n        min-width: 10rem;\n        min-height: 5rem;\n    }\n\n    .bt.main-vacation-title {\n        font-size: 24px;\n        font-style: normal;\n    }\n\n    .bt.empty-vacation {\n        color: #5082e6;\n    }\n\n    .bt.business_trips-page_main-content_title-button:hover {\n        color: #0047ff;\n        text-decoration: none;\n    }\n\n    .bt.business_trips_widget-item {\n        min-height: 130px;\n        justify-content: center;\n        align-items: center;\n        border: 1px dashed #cad1d8;\n    }\n\n    .bt.business_trips_widget-item:hover {\n        border: 1px dashed #05f;\n    }\n\n    .bt.business_trips-name {\n        flex-basis: 20%;\n    }\n\n    .bt.business_trips-type-employment {\n        flex-basis: 20%;\n    }\n\n    .bt.business_trips-start {\n        flex-basis: 20%;\n    }\n\n    .bt.business_trips-end {\n        flex-basis: 20%;\n    }\n\n    .bt.business_trips-status {\n        flex-basis: 20%;\n    }\n\n    @media (max-width:1320px) {\n        .bt.svg-vacation {\n            top: -18%;\n        }\n    }\n\n    @media (max-width:1100px) {\n        .bt.task-type {\n            display: none;\n        }\n\n        .bt.task-name {\n            flex-basis: 40%;\n        }\n\n        .bt.task-status {\n            flex-basis: 20%\n        }\n    }\n\n    @media (max-width:900px) {\n        .bt.main-page_vacation-widget-img {\n            display: none;\n        }\n    }\n\n    @media (max-width:720px) {\n        .bt.main-page_vacation-widget {\n            display: none;\n        }\n    }\n\n    @media (max-width:450px) {\n        .bt.main-page {\n            margin-top: 4rem;\n        }\n\n        .bt.main-page.mobile {\n            margin-top: 0;\n            height: 100vh;\n        }\n\n        .bt.active-page-item {\n            background-color: #f5f6fa;\n            gap: 0;\n            padding: 0;\n            height: 100%;\n            overflow-y: auto;\n        }\n\n        .bt.main-page_main-content {\n            padding: 20px 16px 24px;\n            margin-bottom: 4rem;\n        }\n\n        .bt.main-page_mobile-footer {\n            display: flex;\n        }\n\n        .bt.common-widget-title {\n            padding: .5rem .8rem;\n        }\n\n        .bt.common-content_title_text:not(.business_trips-page_main-content_title_text):not(.services-page_main-content_title_text):not(.business_trips-page_main-content_title_text):after {\n            position: absolute;\n            content: url(\"data:image/svg+xml,%3Csvg width='9' height='6' viewBox='0 0 9 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4.12969 5.09184C4.32812 5.31056 4.67188 5.31056 4.87031 5.09184L8.5047 1.08597C8.7962 0.764662 8.56822 0.25 8.13439 0.25H0.86561C0.431776 0.25 0.203796 0.764663 0.495303 1.08597L4.12969 5.09184Z' fill='black'/%3E%3C/svg%3E\");\n            right: -1.5rem;\n            top: -.1rem;\n            cursor: pointer;\n            pointer-events: all;\n        }\n\n        .bt.common-content_title_search-extend {\n            width: 100%;\n            position: fixed;\n            top: 0;\n            left: 0;\n        }\n\n        .bt.common-content_title_search-extend_item {\n            align-items: start;\n            flex-direction: column;\n            gap: .5rem;\n        }\n\n        .vanilla-calendar.common-content_title_search-extend_item-value_calendar {\n            left: 0;\n        }\n\n        .bt.common-content_table {\n            margin: 1rem 0;\n        }\n\n        .bt.common-content_title_text {\n            font-size: 16px;\n            font-weight: 600;\n            position: relative;\n        }\n\n        .bt.common-content_table-title {\n            display: none;\n        }\n\n        .bt.common-content_table-item {\n            padding: 1rem;\n            margin: 0;\n            border-radius: 0;\n            flex-direction: column-reverse;\n            align-items: flex-start;\n        }\n\n        .bt.business_trips-end,\n        .business_trips-start {\n            display: none;\n        }\n\n        .bt.widget-item {\n            flex-basis: auto;\n            flex-grow: 1;\n            max-width: auto;\n        }\n\n        .bt.page-widget {\n            background-color: #f5f6fa;\n            gap: 0;\n        }\n\n        .bt.common-widget-title_left {\n            flex-grow: 1;\n        }\n\n        .bt.common-widget-title_left .common-content_title_tab {\n            display: none;\n        }\n\n        .bt.common-widget-title_right {\n            flex-grow: 0;\n        }\n\n        .bt.common-table-content {\n            background-color: #f5f6fa;\n            gap: 1rem;\n        }\n\n        .bt.common-content_table-item {\n            background-color: #fff;\n        }\n\n        .bt.business_trips-page_main-content_title-sub {\n            padding: .5rem 1rem;\n        }\n\n        .bt.business_trips-page_main-content_title {\n            padding: 1rem;\n        }\n\n        .bt.business_trips-page_main-content-widget_container {\n            padding: 0 1rem;\n        }\n\n        .bt.business_trips-page_main-content_title-sub:not(.common-widget-title) {\n            padding: 1rem;\n        }\n\n        .bt.business_trips-page_main-content_table-item.common-content_table-item {\n            margin: 0 1rem;\n        }\n    }\n\u003c/style\u003e\n\n\u003cdiv class=\"bt business_trips-page-business_trips_table\"\u003e\n    \u003cdiv class=\"bt dropdown-modal hidden\" onclick=\"\u003c%= Scripts %\u003e.handleIssueDropdownModal(this)\"\u003e\u003c/div\u003e\n    \u003cdiv class=\"kedo-loader-wrapper hidden\" data-loader=\"business_trips_widget\"\u003e\n        \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 26 26\" data-test=\"spinner\" class=\"kedo-spinner\"\u003e\n            \u003cpath d=\"M13 3v-2c-2.7 0-5.4.9-7.7 2.8l-.8.7 1.4 1.4c2-1.9 4.5-2.9 7.1-2.9z\" class=\"st0\"\u003e\u003c/path\u003e\n            \u003cpath d=\"M5.9 5.9l-1.4-1.4c-2.3 2.3-3.5 5.4-3.5 8.5h2c0-2.6 1-5.1 2.9-7.1z\" class=\"st1\"\u003e\n            \u003c/path\u003e\n            \u003cpath d=\"M3 13h-2c0 2.7.9 5.4 2.8 7.7l.7.8 1.4-1.4c-1.9-2-2.9-4.5-2.9-7.1z\" class=\"st2\"\u003e\n            \u003c/path\u003e\n            \u003cpath d=\"M5.9 20.1l-1.4 1.4c2.3 2.3 5.4 3.5 8.5 3.5v-2c-2.6 0-5.1-1-7.1-2.9z\" class=\"st3\"\u003e\u003c/path\u003e\n            \u003cpath d=\"M20.1 5.9l1.4-1.4c-2.3-2.3-5.4-3.5-8.5-3.5v2c2.6 0 5.1 1 7.1 2.9z\" class=\"st4\"\u003e\n            \u003c/path\u003e\n            \u003cpath d=\"M23 13h2c0-2.7-.9-5.4-2.8-7.7l-.7-.8-1.4 1.4c1.9 2 2.9 4.5 2.9 7.1z\" class=\"st5\"\u003e\u003c/path\u003e\n            \u003cpath d=\"M20.1 20.1l1.4 1.4c2.3-2.3 3.5-5.4 3.5-8.5h-2c0 2.6-1 5.1-2.9 7.1z\" class=\"st6\"\u003e\u003c/path\u003e\n            \u003cpath d=\"M20.7 22.2l.8-.7-1.4-1.4c-2 2-4.5 2.9-7.1 2.9v2c2.7 0 5.4-.9 7.7-2.8z\" class=\"st7\"\u003e\u003c/path\u003e\n        \u003c/svg\u003e\n    \u003c/div\u003e\n    \u003cdiv class=\"bt business_trips-page_main-content_title-right common-widget-title_right\"\u003e\n        \u003cdiv class=\"bt business_trips-page_main-content_title_search common-content_title_search\"\u003e\n            \u003cinput type=\"text\" placeholder=\"Поиск\" class=\"bt business_trips-page_main-content_title_search-input title-search\"\u003e\n            \u003cdiv class=\"bt common-content_title_search-input_img business_trips-page_main-content_title_search-input_img\"\n                onclick=\"\u003c%= Scripts %\u003e.expandSearch(this)\"\u003e\n                \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                    \u003cpath\n                        d=\"M14.4985 0H1.50178C0.169343 0 -0.502939 1.61659 0.441124 2.56065L5.5 7.62131V13C5.5 13.4721 5.72228 13.9167 6.1 14.25L8.1 15.7208C9.07728 16.4038 10.5 15.7689 10.5 14.5208V7.62131L15.5592 2.56065C16.5013 1.6185 15.8336 0 14.4985 0ZM9 7V14.5L7 13V7L1.5 1.5H14.5L9 7Z\"\n                        fill=\"#5082E6\"\u003e\u003c/path\u003e\n                \u003c/svg\u003e\n            \u003c/div\u003e\n            \u003cdiv class=\"bt business_trips-page_main-content_title_search-extend common-content_title_search-extend\"\u003e\n                \u003cdiv\n                    class=\"bt common-content_title_search-extend_title business_trips-page_main-content_title_search-extend_title\"\u003e\n                    \u003ch3 class=\"bt business_trips-page_main-content_title_search-extend_title-text\"\u003e\n                        Расширенный поиск\n                    \u003c/h3\u003e\n                    \u003cdiv class=\"bt business_trips-page_main-content_title_search-extend_title-img common-content_title_search-extend_title-img\"\n                        onclick=\"\u003c%= Scripts %\u003e.expandSearch(this)\"\u003e\n                        \u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                            \u003cpath\n                                d=\"M14.0823 12L18.7951 7.28732C19.0677 7.01477 19.0677 6.57246 18.7951 6.29946L17.7001 5.20442C17.4275 4.93186 16.9852 4.93186 16.7122 5.20442L11.9998 9.91753L7.28696 5.20486C7.01439 4.9323 6.57207 4.9323 6.29907 5.20486L5.20443 6.29946C4.93186 6.57202 4.93186 7.01433 5.20443 7.28732L9.91725 12L5.20443 16.7127C4.93186 16.9852 4.93186 17.4275 5.20443 17.7005L6.2995 18.7956C6.57207 19.0681 7.01439 19.0681 7.2874 18.7956L11.9998 14.0825L16.7126 18.7951C16.9852 19.0677 17.4275 19.0677 17.7005 18.7951L18.7956 17.7001C19.0681 17.4275 19.0681 16.9852 18.7956 16.7122L14.0823 12Z\"\n                                fill=\"#BFBFBF\"\u003e\u003c/path\u003e\n                        \u003c/svg\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n                \u003cdiv\n                    class=\"bt business_trips-page_main-content_title_search-extend_content common-content_title_search-extend_content\"\u003e\n                    \u003cdiv\n                        class=\"bt common-content_title_search-extend_item business_trips-page_main-content_title_search-extend_item\"\u003e\n                        \u003cdiv\n                            class=\"bt business_trips-page_main-content_title_search-extend_item-label common-content_title_search-extend_item-label\"\u003e\n                            Наименование\n                        \u003c/div\u003e\n                        \u003cdiv\n                            class=\"bt business_trips-page_main-content_title_search-extend_item-value common-content_title_search-extend_item-value\"\u003e\n                            \u003cinput oninput=\"\u003c%= Scripts %\u003e.setFilterField(this.dataset.filter, this.value)\" type=\"text\" class=\"business_trips-page_main-content_title_search-extend_input title-search business_trips-filter\" data-filter=\"name\"\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv\n                        class=\"bt common-content_title_search-extend_item business_trips-page_main-content_title_search-extend_item\"\u003e\n                        \u003cdiv\n                            class=\"bt business_trips-page_main-content_title_search-extend_item-label common-content_title_search-extend_item-label\"\u003e\n                            Дата начала\n                        \u003c/div\u003e\n                        \u003cdiv\n                            class=\"bt business_trips-page_main-content_title_search-extend_item-value task-search-date common-content_title_search-extend_item-value business_trips-search-date common_search-date\"\u003e\n                            \u003cdiv\n                                class=\"bt business_trips-page_main-content_title_search-extend_input-date common-content_title_search-extend_input-date business_trips-search-date title-search\"\u003e\n                                \u003cdiv\n                                    class=\"bt business_trips-page_main-content_title_search-extend_input-date-img common-content_title_search-extend_input-date-img\"\u003e\n                                    \u003csvg width=\"17\" height=\"16\" viewBox=\"0 0 17 16\" fill=\"none\"\n                                        xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                                        \u003cg clip-path=\"url(#clip0_2574_1093)\"\u003e\n                                            \u003cpath\n                                                d=\"M14.9952 2H13.2809V0.375C13.2809 0.167906 13.089 0 12.8523 0H12.5666C12.3299 0 12.138 0.167906 12.138 0.375V2H5.2809V0.375C5.2809 0.167906 5.08901 0 4.85233 0H4.56662C4.32994 0 4.13804 0.167906 4.13804 0.375V2H2.42376C1.47697 2 0.709473 2.67156 0.709473 3.5V14.5C0.709473 15.3284 1.47697 16 2.42376 16H14.9952C15.942 16 16.7095 15.3284 16.7095 14.5V3.5C16.7095 2.67156 15.942 2 14.9952 2ZM2.42376 3H14.9952C15.3103 3 15.5666 3.22431 15.5666 3.5V5H1.85233V3.5C1.85233 3.22431 2.10869 3 2.42376 3ZM14.9952 15H2.42376C2.10869 15 1.85233 14.7757 1.85233 14.5V6H15.5666V14.5C15.5666 14.7757 15.3103 15 14.9952 15Z\"\n                                                fill=\"#8C8C8C\"\u003e\u003c/path\u003e\n                                        \u003c/g\u003e\n                                        \u003cdefs\u003e\n                                            \u003cclipPath id=\"clip0_2574_1093\"\u003e\n                                                \u003crect width=\"16\" height=\"16\" fill=\"white\"\n                                                    transform=\"translate(0.709473)\"\u003e\u003c/rect\u003e\n                                            \u003c/clipPath\u003e\n                                        \u003c/defs\u003e\n                                    \u003c/svg\u003e\n                                \u003c/div\u003e\n                                \u003cinput class=\"bt business_trips-page_main-content_title_search-extend_input-date-label common-content_title_search-extend_input-date-label business_trips-input business_trips-filter\" placeholder=\"дд.мм.гггг\" maxlength=\"10\" pattern=\"^([120]{1}[0-9]{1}|3[01]{1,2}|0[1-9])\\.(1[0-2]|0[1-9])\\.\\d{4}\" oninput=\"\u003c%= Scripts %\u003e.checkAndSetDate(this)\" data-filter=\"start_date\"\u003e\n                                \u003cdiv class=\"bt business_trips-page_main-content_title_search-extend_input-date-arrow common-content_title_search-extend_input-date-arrow\"\n                                    onclick=\"\u003c%= Scripts %\u003e.expandCalendar(this)\"\u003e\n                                    \u003csvg width=\"17\" height=\"16\" viewBox=\"0 0 17 16\" fill=\"none\"\n                                        xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                                        \u003cpath\n                                            d=\"M8.44414 10.2156L4.81914 6.53439C4.67227 6.38751 4.67227 6.15001 4.81914 6.00314L5.04102 5.78126C5.18789 5.63439 5.42539 5.63439 5.57227 5.78126L8.70977 8.97814L11.8473 5.78439C11.9941 5.63751 12.2316 5.63751 12.3785 5.78439L12.6004 6.00626C12.7473 6.15314 12.7473 6.39064 12.6004 6.53751L8.97539 10.2188C8.82852 10.3625 8.59102 10.3625 8.44414 10.2156Z\"\n                                            fill=\"#8C8C8C\"\u003e\u003c/path\u003e\n                                    \u003c/svg\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                            \u003cdiv\n                                class=\"bt business_trips-page_main-content_title_search-extend_item-value_calendar common-content_title_search-extend_item-value_calendar business_trips_start-calendar hidden vanilla-calendar vanilla-calendar_default\"\u003e\n\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv\n                        class=\"bt common-content_title_search-extend_item business_trips-page_main-content_title_search-extend_item\"\u003e\n                        \u003cdiv\n                            class=\"bt business_trips-page_main-content_title_search-extend_item-label common-content_title_search-extend_item-label\"\u003e\n                            Дата окончания\n                        \u003c/div\u003e\n                        \u003cdiv\n                            class=\"bt business_trips-page_main-content_title_search-extend_item-value task-search-date common-content_title_search-extend_item-value business_trips-search-date common_search-date\"\u003e\n                            \u003cdiv\n                                class=\"bt business_trips-page_main-content_title_search-extend_input-date common-content_title_search-extend_input-date business_trips-search-date title-search\"\u003e\n                                \u003cdiv\n                                    class=\"bt business_trips-page_main-content_title_search-extend_input-date-img common-content_title_search-extend_input-date-img\"\u003e\n                                    \u003csvg width=\"17\" height=\"16\" viewBox=\"0 0 17 16\" fill=\"none\"\n                                        xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                                        \u003cg clip-path=\"url(#clip0_2574_1093)\"\u003e\n                                            \u003cpath\n                                                d=\"M14.9952 2H13.2809V0.375C13.2809 0.167906 13.089 0 12.8523 0H12.5666C12.3299 0 12.138 0.167906 12.138 0.375V2H5.2809V0.375C5.2809 0.167906 5.08901 0 4.85233 0H4.56662C4.32994 0 4.13804 0.167906 4.13804 0.375V2H2.42376C1.47697 2 0.709473 2.67156 0.709473 3.5V14.5C0.709473 15.3284 1.47697 16 2.42376 16H14.9952C15.942 16 16.7095 15.3284 16.7095 14.5V3.5C16.7095 2.67156 15.942 2 14.9952 2ZM2.42376 3H14.9952C15.3103 3 15.5666 3.22431 15.5666 3.5V5H1.85233V3.5C1.85233 3.22431 2.10869 3 2.42376 3ZM14.9952 15H2.42376C2.10869 15 1.85233 14.7757 1.85233 14.5V6H15.5666V14.5C15.5666 14.7757 15.3103 15 14.9952 15Z\"\n                                                fill=\"#8C8C8C\"\u003e\u003c/path\u003e\n                                        \u003c/g\u003e\n                                        \u003cdefs\u003e\n                                            \u003cclipPath id=\"clip0_2574_1093\"\u003e\n                                                \u003crect width=\"16\" height=\"16\" fill=\"white\"\n                                                    transform=\"translate(0.709473)\"\u003e\u003c/rect\u003e\n                                            \u003c/clipPath\u003e\n                                        \u003c/defs\u003e\n                                    \u003c/svg\u003e\n                                \u003c/div\u003e\n                                \u003cinput class=\"bt business_trips-page_main-content_title_search-extend_input-date-label common-content_title_search-extend_input-date-label business_trips-input business_trips-filter\" placeholder=\"дд.мм.гггг\" maxlength=\"10\" pattern=\"^([120]{1}[0-9]{1}|3[01]{1,2}|0[1-9])\\.(1[0-2]|0[1-9])\\.\\d{4}\" oninput=\"\u003c%= Scripts %\u003e.checkAndSetDate(this)\" data-filter=\"end_date\"\u003e\n                                \u003cdiv class=\"bt business_trips-page_main-content_title_search-extend_input-date-arrow common-content_title_search-extend_input-date-arrow\"\n                                    onclick=\"\u003c%= Scripts %\u003e.expandCalendar(this)\"\u003e\n                                    \u003csvg width=\"17\" height=\"16\" viewBox=\"0 0 17 16\" fill=\"none\"\n                                        xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                                        \u003cpath\n                                            d=\"M8.44414 10.2156L4.81914 6.53439C4.67227 6.38751 4.67227 6.15001 4.81914 6.00314L5.04102 5.78126C5.18789 5.63439 5.42539 5.63439 5.57227 5.78126L8.70977 8.97814L11.8473 5.78439C11.9941 5.63751 12.2316 5.63751 12.3785 5.78439L12.6004 6.00626C12.7473 6.15314 12.7473 6.39064 12.6004 6.53751L8.97539 10.2188C8.82852 10.3625 8.59102 10.3625 8.44414 10.2156Z\"\n                                            fill=\"#8C8C8C\"\u003e\u003c/path\u003e\n                                    \u003c/svg\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                            \u003cdiv\n                                class=\"bt business_trips-page_main-content_title_search-extend_item-value_calendar common-content_title_search-extend_item-value_calendar business_trips_end-calendar hidden vanilla-calendar vanilla-calendar_default\"\u003e\n\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv\n                        class=\"bt common-content_title_search-extend_item business_trips-page_main-content_title_search-extend_item hidden\"\u003e\n                        \u003cdiv\n                            class=\"bt business_trips-page_main-content_title_search-extend_item-label common-content_title_search-extend_item-label\"\u003e\n                            Вид командировки\n                        \u003c/div\u003e\n                        \u003cdiv\n                            class=\"bt business_trips-page_main-content_title_search-extend_item-value common-content_title_search-extend_item-value\"\u003e\n                            \u003cdiv\n                                class=\"bt business_trips-page_main-content_title_search-extend_input-vacation-type expand-trigger\"\u003e\n                                \u003cinput placeholder=\"Начните вводить текст для поиска\" type=\"text\" class=\"business_trips-page_main-content_title_search-extend_input-vacation-type_value title-search business_trips-filter\" data-filter=\"typeId\" oninput=\"handleVacationTypeSearch(this)\"\u003e\n                                \u003cdiv class=\"bt common-content_title_search-extend_input-status-arrow business_trips-page_main-content_title_search-extend_input-vacation-type-arrow\"\n                                    onclick=\"\u003c%= Scripts %\u003e.searchStatusExpand(this)\"\u003e\n                                    \u003csvg width=\"17\" height=\"16\" viewBox=\"0 0 17 16\" fill=\"none\"\n                                        xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                                        \u003cpath\n                                            d=\"M8.44414 10.2156L4.81914 6.53439C4.67227 6.38751 4.67227 6.15001 4.81914 6.00314L5.04102 5.78126C5.18789 5.63439 5.42539 5.63439 5.57227 5.78126L8.70977 8.97814L11.8473 5.78439C11.9941 5.63751 12.2316 5.63751 12.3785 5.78439L12.6004 6.00626C12.7473 6.15314 12.7473 6.39064 12.6004 6.53751L8.97539 10.2188C8.82852 10.3625 8.59102 10.3625 8.44414 10.2156Z\"\n                                            fill=\"#8C8C8C\"\u003e\u003c/path\u003e\n                                    \u003c/svg\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                            \u003cdiv\n                                class=\"bt business_trips-page_main-content_title_search-extend_input-vacation-type-values search-choice-items expandable\"\u003e\n                                \u003c!-- mock --\u003e\n\n                                \u003c!-- mock end --\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv\n                        class=\"bt common-content_title_search-extend_item business_trips-page_main-content_title_search-extend_item\"\u003e\n                        \u003cdiv\n                            class=\"bt business_trips-page_main-content_title_search-extend_item-label common-content_title_search-extend_item-label\"\u003e\n                            Сотрудник\n                        \u003c/div\u003e\n                        \u003cdiv\n                            class=\"bt business_trips-page_main-content_title_search-extend_item-value common-content_title_search-extend_item-value\"\u003e\n                            \u003cdiv\n                                class=\"bt business_trips-page_main-content_title_search-extend_input-staff expand-trigger\"\u003e\n                                \u003cinput placeholder=\"Начните вводить текст для поиска\" type=\"text\" class=\"business_trips-page_main-content_title_search-extend_input-staff_value title-search business_trips-filter\" data-filter=\"staff_id\" oninput=\"\u003c%= Scripts %\u003e.handleStaffSearch(this)\"\u003e\n                                \u003cdiv class=\"bt common-content_title_search-extend_input-status-arrow business_trips-page_main-content_title_search-extend_input-staff-arrow\"\n                                    onclick=\"\u003c%= Scripts %\u003e.searchStatusExpand(this)\"\u003e\n                                    \u003csvg width=\"17\" height=\"16\" viewBox=\"0 0 17 16\" fill=\"none\"\n                                        xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                                        \u003cpath\n                                            d=\"M8.44414 10.2156L4.81914 6.53439C4.67227 6.38751 4.67227 6.15001 4.81914 6.00314L5.04102 5.78126C5.18789 5.63439 5.42539 5.63439 5.57227 5.78126L8.70977 8.97814L11.8473 5.78439C11.9941 5.63751 12.2316 5.63751 12.3785 5.78439L12.6004 6.00626C12.7473 6.15314 12.7473 6.39064 12.6004 6.53751L8.97539 10.2188C8.82852 10.3625 8.59102 10.3625 8.44414 10.2156Z\"\n                                            fill=\"#8C8C8C\"\u003e\u003c/path\u003e\n                                    \u003c/svg\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                            \u003cdiv\n                                class=\"bt business_trips-page_main-content_title_search-extend_input-staff-values search-choice-items expandable\"\u003e\n                                \u003c!-- mock --\u003e\n\n                                \u003c!-- mock end --\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n                \u003cdiv\n                    class=\"bt business_trips-page_main-content_title_search-extend_footer common-content_title_search-extend_footer\"\u003e\n                    \u003cdiv onclick=\"\u003c%= Scripts %\u003e.expandSearch(this)\"\n                        class=\"bt business_trips-page_main-content_title_search-extend_footer-item common-content_title_tab business_trips-search active\"\u003e\n                        Поиск\n                    \u003c/div\u003e\n                    \u003cdiv onclick=\"\u003c%= Scripts %\u003e.clearFilters()\"\n                        class=\"bt business_trips-page_main-content_title_search-extend_footer-item common-content_title_tab business_trips-reset\"\n                        data-reset=\"business_trips_filters\"\u003e\n                        Сбросить фильтры\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n    \u003ch4 class=\"bt business_trips-page_main-content_title-sub\"\u003e\n        Все\n    \u003c/h4\u003e\n    \u003cdiv class=\"bt business_trips-page_main-content_table common-content_table\"\u003e\n        \u003cdiv class=\"bt business_trips-page_main-content_table-title common-content_table-title\"\u003e\n            \u003cdiv class=\"bt business_trips-page_main-content_table-item common-content_table-item\"\u003e\n                \u003cdiv class=\"bt business_trips-page_main-content_table-item-section business_trips-name\"\u003e\n                    Командировка\n                \u003c/div\u003e\n                \u003cdiv class=\"bt business_trips-page_main-content_table-item-section business_trips-start\"\u003e\n                    Дата начала\n                \u003c/div\u003e\n                \u003cdiv class=\"bt business_trips-page_main-content_table-item-section business_trips-end\"\u003e\n                    Дата окончания\n                \u003c/div\u003e\n                \u003cdiv class=\"bt business_trips-page_main-content_table-item-section business_trips-status\"\u003e\n                    Статус\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"bt business_trips-page_main-content_paginator-wrapper\"\u003e\n            \u003cdiv class=\"kedo-loader-wrapper hidden\" data-loader=\"business_trips_table_container\"\u003e\n                \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 26 26\" data-test=\"spinner\"\u003e\n                    \u003cpath d=\"M13 3v-2c-2.7 0-5.4.9-7.7 2.8l-.8.7 1.4 1.4c2-1.9 4.5-2.9 7.1-2.9z\" class=\"st0\"\u003e\u003c/path\u003e\n                    \u003cpath d=\"M5.9 5.9l-1.4-1.4c-2.3 2.3-3.5 5.4-3.5 8.5h2c0-2.6 1-5.1 2.9-7.1z\" class=\"st1\"\u003e\n                    \u003c/path\u003e\n                    \u003cpath d=\"M3 13h-2c0 2.7.9 5.4 2.8 7.7l.7.8 1.4-1.4c-1.9-2-2.9-4.5-2.9-7.1z\" class=\"st2\"\u003e\n                    \u003c/path\u003e\n                    \u003cpath d=\"M5.9 20.1l-1.4 1.4c2.3 2.3 5.4 3.5 8.5 3.5v-2c-2.6 0-5.1-1-7.1-2.9z\" class=\"st3\"\u003e\n                    \u003c/path\u003e\n                    \u003cpath d=\"M20.1 5.9l1.4-1.4c-2.3-2.3-5.4-3.5-8.5-3.5v2c2.6 0 5.1 1 7.1 2.9z\" class=\"st4\"\u003e\n                    \u003c/path\u003e\n                    \u003cpath d=\"M23 13h2c0-2.7-.9-5.4-2.8-7.7l-.7-.8-1.4 1.4c1.9 2 2.9 4.5 2.9 7.1z\" class=\"st5\"\u003e\n                    \u003c/path\u003e\n                    \u003cpath d=\"M20.1 20.1l1.4 1.4c2.3-2.3 3.5-5.4 3.5-8.5h-2c0 2.6-1 5.1-2.9 7.1z\" class=\"st6\"\u003e\u003c/path\u003e\n                    \u003cpath d=\"M20.7 22.2l.8-.7-1.4-1.4c-2 2-4.5 2.9-7.1 2.9v2c2.7 0 5.4-.9 7.7-2.8z\" class=\"st7\"\u003e\n                    \u003c/path\u003e\n                \u003c/svg\u003e\n            \u003c/div\u003e\n            \u003cdiv class=\"bt business_trips-page_main-content_table-content common-table-content\"\u003e\n\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n    \u003cdiv class=\"bt business_trips-page_main-content_table-empty common-content_table-empty hidden\"\u003e\n        \u003ch3 class=\"bt business_trips-page_main-content_table-empty_title\"\u003e\n            Командировки отсутствуют\n        \u003c/h3\u003e\n    \u003c/div\u003e\n    \u003cdiv class=\"bt business_trips-page_main-content_paginator content_paginator\" data-data-type=\"business_trips_chunks\"\u003e\n        \u003c!-- \u003cdiv class=\"business_trips-page_main-content_paginator-prev prev-button paginator-button\"\u003e\n            ‹\n        \u003c/div\u003e\n        \u003cdiv class=\"business_trips-page_main-content_paginator_item paginator-item\" data-index=\"0\" active=\"true\"\u003e1\u003c/div\u003e\n\n        \u003cdiv class=\"business_trips-page_main-content_paginator-next next-button paginator-button\"\u003e\n            ›\n        \u003c/div\u003e --\u003e\n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003ctemplate class=\"bt business_trips-page_main-content_table-item_template\"\u003e\n    \u003ca href=\"\" class=\"bt business_trips-page_main-content_table-item common-content_table-item\"\u003e\n        \u003cdiv class=\"bt business_trips-page_main-content_table-item-section business_trips-name\"\u003e\n\n        \u003c/div\u003e\n        \u003cdiv class=\"bt business_trips-page_main-content_table-item-section business_trips-start\"\u003e\n\n        \u003c/div\u003e\n        \u003cdiv class=\"bt business_trips-page_main-content_table-item-section business_trips-end\"\u003e\n\n        \u003c/div\u003e\n        \u003cdiv class=\"bt business_trips-page_main-content_table-item-section business_trips-status\"\u003e\n            \u003cdiv\n                class=\"bt business_trips-page_main-content_table-item-section_status common-content_mobile_container-item_status\"\u003e\n\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/a\u003e\n\u003c/template\u003e",
              "hideContent": false
            }
          }
        ]
      }
    },
    "fields": [
      {
        "code": "statuses_app",
        "type": "SYS_COLLECTION",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": true,
        "required": false,
        "single": true,
        "defaultValue": null,
        "calcByFormula": false,
        "formula": "",
        "data": {
          "code": "statuses",
          "filter": {
            "value": {
              "tf": {}
            },
            "enabled": false
          },
          "bindings": null,
          "namespace": "kedo",
          "isDependent": false,
          "linkedFieldCode": ""
        },
        "view": {
          "name": "Приложение Статусы",
          "data": {},
          "input": false,
          "output": true
        }
      },
      {
        "code": "staff_app",
        "type": "SYS_COLLECTION",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": true,
        "required": false,
        "single": true,
        "defaultValue": null,
        "calcByFormula": false,
        "formula": "",
        "data": {
          "code": "staff",
          "filter": {
            "value": {
              "tf": {}
            },
            "enabled": false
          },
          "bindings": null,
          "namespace": "kedo",
          "isDependent": false,
          "linkedFieldCode": ""
        },
        "view": {
          "name": "Приложение Сотрудники",
          "data": {},
          "input": false,
          "output": true
        }
      },
      {
        "code": "business_trips_app",
        "type": "SYS_COLLECTION",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": true,
        "required": false,
        "single": true,
        "defaultValue": null,
        "calcByFormula": false,
        "formula": "",
        "data": {
          "code": "business_trips",
          "filter": {
            "value": {
              "tf": {}
            },
            "enabled": false
          },
          "bindings": null,
          "namespace": "kedo",
          "isDependent": false,
          "linkedFieldCode": ""
        },
        "view": {
          "name": "Приложение Командировки",
          "data": {},
          "input": false,
          "output": true
        }
      },
      {
        "code": "all_statuses",
        "type": "SYS_COLLECTION",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": true,
        "required": false,
        "single": false,
        "defaultValue": null,
        "calcByFormula": false,
        "formula": "",
        "data": {
          "code": "statuses",
          "filter": {
            "value": {
              "tf": {}
            },
            "enabled": false
          },
          "bindings": null,
          "namespace": "kedo",
          "isDependent": false,
          "linkedFieldCode": ""
        },
        "view": {
          "name": "Все статусы",
          "data": {},
          "input": true,
          "output": true
        }
      },
      {
        "code": "all_business_trips",
        "type": "SYS_COLLECTION",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": true,
        "required": false,
        "single": false,
        "defaultValue": null,
        "calcByFormula": false,
        "formula": "",
        "data": {
          "code": "business_trips",
          "filter": {
            "value": {
              "tf": {}
            },
            "enabled": false
          },
          "bindings": null,
          "namespace": "kedo",
          "isDependent": false,
          "linkedFieldCode": ""
        },
        "view": {
          "name": "Все командировки",
          "data": {},
          "input": true,
          "output": true
        }
      },
      {
        "code": "first_render",
        "type": "BOOLEAN",
        "searchable": false,
        "indexed": false,
        "deleted": false,
        "array": false,
        "required": false,
        "single": true,
        "defaultValue": true,
        "calcByFormula": false,
        "formula": "",
        "data": {},
        "view": {
          "name": "Первый рендер",
          "data": {
            "additionalType": "radio",
            "noValue": "Нет",
            "yesValue": "Да"
          },
          "input": true,
          "output": true
        }
      }
    ],
    "fieldVisibilityConditions": {
      "__hidden": {
        "enabled": false,
        "conditions": []
      },
      "__outlet": {
        "enabled": false,
        "conditions": []
      },
      "__styles": {
        "enabled": false,
        "conditions": []
      },
      "__baseURL": {
        "enabled": false,
        "conditions": []
      },
      "__classes": {
        "enabled": false,
        "conditions": []
      },
      "staff_app": {
        "enabled": false,
        "conditions": []
      },
      "__readOnly": {
        "enabled": false,
        "conditions": []
      },
      "all_statuses": {
        "enabled": false,
        "conditions": []
      },
      "first_render": {
        "enabled": false,
        "conditions": []
      },
      "statuses_app": {
        "enabled": false,
        "conditions": []
      },
      "__relativeURL": {
        "enabled": false,
        "conditions": []
      },
      "__onMouseEnter": {
        "enabled": false,
        "conditions": []
      },
      "__onMouseLeave": {
        "enabled": false,
        "conditions": []
      },
      "__isConstValues": {
        "enabled": false,
        "conditions": []
      },
      "all_business_trips": {
        "enabled": false,
        "conditions": []
      },
      "business_trips_app": {
        "enabled": false,
        "conditions": []
      },
      "__renderContentAsync": {
        "enabled": false,
        "conditions": []
      },
      "__renderContentOnDemand": {
        "enabled": false,
        "conditions": []
      }
    },
    "scriptOptions": {},
    "clientScripts": "declare const console: any, document: any, window: any, $: any, VanillaCalendar: any;\n\nenum FilterType {\n    START_DATE = \"start_date\",\n    END_DATE = \"end_date\",\n    STAFF_ID = \"staff_id\",\n    NAME = \"name\"\n};\n\nenum LoaderType {\n    BUSINESS_TRIPS_CONTAINER = \"business_trips_table_container\",\n    BUSINESS_TRIPS_WIDGET = \"business_trips_widget\"\n};\n\ntype objData = {\n    name: string,\n    status: string,\n    link: string,\n    start_date?: string,\n    end_date?: string,\n    start_date_obj: TDate | TDatetime,\n    end_date_obj: TDate | TDatetime,\n    staffId: string | undefined,\n};\n\ntype businessTripFilter = {\n    name?: string,\n    start_date?: string,\n    end_date?: string,\n    staff_id?: string\n};\n\nclass SystemDataManager {\n    statuses: ApplicationItem\u003cApplication$kedo$statuses$Data, any\u003e[];\n    allEmploymentPlacements: ApplicationItem\u003cApplication$kedo$employment_directory$Data, any\u003e[];\n    allStaff: ApplicationItem\u003cApplication$kedo$staff$Data, any\u003e[];\n    allBusinessTrips: ApplicationItem\u003cApplication$kedo$business_trips$Data, any\u003e[];\n    currentStaff: ApplicationItem\u003cApplication$kedo$staff$Data, any\u003e | undefined; \n};\n\nclass DomManager {\n    allStatuses: ApplicationItem\u003cApplication$kedo$statuses$Data, any\u003e[];\n    allBusinessTrips: ApplicationItem\u003cApplication$kedo$business_trips$Data, any\u003e[];\n    baseUrl = window.location.href;\n    businessTripNodeTemplate: any;\n    businessTripContainer: any;\n    emptyTemplate: any;\n    templateToRender: any;\n    paginatorNode: any;\n\n    renderStaff() {\n        const businessTripsStaffContainer = document.querySelector(\".business_trips-page_main-content_title_search-extend_input-staff-values\");\n\n        systemDataManager.allStaff.forEach(staff =\u003e {\n            const newStaffRow = document.createElement(\"div\");\n            newStaffRow.className = \"input-status-values_item\";\n            newStaffRow.dataset[\"staff_id\"] = staff.id;\n            newStaffRow.textContent = staff.data.__name;\n            newStaffRow.addEventListener(\"click\", () =\u003e {\n                handleStaffChoice(newStaffRow)\n            });\n            businessTripsStaffContainer.append(newStaffRow);\n        });\n    };\n\n    serializeObjData() {\n        dataSource = [];\n        systemDataManager.allBusinessTrips.forEach(item =\u003e {\n            const itemStatus = item.data.kedo_status ? systemDataManager.statuses.find(s =\u003e s.id === item.data.kedo_status?.id) : undefined;\n            const employmentPlacement = item.data.employment_placement || item.data.employment_place || item.data.employment_directory;\n\n            const data: objData = {\n                name: item.data.__name,\n                status: itemStatus ? itemStatus.data.name : item.data.__status \u0026\u0026 item.data.__status.status ? item.data.__status.status.name : \"Не определён\",\n                link: `${window.location.href}(p:item/business_trips/businesstrip_requests/${item.id})`,\n                start_date: item.data.start_date_string || undefined,\n                end_date: item.data.end_date_string || undefined,\n                start_date_obj: item.data.start_date || item.data.__createdAt,\n                end_date_obj: item.data.end_date || item.data.__createdAt,\n                staffId: item.data.kedo_staff ? item.data.kedo_staff.id : undefined,\n            };\n\n            dataSource.push(data);\n        });\n    };\n\n    setActive(element: any) {\n        element.classList.add(\"active\");\n    };\n\n    handleLoader(loaderType: LoaderType) {\n        document.querySelector(`[data-loader=${loaderType}]`).classList.toggle(\"hidden\");\n    };\n\n    renderComponent(domElement: any, elementToAppend: any) {\n        if (Array.isArray(elementToAppend)) {\n            domElement.append(...elementToAppend);\n            return;\n        };\n        domElement.appendChild(elementToAppend);\n    };\n\n    getItemRow(item: objData) {\n        const itemContent = domManager.templateToRender.content.cloneNode(true);\n        const itemRow = itemContent.querySelector(\".business_trips-page_main-content_table-item\");\n        const itemName = itemRow.querySelector(\".business_trips-name\");\n        const itemStatus = itemRow.querySelector(\".business_trips-page_main-content_table-item-section_status\");\n        const itemStart = itemRow.querySelector(\".business_trips-start\");\n        const itemEnd = itemRow.querySelector(\".business_trips-end\");\n        const [startDay, startMonth, startYear] = item.start_date ? item.start_date.split(\".\") : [\"\", \"\", \"\"];\n        const [endDay, endMonth, endYear] = item.end_date ? item.end_date.split(\".\") : [\"\", \"\", \"\"];\n\n        itemName.textContent = item.name;\n        itemStatus.textContent = item.status;\n        itemStart.textContent = `${startDay} ${monthReference[startMonth.replace(\"0\", \"\")].toLowerCase()}, ${startYear}г., ${(item.start_date_obj as TDatetime).hours}:${(item.start_date_obj as TDatetime).minutes.toString().length \u003c 2 ? \"0\" + (item.start_date_obj as TDatetime).minutes.toString() : (item.start_date_obj as TDatetime).minutes.toString()} `\n        itemEnd.textContent = `${endDay} ${monthReference[endMonth.replace(\"0\", \"\")].toLowerCase()}, ${endYear}г., ${(item.end_date_obj as TDatetime).hours}:${(item.end_date_obj as TDatetime).minutes.toString().length \u003c 2 ? \"0\" + (item.end_date_obj as TDatetime).minutes.toString() : (item.end_date_obj as TDatetime).minutes.toString()} `\n\n\n        itemRow.href = item.link;\n        return itemRow;\n    };\n\n    getPaginatorTemplate(data: objData[]) {\n        const mockContainer = document.createElement(\"div\");\n\n        data.forEach(item =\u003e {\n            const newRow = this.getItemRow(item);\n            mockContainer.append(newRow);\n        });\n\n        return mockContainer.innerHTML;\n    };\n\n    renderPaginator() {\n        if (!Context.data.first_render) {\n            $('.business_trips-page_main-content_paginator').pagination(\"destroy\");\n        };\n\n        const getPaginatorTemplate = this.getPaginatorTemplate.bind(domManager)\n\n        $('.business_trips-page_main-content_paginator').pagination({\n            dataSource,\n            callback: function(data: objData[], pagination: any) {\n                const html = getPaginatorTemplate(data);\n                $('.business_trips-page_main-content_table-content').html(html);\n            },\n            ulClassName: \"content_paginator\",\n            prevClassName: \"paginator-item\",\n            nextClassName: \"paginator-item\",\n            pageClassName: \"paginator-item\",\n            pageRange: 1,\n            hideLastOnEllipsisShow: true,\n            hideFirstOnEllipsisShow: true,\n        });\n    };\n};\n\nconst calendarObject = {\n    options: {\n        actions: {\n            clickDay(event: any, self: any) {\n                setDate(event)\n            }\n        },\n        settings: {\n            lang: \"ru-RU\"\n        }\n    },\n    checkComponents() {\n        return !!(\n            document.querySelector(\".business_trips_start-calendar\") \u0026\u0026\n            document.querySelector(\".business_trips_end-calendar\")\n        )\n    },\n    setCalendars() {\n        const businessTripsStartCalendar = new VanillaCalendar(\".business_trips_start-calendar\", this.options);\n        const businessTripsEndCalendar = new VanillaCalendar(\".business_trips_end-calendar\", this.options);\n        [businessTripsStartCalendar, businessTripsEndCalendar].forEach(calendar =\u003e calendar.init());\n    }\n};\n\nconst monthReference: Record\u003cstring, string\u003e = {\n    \"1\": \"Января\",\n    \"2\": \"Февраля\",\n    \"3\": \"Марта\",\n    \"4\": \"Апреля\",\n    \"5\": \"Мая\",\n    \"6\": \"Июня\",\n    \"7\": \"Июля\",\n    \"8\": \"Августа\",\n    \"9\": \"Сентября\",\n    \"10\": \"Октября\",\n    \"11\": \"Ноября\",\n    \"12\": \"Декабря\"\n};\n\nconst domManager = new DomManager();\nconst systemDataManager = new SystemDataManager();\nconst dateRegex = /^([120]{1}[0-9]{1}|3[01]{1,2}|0[1-9])\\.(1[0-2]|0[1-9])\\.\\d{4}/;\nconst businessTripsFilterClosure: ApplicationFilterClosure\u003cApplication$kedo$business_trips$Data\u003e = (f, g) =\u003e {\n    const filters: Filter[] = [f.__deletedAt.eq(null)];\n    const businessTripsFilters: businessTripFilter = window.localStorage.business_trips_filters ? JSON.parse(window.localStorage.getItem(\"business_trips_filters\")) : {};\n\n    if (Object.keys(businessTripsFilters).length \u003e 0) {\n        if (businessTripsFilters.name) {\n            filters.push(f.__name.like(businessTripsFilters.name))\n        };\n        if (businessTripsFilters.start_date) {\n            //const [day, month, year] = businessTripsFilters.start_date.split(\".\").map(Number);\n            const startDate = new Datetime(businessTripsFilters.start_date, \"'DD.MM.YYYY'\");\n            filters.push(f.start_date.gte(startDate));\n        };\n        if (businessTripsFilters.end_date) {\n            //const [day, month, year] = businessTripsFilters.end_date.split(\".\").map(Number);\n            const endDate = new Datetime(businessTripsFilters.end_date, \"'DD.MM.YYYY'\");\n            filters.push(f.start_date.gte(endDate));\n        };\n        if (businessTripsFilters.staff_id) {\n            const staffRef = \u003cTRefItem\u003e{\n                namespace: \"kedo\",\n                code: \"staff\",\n                id: businessTripsFilters.staff_id\n            };\n            filters.push(f.kedo_staff.link(staffRef))\n        } else {\n            filters.push(f.kedo_staff.link(systemDataManager.currentStaff!))\n        }\n    } else {\n        filters.push(f.kedo_staff.link(systemDataManager.currentStaff!))\n    };\n\n    return g.and(...filters);\n};\n\nlet dataSource: objData[] = [];\n\nfunction handleIssueDropdownModal(target: any) {\n    console.log(`modal`);\n    const dropdown = document.querySelector(\".bt.common-content_title_search-extend\");\n    let modal: any;\n\n    if (target.classList.contains(\"dropdown-modal\")) {\n        modal = target;\n    } else {\n        modal = document.querySelector(\".bt.dropdown-modal\");\n    };\n    dropdown.classList.toggle(\"expanded\");\n    modal.classList.toggle(\"hidden\");\n};\n\nfunction clearFilters() {\n    window.localStorage.removeItem(\"business_trips_filters\");\n    const allInputs = document.querySelectorAll(\".business_trips-page_main-content_title_search-extend input\");\n    allInputs.forEach((input: any) =\u003e {\n        input.value = \"\";\n    });\n};\n\nfunction setFilterField(filterType: FilterType, filterValue: string) {\n    const filterObject = window.localStorage.getItem(\"business_trips_filters\") ? JSON.parse(window.localStorage.getItem(\"business_trips_filters\")) : {};\n    filterObject[filterType] = filterValue;\n    window.localStorage.setItem(\"business_trips_filters\", JSON.stringify(filterObject));\n};\n\nasync function handleMainSearch(event: any) {\n    if (event.type === \"keypress\") {\n        domManager.handleLoader(LoaderType.BUSINESS_TRIPS_CONTAINER);\n        await getBusinessTrips();\n        domManager.serializeObjData();\n        domManager.renderPaginator();\n        domManager.handleLoader(LoaderType.BUSINESS_TRIPS_CONTAINER);\n        tableIsEmpty();\n        return;\n    };\n    \n    setFilterField(FilterType.NAME, event.target.value);\n    const nameInput = document.querySelector(\".business_trips-page_main-content_title_search-extend_input[data-filter=name]\");\n    nameInput.value = event.target.value;\n};\n\nfunction setDate(event: any) {\n    const [year, month, day] = [...event.target.dataset.calendarDay.split(\"-\")];\n    const dateString = `${day}.${month}.${year}`;\n    const calendarInput = event.target.closest(\".task-search-date\").querySelector(\"input\");\n    const calendarArrow = event.target.closest(\".task-search-date\").querySelector(\".business_trips-page_main-content_title_search-extend_input-date-arrow\");\n    const closestCalendar = event.target.closest(\".vanilla-calendar\");\n    const filterType: FilterType = calendarInput.dataset.filter;\n\n    calendarArrow.style.transform = \"\";\n    calendarInput.value = dateString;\n    closestCalendar.classList.toggle(\"hidden\");\n\n    setFilterField(filterType, dateString);\n};\n\nasync function expandSearch(target: any) {\n    let expandSearchContainer: any;\n    let expandModal = document.querySelector(\".dropdown-modal\");\n\n    if (Array.from(target.classList).some((cls: any) =\u003e cls.includes(\"common-content_title_search-extend_title-img\"))) {\n        expandSearchContainer = target.parentElement.parentElement\n    } else if (target.classList.contains(\"business_trips-search\")) {\n        domManager.handleLoader(LoaderType.BUSINESS_TRIPS_CONTAINER);\n        await getBusinessTrips();\n        domManager.serializeObjData();\n        domManager.renderPaginator();\n        expandSearchContainer = target.closest(\".business_trips-page_main-content_title_search-extend\");\n        tableIsEmpty();\n        domManager.handleLoader(LoaderType.BUSINESS_TRIPS_CONTAINER);\n    } else {\n        expandSearchContainer = target.nextElementSibling\n    };\n\n    expandSearchContainer.classList.toggle(\"expanded\");\n    expandModal.classList.toggle(\"hidden\");\n    console.log(expandModal.classList);\n};\n\nfunction expandCalendar(target: any) {\n    target.style.transform = target.style.transform \n    ? \"\"\n    : \"rotateZ(180deg)\"\n    const calendar = target.parentElement.nextElementSibling;\n    calendar.classList.toggle(\"hidden\");\n};\n\nfunction checkAndSetDate(target: any) {\n    if (!target.value || target.value.length \u003c 1) {\n        return;\n    };\n\n    if (target.value.match(dateRegex)) {\n        const filterType: FilterType = target.dataset.filter;\n        setFilterField(filterType, target.value);\n    };\n};\n\nfunction searchStatusExpand(target: any) {\n    let expandContainer: any;\n    if (!target.classList.contains(\"input-status-values_item\")) {\n        expandContainer = target.parentElement.nextElementSibling;\n        if (expandContainer.classList.contains(\"expanded\")) {\n            target.style.transform = \"rotateZ(0)\"\n        } else {\n            target.style.transform = \"rotateZ(180deg)\"\n        };\n    } else {\n        expandContainer = target.parentElement;\n        const arrow = expandContainer.parentElement.querySelector(\".common-content_title_search-extend_input-status-arrow\");\n        arrow.style.transform = 'rotateZ(0)';\n    };\n    \n    expandContainer.classList.toggle(\"expanded\");\n};\n\nfunction handleStaffSearch(target: any) {\n    const staffValues = target.parentElement.nextElementSibling;\n    if (!staffValues.classList.contains(\"expanded\") || !target.value || target.value.length \u003c 1) {\n        staffValues.classList.toggle(\"expanded\");\n    };\n    const staffItems = staffValues.querySelectorAll(\".search-item\");\n\n    staffItems.forEach((item: any) =\u003e {\n        if (!item.textContent.toLowerCase().includes(target.value.toLowerCase()) \u0026\u0026 !item.classList.contains(\"hidden\")) {\n            item.classList.toggle(\"hidden\");\n        } else if (item.textContent.toLowerCase().includes(target.value.toLowerCase()) \u0026\u0026 item.classList.contains(\"hidden\")) {\n            item.classList.toggle(\"hidden\")\n        };\n    });\n};\n\nfunction handleStaffChoice(target: any) {\n    const staffInput = target.parentElement.previousElementSibling.querySelector(\"input\");\n    staffInput.value = target.textContent.trim();\n    staffInput.dataset.staff_id = target.dataset.staff_id;\n    searchStatusExpand(target);\n    setFilterField(FilterType.STAFF_ID, target.dataset.staff_id);\n};\n\nfunction tableIsEmpty(): Boolean | void {\n    if (systemDataManager.allBusinessTrips.length \u003c 1) {\n        domManager.emptyTemplate.classList.remove(\"hidden\");\n        domManager.businessTripContainer.classList.add(\"hidden\");\n        domManager.paginatorNode.classList.add(\"hidden\");\n        return true;\n    } else if (systemDataManager.allBusinessTrips.length) {\n        domManager.emptyTemplate.classList.add(\"hidden\")\n        domManager.businessTripContainer.classList.remove(\"hidden\");\n        domManager.paginatorNode.classList.remove(\"hidden\");\n        return false;\n    };\n};\n\nasync function onInit(): Promise\u003cvoid\u003e {\n    const waitForPaginator = window.setInterval(() =\u003e {\n        if (!$.pagination) {\n            return;\n        };\n        window.clearInterval(waitForPaginator);\n        const mainInput = document.querySelector(\".business_trips-page_main-content_title_search-input\");\n        domManager.templateToRender = document.querySelector(\".business_trips-page_main-content_table-item_template\");\n        domManager.paginatorNode = document.querySelector(\".business_trips-page_main-content_paginator\");\n        domManager.businessTripContainer = document.querySelector(\".business_trips-page_main-content_table\");\n        domManager.emptyTemplate = document.querySelector(\".business_trips-page_main-content_table-empty\");\n        mainInput.addEventListener(\"input\", (e: any) =\u003e {\n            handleMainSearch(e);\n        });\n        mainInput.addEventListener(\"keypress\", (e: any) =\u003e {\n            if ((e.keyCode === 13 || e.keyCode === 76)) {\n                handleMainSearch(e);\n            };\n        });\n        init().then(_ =\u003e {\n            Context.data.first_render = false;\n            //domManager.handleLoader(LoaderType.BUSINESS_TRIPS_WIDGET);\n        });\n    }, 300)\n};\n\nasync function init(): Promise\u003cvoid\u003e {\n    window.localStorage.removeItem(\"business_trips_filters\");\n    const currentUser = await System.users.getCurrentUser();\n    const currentStaff = await Context.fields.staff_app.app.search().where((f, g) =\u003e g.and(\n        f.__deletedAt.eq(null),\n        f.ext_user.eq(currentUser)\n    )).first();\n\n    if (!currentStaff) {\n        return;\n    };\n\n    systemDataManager.currentStaff = currentStaff;\n    \n    await getData();\n\n    domManager.renderStaff();\n    calendarObject.setCalendars();\n};\n\nasync function getBusinessTrips(): Promise\u003cvoid\u003e {\n    const businessTripsCount = await Context.fields.all_business_trips.app.search().where(businessTripsFilterClosure).count();\n    systemDataManager.allBusinessTrips = await Context.fields.all_business_trips.app.search().where(businessTripsFilterClosure).size(businessTripsCount).all();\n};\n\nasync function getData(): Promise\u003cvoid\u003e {\n    await getBusinessTrips();\n\n    if (tableIsEmpty()) {\n        return;\n    };\n\n    const [staffCount, employmentPlacementsCount, statusesCount] = await Promise.all([\n        Context.fields.staff_app.app.search().where(f =\u003e f.__deletedAt.eq(null)).count(),\n        Context.fields.staff_app.app.fields.employment_table.fields.employment_placement_app.app.search().where(f =\u003e f.__deletedAt.eq(null)).count(),\n        Context.fields.all_statuses.app.search().where(f =\u003e f.__deletedAt.eq(null)).count()\n    ]);\n    [\n        systemDataManager.allStaff,\n        systemDataManager.allEmploymentPlacements,\n        systemDataManager.statuses\n    ] = await Promise.all([\n        Context.fields.staff_app.app.search().where(f =\u003e f.__deletedAt.eq(null)).size(staffCount).all(),\n        Context.fields.staff_app.app.fields.employment_table.fields.employment_placement_app.app.search().where(f =\u003e f.__deletedAt.eq(null)).size(employmentPlacementsCount).all(),\n        Context.fields.all_statuses.app.search().where(f =\u003e f.__deletedAt.eq(null)).size(statusesCount).all()\n    ]);\n    domManager.serializeObjData();\n    domManager.renderPaginator();\n};",
    "clientScriptOptions": {
      "allowServer": true
    },
    "serverScripts": "async function getItemsFromApi(ns: string, code: string, staffFilter = false): Promise\u003c{id: string, name: string}[] | any[] |undefined\u003e {\n\n    const baseUrl = System.getBaseUrl();\n    const token = Context.data.token\n\n    if (!token) {\n        Context.data.error = \"no token\";\n        return;\n    };\n\n    const testResponse = await fetch(`${baseUrl}/pub/v1/app/${ns}/${code}/list`, {\n        method: \"POST\",\n        headers: {\n            \"Authorization\": `Bearer ${token}`\n        },\n        body: JSON.stringify({\n                active: true\n        })\n    });\n\n    if (!testResponse.ok) {\n        Context.data.error = \"error at check: \" + await testResponse.text();\n        return;\n    };\n\n    const allItems: {id: string, name: string}[] | any[] = [];\n\n    let searchFulfilled = false;\n    let itemsCount = 0;\n\n    while (!searchFulfilled) {\n        let body: Record\u003cstring, any\u003e = {\n            active: true,\n            from: itemsCount,\n            size: 100\n        };\n\n        if (staffFilter) {\n            body.filter = {\n                link: [\n                    {field: \"kedo_staff\"},\n                    {list: [Context.data.staff_app!.id]}\n                ]\n            }\n        }\n        const response = await fetch(`${baseUrl}/pub/v1/app/${ns}/${code}/list`, {\n            method: \"POST\",\n            headers: {\n                Authorization: `Bearer ${token}`\n            },\n            body: JSON.stringify(body)\n        });\n\n        if (!response.ok) {\n            Context.data.error = \"error at cycle: \" + await response.text();\n            break;\n        };\n\n        const respJson = await response.json();\n        const result = respJson.result.result;\n        if (result.length \u003c 1) {\n            searchFulfilled = true;\n            break;\n        };\n        if (itemsCount \u003c respJson.result.total) {\n            itemsCount += result.length;\n        } else {\n            searchFulfilled = true;\n            break;\n        };\n\n        if (staffFilter) {\n            allItems.push(result);\n        } else {\n            allItems.push(result.map((item: any) =\u003e {\n                return {\n                    id: item.__id,\n                    name: item.__name\n                };\n            }));\n        }\n    };\n\n    return allItems;\n};\n\nasync function getOvertimeWork(): Promise\u003cvoid\u003e {\n    const allItems = await getItemsFromApi(\"time_tracking\", \"overtime_work\", true);\n\n    if (allItems) {\n        Context.data.debug = JSON.stringify([].concat.apply([], allItems))\n        Context.data.overtime_work_json = JSON.stringify([].concat.apply([], allItems).map((item: any) =\u003e {\n            return {\n                id: item.__id,\n                code: \"overtime_work\",\n                namespace: \"time_tracking\",\n                data: {\n                    kedo_status: item.kedo_status ? {\n                        id: item.kedo_status[0]\n                    } : undefined,\n                    __name: item.__name,\n                    __createdAt: item.__createdAt,\n                    start_date: item.start_date,\n                    date: item.date,\n                    start_date_string: item.start_date_string ?? undefined,\n                    kedo_staff: item.kedo_staff ? {\n                        id: item.kedo_staff[0]\n                    } : undefined,\n                    work_type: item.overtime_type ? item.overtime_type[0].name : \"Работа в нерабочее время\"\n                }\n            }\n        }));\n    };\n};\n\nasync function getCities(): Promise\u003cvoid\u003e {\n    const allCities = await getItemsFromApi(\"business_trips\", \"goroda\");\n\n    if (allCities) {\n        Context.data.cities_json = JSON.stringify([].concat.apply([], allCities));\n    };\n};\n\nasync function setUserAvatar(): Promise\u003cvoid\u003e {\n    const user = await System.users.getCurrentUser();\n    const newImg = await user.fields.avatar.create(\"avatar.jpg\", base64ToArrayBuffer(Context.data.avatar_base64!));\n    user.data.avatar = newImg;\n    await user.save();\n};\n\nfunction base64ToArrayBuffer(base64: string): ArrayBuffer {\n    let binaryString = atob(base64);\n    let bytes = new Uint8Array(binaryString.length);\n\n    for (let i = 0; i \u003c binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    };\n\n    return bytes.buffer;\n};",
    "serverScriptOptions": {}
  },
  "dataNamespace": "",
  "dataCode": "",
  "runtime": {
    "version": 1,
    "clientScripts": "System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server, System) {\n        let FilterType;\n        (function (FilterType) {\n            FilterType[\"START_DATE\"] = \"start_date\";\n            FilterType[\"END_DATE\"] = \"end_date\";\n            FilterType[\"STAFF_ID\"] = \"staff_id\";\n            FilterType[\"NAME\"] = \"name\";\n        })(FilterType || (FilterType = {}));\n        ;\n        let LoaderType;\n        (function (LoaderType) {\n            LoaderType[\"BUSINESS_TRIPS_CONTAINER\"] = \"business_trips_table_container\";\n            LoaderType[\"BUSINESS_TRIPS_WIDGET\"] = \"business_trips_widget\";\n        })(LoaderType || (LoaderType = {}));\n        ;\n        class SystemDataManager {\n        }\n        ;\n        class DomManager {\n            constructor() {\n                this.baseUrl = window.location.href;\n            }\n            renderStaff() {\n                const businessTripsStaffContainer = document.querySelector(\".business_trips-page_main-content_title_search-extend_input-staff-values\");\n                systemDataManager.allStaff.forEach(staff =\u003e {\n                    const newStaffRow = document.createElement(\"div\");\n                    newStaffRow.className = \"input-status-values_item\";\n                    newStaffRow.dataset[\"staff_id\"] = staff.id;\n                    newStaffRow.textContent = staff.data.__name;\n                    newStaffRow.addEventListener(\"click\", () =\u003e {\n                        handleStaffChoice(newStaffRow);\n                    });\n                    businessTripsStaffContainer.append(newStaffRow);\n                });\n            }\n            ;\n            serializeObjData() {\n                dataSource = [];\n                systemDataManager.allBusinessTrips.forEach(item =\u003e {\n                    const itemStatus = item.data.kedo_status ? systemDataManager.statuses.find(s =\u003e { var _a; return s.id === ((_a = item.data.kedo_status) === null || _a === void 0 ? void 0 : _a.id); }) : undefined;\n                    const employmentPlacement = item.data.employment_placement || item.data.employment_place || item.data.employment_directory;\n                    const data = {\n                        name: item.data.__name,\n                        status: itemStatus ? itemStatus.data.name : item.data.__status \u0026\u0026 item.data.__status.status ? item.data.__status.status.name : \"Не определён\",\n                        link: `${window.location.href}(p:item/business_trips/businesstrip_requests/${item.id})`,\n                        start_date: item.data.start_date_string || undefined,\n                        end_date: item.data.end_date_string || undefined,\n                        start_date_obj: item.data.start_date || item.data.__createdAt,\n                        end_date_obj: item.data.end_date || item.data.__createdAt,\n                        staffId: item.data.kedo_staff ? item.data.kedo_staff.id : undefined,\n                    };\n                    dataSource.push(data);\n                });\n            }\n            ;\n            setActive(element) {\n                element.classList.add(\"active\");\n            }\n            ;\n            handleLoader(loaderType) {\n                document.querySelector(`[data-loader=${loaderType}]`).classList.toggle(\"hidden\");\n            }\n            ;\n            renderComponent(domElement, elementToAppend) {\n                if (Array.isArray(elementToAppend)) {\n                    domElement.append(...elementToAppend);\n                    return;\n                }\n                ;\n                domElement.appendChild(elementToAppend);\n            }\n            ;\n            getItemRow(item) {\n                const itemContent = domManager.templateToRender.content.cloneNode(true);\n                const itemRow = itemContent.querySelector(\".business_trips-page_main-content_table-item\");\n                const itemName = itemRow.querySelector(\".business_trips-name\");\n                const itemStatus = itemRow.querySelector(\".business_trips-page_main-content_table-item-section_status\");\n                const itemStart = itemRow.querySelector(\".business_trips-start\");\n                const itemEnd = itemRow.querySelector(\".business_trips-end\");\n                const [startDay, startMonth, startYear] = item.start_date ? item.start_date.split(\".\") : [\"\", \"\", \"\"];\n                const [endDay, endMonth, endYear] = item.end_date ? item.end_date.split(\".\") : [\"\", \"\", \"\"];\n                itemName.textContent = item.name;\n                itemStatus.textContent = item.status;\n                itemStart.textContent = `${startDay} ${monthReference[startMonth.replace(\"0\", \"\")].toLowerCase()}, ${startYear}г., ${item.start_date_obj.hours}:${item.start_date_obj.minutes.toString().length \u003c 2 ? \"0\" + item.start_date_obj.minutes.toString() : item.start_date_obj.minutes.toString()} `;\n                itemEnd.textContent = `${endDay} ${monthReference[endMonth.replace(\"0\", \"\")].toLowerCase()}, ${endYear}г., ${item.end_date_obj.hours}:${item.end_date_obj.minutes.toString().length \u003c 2 ? \"0\" + item.end_date_obj.minutes.toString() : item.end_date_obj.minutes.toString()} `;\n                itemRow.href = item.link;\n                return itemRow;\n            }\n            ;\n            getPaginatorTemplate(data) {\n                const mockContainer = document.createElement(\"div\");\n                data.forEach(item =\u003e {\n                    const newRow = this.getItemRow(item);\n                    mockContainer.append(newRow);\n                });\n                return mockContainer.innerHTML;\n            }\n            ;\n            renderPaginator() {\n                if (!Context.data.first_render) {\n                    $('.business_trips-page_main-content_paginator').pagination(\"destroy\");\n                }\n                ;\n                const getPaginatorTemplate = this.getPaginatorTemplate.bind(domManager);\n                $('.business_trips-page_main-content_paginator').pagination({\n                    dataSource,\n                    callback: function (data, pagination) {\n                        const html = getPaginatorTemplate(data);\n                        $('.business_trips-page_main-content_table-content').html(html);\n                    },\n                    ulClassName: \"content_paginator\",\n                    prevClassName: \"paginator-item\",\n                    nextClassName: \"paginator-item\",\n                    pageClassName: \"paginator-item\",\n                    pageRange: 1,\n                    hideLastOnEllipsisShow: true,\n                    hideFirstOnEllipsisShow: true,\n                });\n            }\n            ;\n        }\n        ;\n        const calendarObject = {\n            options: {\n                actions: {\n                    clickDay(event, self) {\n                        setDate(event);\n                    }\n                },\n                settings: {\n                    lang: \"ru-RU\"\n                }\n            },\n            checkComponents() {\n                return !!(document.querySelector(\".business_trips_start-calendar\") \u0026\u0026\n                    document.querySelector(\".business_trips_end-calendar\"));\n            },\n            setCalendars() {\n                const businessTripsStartCalendar = new VanillaCalendar(\".business_trips_start-calendar\", this.options);\n                const businessTripsEndCalendar = new VanillaCalendar(\".business_trips_end-calendar\", this.options);\n                [businessTripsStartCalendar, businessTripsEndCalendar].forEach(calendar =\u003e calendar.init());\n            }\n        };\n        const monthReference = {\n            \"1\": \"Января\",\n            \"2\": \"Февраля\",\n            \"3\": \"Марта\",\n            \"4\": \"Апреля\",\n            \"5\": \"Мая\",\n            \"6\": \"Июня\",\n            \"7\": \"Июля\",\n            \"8\": \"Августа\",\n            \"9\": \"Сентября\",\n            \"10\": \"Октября\",\n            \"11\": \"Ноября\",\n            \"12\": \"Декабря\"\n        };\n        const domManager = new DomManager();\n        const systemDataManager = new SystemDataManager();\n        const dateRegex = /^([120]{1}[0-9]{1}|3[01]{1,2}|0[1-9])\\.(1[0-2]|0[1-9])\\.\\d{4}/;\n        const businessTripsFilterClosure = (f, g) =\u003e {\n            const filters = [f.__deletedAt.eq(null)];\n            const businessTripsFilters = window.localStorage.business_trips_filters ? JSON.parse(window.localStorage.getItem(\"business_trips_filters\")) : {};\n            if (Object.keys(businessTripsFilters).length \u003e 0) {\n                if (businessTripsFilters.name) {\n                    filters.push(f.__name.like(businessTripsFilters.name));\n                }\n                ;\n                if (businessTripsFilters.start_date) {\n                    const startDate = new Datetime(businessTripsFilters.start_date, \"'DD.MM.YYYY'\");\n                    filters.push(f.start_date.gte(startDate));\n                }\n                ;\n                if (businessTripsFilters.end_date) {\n                    const endDate = new Datetime(businessTripsFilters.end_date, \"'DD.MM.YYYY'\");\n                    filters.push(f.start_date.gte(endDate));\n                }\n                ;\n                if (businessTripsFilters.staff_id) {\n                    const staffRef = {\n                        namespace: \"kedo\",\n                        code: \"staff\",\n                        id: businessTripsFilters.staff_id\n                    };\n                    filters.push(f.kedo_staff.link(staffRef));\n                }\n                else {\n                    filters.push(f.kedo_staff.link(systemDataManager.currentStaff));\n                }\n            }\n            else {\n                filters.push(f.kedo_staff.link(systemDataManager.currentStaff));\n            }\n            ;\n            return g.and(...filters);\n        };\n        let dataSource = [];\n        function handleIssueDropdownModal(target) {\n            console.log(`modal`);\n            const dropdown = document.querySelector(\".bt.common-content_title_search-extend\");\n            let modal;\n            if (target.classList.contains(\"dropdown-modal\")) {\n                modal = target;\n            }\n            else {\n                modal = document.querySelector(\".bt.dropdown-modal\");\n            }\n            ;\n            dropdown.classList.toggle(\"expanded\");\n            modal.classList.toggle(\"hidden\");\n        }\n        ;\n        function clearFilters() {\n            window.localStorage.removeItem(\"business_trips_filters\");\n            const allInputs = document.querySelectorAll(\".business_trips-page_main-content_title_search-extend input\");\n            allInputs.forEach((input) =\u003e {\n                input.value = \"\";\n            });\n        }\n        ;\n        function setFilterField(filterType, filterValue) {\n            const filterObject = window.localStorage.getItem(\"business_trips_filters\") ? JSON.parse(window.localStorage.getItem(\"business_trips_filters\")) : {};\n            filterObject[filterType] = filterValue;\n            window.localStorage.setItem(\"business_trips_filters\", JSON.stringify(filterObject));\n        }\n        ;\n        async function handleMainSearch(event) {\n            if (event.type === \"keypress\") {\n                domManager.handleLoader(LoaderType.BUSINESS_TRIPS_CONTAINER);\n                await getBusinessTrips();\n                domManager.serializeObjData();\n                domManager.renderPaginator();\n                domManager.handleLoader(LoaderType.BUSINESS_TRIPS_CONTAINER);\n                tableIsEmpty();\n                return;\n            }\n            ;\n            setFilterField(FilterType.NAME, event.target.value);\n            const nameInput = document.querySelector(\".business_trips-page_main-content_title_search-extend_input[data-filter=name]\");\n            nameInput.value = event.target.value;\n        }\n        ;\n        function setDate(event) {\n            const [year, month, day] = [...event.target.dataset.calendarDay.split(\"-\")];\n            const dateString = `${day}.${month}.${year}`;\n            const calendarInput = event.target.closest(\".task-search-date\").querySelector(\"input\");\n            const calendarArrow = event.target.closest(\".task-search-date\").querySelector(\".business_trips-page_main-content_title_search-extend_input-date-arrow\");\n            const closestCalendar = event.target.closest(\".vanilla-calendar\");\n            const filterType = calendarInput.dataset.filter;\n            calendarArrow.style.transform = \"\";\n            calendarInput.value = dateString;\n            closestCalendar.classList.toggle(\"hidden\");\n            setFilterField(filterType, dateString);\n        }\n        ;\n        async function expandSearch(target) {\n            let expandSearchContainer;\n            let expandModal = document.querySelector(\".dropdown-modal\");\n            if (Array.from(target.classList).some((cls) =\u003e cls.includes(\"common-content_title_search-extend_title-img\"))) {\n                expandSearchContainer = target.parentElement.parentElement;\n            }\n            else if (target.classList.contains(\"business_trips-search\")) {\n                domManager.handleLoader(LoaderType.BUSINESS_TRIPS_CONTAINER);\n                await getBusinessTrips();\n                domManager.serializeObjData();\n                domManager.renderPaginator();\n                expandSearchContainer = target.closest(\".business_trips-page_main-content_title_search-extend\");\n                tableIsEmpty();\n                domManager.handleLoader(LoaderType.BUSINESS_TRIPS_CONTAINER);\n            }\n            else {\n                expandSearchContainer = target.nextElementSibling;\n            }\n            ;\n            expandSearchContainer.classList.toggle(\"expanded\");\n            expandModal.classList.toggle(\"hidden\");\n            console.log(expandModal.classList);\n        }\n        ;\n        function expandCalendar(target) {\n            target.style.transform = target.style.transform\n                ? \"\"\n                : \"rotateZ(180deg)\";\n            const calendar = target.parentElement.nextElementSibling;\n            calendar.classList.toggle(\"hidden\");\n        }\n        ;\n        function checkAndSetDate(target) {\n            if (!target.value || target.value.length \u003c 1) {\n                return;\n            }\n            ;\n            if (target.value.match(dateRegex)) {\n                const filterType = target.dataset.filter;\n                setFilterField(filterType, target.value);\n            }\n            ;\n        }\n        ;\n        function searchStatusExpand(target) {\n            let expandContainer;\n            if (!target.classList.contains(\"input-status-values_item\")) {\n                expandContainer = target.parentElement.nextElementSibling;\n                if (expandContainer.classList.contains(\"expanded\")) {\n                    target.style.transform = \"rotateZ(0)\";\n                }\n                else {\n                    target.style.transform = \"rotateZ(180deg)\";\n                }\n                ;\n            }\n            else {\n                expandContainer = target.parentElement;\n                const arrow = expandContainer.parentElement.querySelector(\".common-content_title_search-extend_input-status-arrow\");\n                arrow.style.transform = 'rotateZ(0)';\n            }\n            ;\n            expandContainer.classList.toggle(\"expanded\");\n        }\n        ;\n        function handleStaffSearch(target) {\n            const staffValues = target.parentElement.nextElementSibling;\n            if (!staffValues.classList.contains(\"expanded\") || !target.value || target.value.length \u003c 1) {\n                staffValues.classList.toggle(\"expanded\");\n            }\n            ;\n            const staffItems = staffValues.querySelectorAll(\".search-item\");\n            staffItems.forEach((item) =\u003e {\n                if (!item.textContent.toLowerCase().includes(target.value.toLowerCase()) \u0026\u0026 !item.classList.contains(\"hidden\")) {\n                    item.classList.toggle(\"hidden\");\n                }\n                else if (item.textContent.toLowerCase().includes(target.value.toLowerCase()) \u0026\u0026 item.classList.contains(\"hidden\")) {\n                    item.classList.toggle(\"hidden\");\n                }\n                ;\n            });\n        }\n        ;\n        function handleStaffChoice(target) {\n            const staffInput = target.parentElement.previousElementSibling.querySelector(\"input\");\n            staffInput.value = target.textContent.trim();\n            staffInput.dataset.staff_id = target.dataset.staff_id;\n            searchStatusExpand(target);\n            setFilterField(FilterType.STAFF_ID, target.dataset.staff_id);\n        }\n        ;\n        function tableIsEmpty() {\n            if (systemDataManager.allBusinessTrips.length \u003c 1) {\n                domManager.emptyTemplate.classList.remove(\"hidden\");\n                domManager.businessTripContainer.classList.add(\"hidden\");\n                domManager.paginatorNode.classList.add(\"hidden\");\n                return true;\n            }\n            else if (systemDataManager.allBusinessTrips.length) {\n                domManager.emptyTemplate.classList.add(\"hidden\");\n                domManager.businessTripContainer.classList.remove(\"hidden\");\n                domManager.paginatorNode.classList.remove(\"hidden\");\n                return false;\n            }\n            ;\n        }\n        ;\n        async function onInit() {\n            const waitForPaginator = window.setInterval(() =\u003e {\n                if (!$.pagination) {\n                    return;\n                }\n                ;\n                window.clearInterval(waitForPaginator);\n                const mainInput = document.querySelector(\".business_trips-page_main-content_title_search-input\");\n                domManager.templateToRender = document.querySelector(\".business_trips-page_main-content_table-item_template\");\n                domManager.paginatorNode = document.querySelector(\".business_trips-page_main-content_paginator\");\n                domManager.businessTripContainer = document.querySelector(\".business_trips-page_main-content_table\");\n                domManager.emptyTemplate = document.querySelector(\".business_trips-page_main-content_table-empty\");\n                mainInput.addEventListener(\"input\", (e) =\u003e {\n                    handleMainSearch(e);\n                });\n                mainInput.addEventListener(\"keypress\", (e) =\u003e {\n                    if ((e.keyCode === 13 || e.keyCode === 76)) {\n                        handleMainSearch(e);\n                    }\n                    ;\n                });\n                init().then(_ =\u003e {\n                    Context.data.first_render = false;\n                });\n            }, 300);\n        }\n        ;\n        async function init() {\n            window.localStorage.removeItem(\"business_trips_filters\");\n            const currentUser = await System.users.getCurrentUser();\n            const currentStaff = await Context.fields.staff_app.app.search().where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.ext_user.eq(currentUser))).first();\n            if (!currentStaff) {\n                return;\n            }\n            ;\n            systemDataManager.currentStaff = currentStaff;\n            await getData();\n            domManager.renderStaff();\n            calendarObject.setCalendars();\n        }\n        ;\n        async function getBusinessTrips() {\n            const businessTripsCount = await Context.fields.all_business_trips.app.search().where(businessTripsFilterClosure).count();\n            systemDataManager.allBusinessTrips = await Context.fields.all_business_trips.app.search().where(businessTripsFilterClosure).size(businessTripsCount).all();\n        }\n        ;\n        async function getData() {\n            await getBusinessTrips();\n            if (tableIsEmpty()) {\n                return;\n            }\n            ;\n            const [staffCount, employmentPlacementsCount, statusesCount] = await Promise.all([\n                Context.fields.staff_app.app.search().where(f =\u003e f.__deletedAt.eq(null)).count(),\n                Context.fields.staff_app.app.fields.employment_table.fields.employment_placement_app.app.search().where(f =\u003e f.__deletedAt.eq(null)).count(),\n                Context.fields.all_statuses.app.search().where(f =\u003e f.__deletedAt.eq(null)).count()\n            ]);\n            [\n                systemDataManager.allStaff,\n                systemDataManager.allEmploymentPlacements,\n                systemDataManager.statuses\n            ] = await Promise.all([\n                Context.fields.staff_app.app.search().where(f =\u003e f.__deletedAt.eq(null)).size(staffCount).all(),\n                Context.fields.staff_app.app.fields.employment_table.fields.employment_placement_app.app.search().where(f =\u003e f.__deletedAt.eq(null)).size(employmentPlacementsCount).all(),\n                Context.fields.all_statuses.app.search().where(f =\u003e f.__deletedAt.eq(null)).size(statusesCount).all()\n            ]);\n            domManager.serializeObjData();\n            domManager.renderPaginator();\n        }\n        ;\n        return {\n            handleIssueDropdownModal,\n            clearFilters,\n            setFilterField,\n            handleMainSearch,\n            setDate,\n            expandSearch,\n            expandCalendar,\n            checkAndSetDate,\n            searchStatusExpand,\n            handleStaffSearch,\n            handleStaffChoice,\n            tableIsEmpty,\n            onInit,\n            init,\n            getBusinessTrips,\n            getData\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n",
    "clientFnDeclarations": [
      {
        "name": "handleIssueDropdownModal",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          }
        ],
        "type": ""
      },
      {
        "name": "clearFilters",
        "parameters": [],
        "type": ""
      },
      {
        "name": "setFilterField",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          },
          {
            "name": "[object Object]",
            "type": "[object Object]"
          }
        ],
        "type": ""
      },
      {
        "name": "handleMainSearch",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          }
        ],
        "type": ""
      },
      {
        "name": "setDate",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          }
        ],
        "type": ""
      },
      {
        "name": "expandSearch",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          }
        ],
        "type": ""
      },
      {
        "name": "expandCalendar",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          }
        ],
        "type": ""
      },
      {
        "name": "checkAndSetDate",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          }
        ],
        "type": ""
      },
      {
        "name": "searchStatusExpand",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          }
        ],
        "type": ""
      },
      {
        "name": "handleStaffSearch",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          }
        ],
        "type": ""
      },
      {
        "name": "handleStaffChoice",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          }
        ],
        "type": ""
      },
      {
        "name": "tableIsEmpty",
        "parameters": [],
        "type": "[object Object]"
      },
      {
        "name": "onInit",
        "parameters": [],
        "type": "[object Object]"
      },
      {
        "name": "init",
        "parameters": [],
        "type": "[object Object]"
      },
      {
        "name": "getBusinessTrips",
        "parameters": [],
        "type": "[object Object]"
      },
      {
        "name": "getData",
        "parameters": [],
        "type": "[object Object]"
      }
    ],
    "serverScripts": "async function getItemsFromApi(ns, code, staffFilter = false) {\n    const baseUrl = System.getBaseUrl();\n    const token = Context.data.token;\n    if (!token) {\n        Context.data.error = \"no token\";\n        return;\n    }\n    ;\n    const testResponse = await fetch(`${baseUrl}/pub/v1/app/${ns}/${code}/list`, {\n        method: \"POST\",\n        headers: {\n            \"Authorization\": `Bearer ${token}`\n        },\n        body: JSON.stringify({\n            active: true\n        })\n    });\n    if (!testResponse.ok) {\n        Context.data.error = \"error at check: \" + await testResponse.text();\n        return;\n    }\n    ;\n    const allItems = [];\n    let searchFulfilled = false;\n    let itemsCount = 0;\n    while (!searchFulfilled) {\n        let body = {\n            active: true,\n            from: itemsCount,\n            size: 100\n        };\n        if (staffFilter) {\n            body.filter = {\n                link: [\n                    { field: \"kedo_staff\" },\n                    { list: [Context.data.staff_app.id] }\n                ]\n            };\n        }\n        const response = await fetch(`${baseUrl}/pub/v1/app/${ns}/${code}/list`, {\n            method: \"POST\",\n            headers: {\n                Authorization: `Bearer ${token}`\n            },\n            body: JSON.stringify(body)\n        });\n        if (!response.ok) {\n            Context.data.error = \"error at cycle: \" + await response.text();\n            break;\n        }\n        ;\n        const respJson = await response.json();\n        const result = respJson.result.result;\n        if (result.length \u003c 1) {\n            searchFulfilled = true;\n            break;\n        }\n        ;\n        if (itemsCount \u003c respJson.result.total) {\n            itemsCount += result.length;\n        }\n        else {\n            searchFulfilled = true;\n            break;\n        }\n        ;\n        if (staffFilter) {\n            allItems.push(result);\n        }\n        else {\n            allItems.push(result.map((item) =\u003e {\n                return {\n                    id: item.__id,\n                    name: item.__name\n                };\n            }));\n        }\n    }\n    ;\n    return allItems;\n}\n;\nasync function getOvertimeWork() {\n    const allItems = await getItemsFromApi(\"time_tracking\", \"overtime_work\", true);\n    if (allItems) {\n        Context.data.debug = JSON.stringify([].concat.apply([], allItems));\n        Context.data.overtime_work_json = JSON.stringify([].concat.apply([], allItems).map((item) =\u003e {\n            var _a;\n            return {\n                id: item.__id,\n                code: \"overtime_work\",\n                namespace: \"time_tracking\",\n                data: {\n                    kedo_status: item.kedo_status ? {\n                        id: item.kedo_status[0]\n                    } : undefined,\n                    __name: item.__name,\n                    __createdAt: item.__createdAt,\n                    start_date: item.start_date,\n                    date: item.date,\n                    start_date_string: (_a = item.start_date_string) !== null \u0026\u0026 _a !== void 0 ? _a : undefined,\n                    kedo_staff: item.kedo_staff ? {\n                        id: item.kedo_staff[0]\n                    } : undefined,\n                    work_type: item.overtime_type ? item.overtime_type[0].name : \"Работа в нерабочее время\"\n                }\n            };\n        }));\n    }\n    ;\n}\n;\nasync function getCities() {\n    const allCities = await getItemsFromApi(\"business_trips\", \"goroda\");\n    if (allCities) {\n        Context.data.cities_json = JSON.stringify([].concat.apply([], allCities));\n    }\n    ;\n}\n;\nasync function setUserAvatar() {\n    const user = await System.users.getCurrentUser();\n    const newImg = await user.fields.avatar.create(\"avatar.jpg\", base64ToArrayBuffer(Context.data.avatar_base64));\n    user.data.avatar = newImg;\n    await user.save();\n}\n;\nfunction base64ToArrayBuffer(base64) {\n    let binaryString = atob(base64);\n    let bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i \u003c binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    ;\n    return bytes.buffer;\n}\n;\n",
    "serverFnDeclarations": [
      {
        "name": "getItemsFromApi",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          },
          {
            "name": "[object Object]",
            "type": "[object Object]"
          },
          {
            "name": "[object Object]",
            "type": ""
          }
        ],
        "type": "[object Object]"
      },
      {
        "name": "getOvertimeWork",
        "parameters": [],
        "type": "[object Object]"
      },
      {
        "name": "getCities",
        "parameters": [],
        "type": "[object Object]"
      },
      {
        "name": "setUserAvatar",
        "parameters": [],
        "type": "[object Object]"
      },
      {
        "name": "base64ToArrayBuffer",
        "parameters": [
          {
            "name": "[object Object]",
            "type": "[object Object]"
          }
        ],
        "type": "[object Object]"
      }
    ]
  },
  "__createdAt": "2024-06-04T12:06:12.649624291Z",
  "__createdBy": "7e61e9a9-edda-49a3-baa2-87b36c4fbb6c",
  "__updatedAt": "2024-06-06T14:11:07.11323053Z",
  "__updatedBy": "7e61e9a9-edda-49a3-baa2-87b36c4fbb6c",
  "__deletedAt": null
}
