{"__id":"018fe29e-25dd-7325-9910-ba118089de0c","namespace":"kedo_ext","code":"my_documents_widget","__name":"Мои документы","description":"","extensionZoneCode":"","sort":0,"category":"00000000-0000-0000-0000-000000000000","version":1,"hidden":false,"draft":false,"readonly":false,"descriptor":{"template":{"id":"1d5069e0-8417-4b27-a449-fa906fd2d9f5","descriptor":"component","values":{"systemFunctions":{}},"content":{"":[{"id":"f790cfb5-357f-4dcc-a028-54d84f3f4784","descriptor":"code","values":{"contentPlaceholder":"HTML","html":"\u003cdiv class=\"kedo__main-documents-content\"\u003e\n\n\n  \u003cdiv class=\"kedo__main-documents-files-wrapper\"\u003e   \n    \u003cdiv class=\"kedo-loader-docs-wrapper\"\u003e\n      \u003cdiv class=\"kedo-loader-img\"\u003e\u003c/div\u003e\n    \u003c/div\u003e\n     \n    \u003ch3 class=\"kedo__main-documents-title\"\u003eМои Документы\u003c/h3\u003e\n    \u003csection class=\"kedo-docs-search kedo-docs-search_hidden\"\u003e\n        \u003cform action=\"#\" name=\"kedoSearchMainForm\" class=\"kedo-docs-search__form-main\" novalidate\u003e\n    \n            \u003cinput type=\"text\" name=\"kedoSearchMainText\" placeholder=\"Поиск по моим документам\"\n                class=\"kedo-docs-search__form-main-text\" id=\"mainSearchInput\"\n                required minlength=\"2\" maxlength=\"60\"\u003e\n            \u003cbutton type=\"button\" class=\"kedo-docs-search__form-main-btn-clear kedo-docs-search__form-main-btn-clear_hidden\"\u003e\n                \u003csvg width=\"8\" height=\"8\" viewBox=\"0 0 8 8\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                    \u003cpath d=\"M4.86545 4.25006L7.39014 1.72537C7.53615 1.57936 7.53615 1.3424 7.39014 1.19615L6.8035 0.609512C6.65748 0.463496 6.42053 0.463496 6.27428 0.609512L3.74982 3.13443L1.22514 0.609746C1.07912 0.463731 0.842168 0.463731 0.695918 0.609746L0.109512 1.19615C-0.0365039 1.34217 -0.0365039 1.57912 0.109512 1.72537L2.6342 4.25006L0.109512 6.77475C-0.0365039 6.92076 -0.0365039 7.15771 0.109512 7.30396L0.696152 7.8906C0.842168 8.03662 1.07912 8.03662 1.22537 7.8906L3.74982 5.36568L6.27451 7.89037C6.42053 8.03639 6.65748 8.03639 6.80373 7.89037L7.39037 7.30373C7.53639 7.15772 7.53639 6.92076 7.39037 6.77451L4.86545 4.25006Z\" fill=\"#1E6599\"/\u003e\n                \u003c/svg\u003e\n            \u003c/button\u003e\n            \u003cbutton type=\"button\" class=\"kedo-docs-search__form-main-button\"\u003e\n                \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\n                    \u003cpath\n                        d=\"M14.4985 0H1.50178C0.169343 0 -0.502939 1.61659 0.441124 2.56065L5.5 7.62131V13C5.5 13.4721 5.72228 13.9167 6.1 14.25L8.1 15.7208C9.07728 16.4038 10.5 15.7689 10.5 14.5208V7.62131L15.5592 2.56065C16.5013 1.6185 15.8336 0 14.4985 0ZM9 7V14.5L7 13V7L1.5 1.5H14.5L9 7Z\"\n                        fill=\"#1E6599\" /\u003e\n                \u003c/svg\u003e\n            \u003c/button\u003e\n        \u003c/form\u003e\n        \u003cform action=\"#\" name=\"kedoSearchFilterForm\" class=\"kedo-docs-search__form-filter\" novalidate\u003e\n            \u003cdiv class=\"kedo-docs-search__form-filter-wrapper\"\u003e\n                \u003cdiv class=\"kedo-docs-search__form-filter-string\"\u003e\n                    \u003clabel class=\"kedo-docs-search__form-filter-label kedo-docs-search__form-filter-string-column kedo-docs-search__form-filter-string-column_left\" for=\"filterSearchInput\"\u003eНазвание документа\u003c/label\u003e\n                    \u003cinput type=\"text\" name=\"kedoSearchFilterText\"\n                        class=\"kedo-docs-search__form-filter-text kedo-docs-search__form-filter-string-column kedo-docs-search__form-filter-string-column_right\" id=\"filterSearchInput\" minlength=\"2\" maxlength=\"60\"\u003e\n                \u003c/div\u003e\n\n                \u003cdiv class=\"kedo-docs-search__form-filter-string\"\u003e\n                    \u003clabel class=\"kedo-docs-search__form-filter-label kedo-docs-search__form-filter-string-column kedo-docs-search__form-filter-string-column_left\" for=\"\"\u003eДата создания\u003c/label\u003e\n                    \u003cdiv class=\"kedo-docs-search__form-filter-dates-string kedo-docs-search__form-filter-string-column kedo-docs-search__form-filter-string-column_right\"\u003e\n                        \u003c%= UI.widget.contextValue(\"filter_date_start\", {required: false, onChange: () =\u003e Scripts.onInputHandler()}) %\u003e\n                        \u003cp class=\"kedo-docs-search__form-filter-dates-separator\"\u003e-\u003c/p\u003e\n                        \u003c%= UI.widget.contextValue(\"filter_date_end\", {required: false, onChange: () =\u003e Scripts.onInputHandler()}) %\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \n                \u003cdiv class=\"kedo-docs-search__form-filter-string\"\u003e\n                    \u003clabel\n                        class=\"kedo-docs-search__form-filter-label kedo-docs-search__form-filter-string-column kedo-docs-search__form-filter-string-column_left\"\n                        for=\"\"\u003eСтатус\u003c/label\u003e\n                    \u003cselect id=\"cars\" name=\"cars\" class=\"kedo-docs-search__form-filter-status-select-string kedo-docs-search__form-filter-string-column kedo-docs-search__form-filter-string-column_right\"\u003e\n                        \u003coption value=\"any\" selected\u003eЛюбой статус\u003c/option\u003e\n                        \u003coption value=\"signing\"\u003eНа подписании\u003c/option\u003e\n                        \u003coption value=\"agrement\"\u003eНа согласовании\u003c/option\u003e\n                        \u003coption value=\"signed\"\u003eПодписан\u003c/option\u003e\n                        \u003coption value=\"new\"\u003eНовый\u003c/option\u003e\n                        \u003coption value=\"removed\"\u003eОтменён\u003c/option\u003e\n                    \u003c/select\u003e\n                \u003c/div\u003e\n            \n                \u003cbutton type=\"submit\" class=\"kedo-docs-search__form-filter-button\" disabled\u003e\n                    Поиск\n                \u003c/button\u003e\n            \u003c/div\u003e\n        \u003c/form\u003e\n    \u003c/section\u003e\n    \u003ch5 class=\"kedo__main-documents-title-sub\"\u003eЗадачи\u003c/h5\u003e\n    \u003cdiv class=\"kedo__main-documents-table-head kedo__main-documents-table-head_actions\"\u003e\n      \u003cdiv class=\"kedo__main-documents-table-head-name-wrapper\"\u003e\n        \u003c!-- \u003cdiv class=\"kedo__main-documents-table-head-ellips-wrapper\"\u003e\n          \u003cdiv class=\"kedo__main-documents-table-head-ellips\"\u003e\u003c/div\u003e\n        \u003c/div\u003e --\u003e\n        \u003cp class=\"kedo__main-documents-table-head-text\"\u003eНазвание документа\u003c/p\u003e\n      \u003c/div\u003e\n      \u003cp class=\"kedo__main-documents-table-head-text\"\u003eСделать до\u003c/p\u003e\n      \u003cp class=\"kedo__main-documents-table-head-text kedo__main-documents-table-head-text_responsible\"\u003eОтветственный\u003c/p\u003e\n      \u003cdiv class=\"kedo__main-documents-table-head-status-wrapper\"\u003e\n        \u003cp class=\"kedo__main-documents-table-head-text\"\u003eСтатус\u003c/p\u003e\n        \u003cdiv class=\"kedo__main-documents-table-head-status-arrow\"\u003e\u003c/div\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n    \u003cdiv class=\"kedo__main-documents-table-section kedo__main-documents-table-section_actions\"\u003e\n      \u003cdiv class=\"kedo__main-documents-table-section-title-wrapper kedo__main-documents-table-section-title-wrapper_action kedo__main-documents-table-section-title-wrapper_hidden\"\u003e\n        \u003cp class=\"kedo__main-documents-table-section-title kedo__main-documents-table-section-title_action\"\u003eВ данный момент у вас нет документов, требующих действия\u003c/p\u003e\n        \u003c!-- \u003cdiv class=\"kedo__main-documents-table-section-title-arrow\"\u003e\u003c/div\u003e --\u003e\n      \u003c/div\u003e\n      \u003cul class=\"kedo__main-documents-table-section-list kedo__main-documents-table-section-list_actions\"\u003e\n      \u003c/ul\u003e\n    \u003c/div\u003e\n\n    \u003ch5 class=\"kedo__main-documents-title-sub\"\u003eДокументы\u003c/h5\u003e\n    \u003c!-- \u003cdiv class=\"kedo__main-documents-table-head kedo__main-documents-table-head_docs\"\u003e\n      \u003cdiv class=\"kedo__main-documents-table-head-name-wrapper\"\u003e\n        \u003cdiv class=\"kedo__main-documents-table-head-ellips-wrapper\"\u003e\n          \u003cdiv class=\"kedo__main-documents-table-head-ellips\"\u003e\u003c/div\u003e\n        \u003c/div\u003e\n        \u003cp class=\"kedo__main-documents-table-head-text\"\u003eНазвание документа\u003c/p\u003e\n      \u003c/div\u003e\n      \u003cp class=\"kedo__main-documents-table-head-text\"\u003eДата\u003c/p\u003e\n      \u003cp class=\"kedo__main-documents-table-head-text\"\u003eОтветственный\u003c/p\u003e\n      \u003cdiv class=\"kedo__main-documents-table-head-status-wrapper\"\u003e\n        \u003cp class=\"kedo__main-documents-table-head-text\"\u003eСтатус\u003c/p\u003e\n        \u003cdiv class=\"kedo__main-documents-table-head-status-arrow\"\u003e\u003c/div\u003e\n      \u003c/div\u003e --\u003e\n    \u003c/div\u003e\n    \n    \u003cdiv class=\"kedo__main-documents-table-section kedo__main-documents-table-section_today\"\u003e\n      \u003cdiv class=\"kedo__main-documents-table-section-title-wrapper\"\u003e\n        \u003cp class=\"kedo__main-documents-table-section-title\"\u003eСегодня\u003c/p\u003e\n        \u003cdiv class=\"kedo__main-documents-table-section-title-arrow\"\u003e\u003c/div\u003e\n      \u003c/div\u003e\n      \u003cul class=\"kedo__main-documents-table-section-list kedo__main-documents-table-section-list_today\"\u003e\n      \u003c/ul\u003e\n    \u003c/div\u003e\n    \u003cdiv class=\"kedo__main-documents-table-section kedo__main-documents-table-section_week\"\u003e\n      \u003cdiv class=\"kedo__main-documents-table-section-title-wrapper\"\u003e\n        \u003cp class=\"kedo__main-documents-table-section-title\"\u003eЗа последние 7 дней\u003c/p\u003e\n        \u003cdiv class=\"kedo__main-documents-table-section-title-arrow\"\u003e\u003c/div\u003e\n      \u003c/div\u003e\n      \u003cul class=\"kedo__main-documents-table-section-list kedo__main-documents-table-section-list_week\"\u003e\n      \u003c/ul\u003e\n    \u003c/div\u003e\n    \u003cdiv class=\"kedo__main-documents-table-section kedo__main-documents-table-section_month\"\u003e\n      \u003cdiv class=\"kedo__main-documents-table-section-title-wrapper\"\u003e\n        \u003cp class=\"kedo__main-documents-table-section-title\"\u003eЗа последний месяц\u003c/p\u003e\n        \u003cdiv class=\"kedo__main-documents-table-section-title-arrow\"\u003e\u003c/div\u003e\n      \u003c/div\u003e\n      \u003cul class=\"kedo__main-documents-table-section-list kedo__main-documents-table-section-list_month\"\u003e\n      \u003c/ul\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\n\n\u003ctemplate class=\"kedo__main-documents-table-section-list-item-template\"\u003e\n  \u003cli class=\"kedo__main-documents-table-section-list-item\"\u003e\n    \u003cdiv class=\"kedo__main-documents-table-string-file-name-wrapper\"\u003e\n      \u003c!-- \u003cdiv class=\"kedo__main-documents-table-string-ellips-wrapper\"\u003e\n        \u003cdiv class=\"kedo__main-documents-table-string-ellips\"\u003e\u003c/div\u003e\n      \u003c/div\u003e --\u003e\n      \u003cdiv class=\"kedo__main-documents-table-string-file-name-img doc-img\"\u003e\u003c/div\u003e\n      \u003ca href=\"\" class=\"kedo__main-documents-table-string-file-name\"\u003e\u003c/a\u003e\n    \u003c/div\u003e\n    \u003cp class=\"kedo__main-documents-table-string-date\"\u003e\u003c/p\u003e\n    \u003c!-- \u003cdiv class=\"kedo__main-documents-table-string-user-name-wrapper\"\u003e\n      \u003cspan class=\"kedo__main-documents-table-string-user-name-span\"\u003eОтветственный:\u0026nbsp;\u003c/span\u003e\n      \u003cp class=\"kedo__main-documents-table-string-user-name\"\u003e\u003c/p\u003e\n    \u003c/div\u003e --\u003e\n    \u003cdiv class=\"kedo__main-documents-table-string-status-wrapper\"\u003e\n      \u003cp class=\"kedo__main-documents-table-string-status\"\u003e\u003c/p\u003e  \n    \u003c/div\u003e\n  \u003c/li\u003e\n\u003c/template\u003e\n","hideContent":true}},{"id":"4780a557-7d06-40ab-84e3-b031d6770705","descriptor":"code","values":{"hideContent":true,"contentPlaceholder":"CSS","html":"\n\u003cstyle\u003e\n.doc_img-null {\n  background: url(\"data:image/svg+xml,%3Csvg width='14' height='16' viewBox='0 0 18 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17.3391 4.58905L13.4062 0.656238C12.9844 0.234363 12.4125 -0.00469971 11.8172 -0.00469971H2.25C1.00781 -1.22068e-05 0 1.0078 0 2.24999V21.75C0 22.9922 1.00781 24 2.25 24H15.75C16.9922 24 18 22.9922 18 21.75V6.1828C18 5.58749 17.7609 5.01093 17.3391 4.58905ZM16.2797 5.65311C16.3781 5.75155 16.4438 5.86874 16.4766 5.99999H12V1.52343C12.1313 1.55624 12.2484 1.62186 12.3469 1.7203L16.2797 5.65311ZM15.75 22.5H2.25C1.8375 22.5 1.5 22.1625 1.5 21.75V2.24999C1.5 1.83749 1.8375 1.49999 2.25 1.49999H10.5V6.37499C10.5 6.99843 11.0016 7.49999 11.625 7.49999H16.5V21.75C16.5 22.1625 16.1625 22.5 15.75 22.5Z' fill='black'/%3E%3C/svg%3E%0A\");\n}\n\n.kedo__main-documents-table-head_docs {\n  grid-template-columns: 3.6fr 1.25fr 0.66fr;\n}\n\n.kedo__main-documents-content {\n  margin-top: 10px;\n  width: 100%;\n  padding: 2.5rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  flex-direction: column;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: stretch;\n      -ms-flex-align: stretch;\n          align-items: stretch;\n  -webkit-box-flex: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -ms-flex-item-align: end;\n      align-self: flex-end;\n  -webkit-transition: 0.5s;\n  -o-transition: 0.5s;\n  transition: 0.5s;\n}\n.kedo__main-documents-content_hidden{\n  opacity: 0;\n}\n.kedo__main-documents-title{\n  font-style: normal;\n  font-weight: 600;\n  font-size: 24px;\n  line-height: 32px;\n}\n.kedo__main-documents-title-sub {\n  font-style: normal;\n  font-weight: 400;\n  font-size: 20px;\n  line-height: 32px;\n}\n.kedo__main-documents-files-wrapper {\n  border-radius: 4px;\n  position: relative;\n}\n.kedo__main-documents-table-head {\n  display: -ms-grid;\n  display: grid;\n  -ms-grid-columns: 3.6fr 0.8fr 1.15fr;\n  grid-template-columns: 3.6fr 0.8fr 1.15fr;\n  gap: 1.2%;\n  border-bottom: 1px solid #CAD1D8;\n  padding: 9px 0;\n}\n.kedo__main-documents-table-head_actions{\n  -ms-grid-columns: 3.6fr 1.18fr 0.8fr;\n  grid-template-columns: 3.6fr 1.18fr 0.8fr;\n}\n.kedo__main-documents-table-head_hidden{\n  display: none;\n}\n.kedo__main-documents-table-head_actions .kedo__main-documents-table-head-text_responsible{\n  display: none;\n}\n.kedo__main-documents-table-head-name-wrapper{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.kedo__main-documents-table-head-ellips-wrapper{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 20px 0 6px;\n}\n.kedo__main-documents-table-head-ellips {\n  width: 7px;\n  height: 7px;\n  border-radius: 50%;\n  background: #CAD1D8;\n}\n.kedo__main-documents-table-head-text {\n  font-style: normal;\n  font-weight: normal;\n  font-size: 14px;\n  line-height: 140%;\n  margin: 0;\n  padding: 0;\n  color: #8C8C8C;\n}\n.kedo__main-documents-table-head-status-wrapper{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.kedo__main-documents-table-head-status-arrow{\n  width: 7px;\n  height: 4px;\n  margin-left: 5px;\n  background: url(data:image/svg+xml;charset=utf-8,%3Csvg%20width%3D%228%22%20height%3D%225%22%20viewBox%3D%220%200%208%205%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20d%3D%22M0.5%201L4%204.5L7.5%201%22%20stroke%3D%22%238C8C8C%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%0A%3C%2Fsvg%3E%0A) no-repeat center / contain;\n}\n.kedo__main-documents-table-section {\n  \n}\n.kedo__main-documents-table-section.kedo__main-documents-table-section_today {\n  padding-top: 0;\n}\n.kedo__main-documents-table-section_hidden {\n  display: none;\n}\n.kedo__main-documents-table-section_actions{\n  margin-bottom: 2.4rem;\n}\n.kedo__main-documents-table-section-title-wrapper {\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-transition: 0.3s;\n  -o-transition: 0.3s;\n  transition: 0.3s;\n}\n.kedo__main-documents-table-section-title-wrapper:hover{\n  cursor: pointer;\n}\n.kedo__main-documents-table-section_empty .kedo__main-documents-table-section-title-wrapper:hover{\n  cursor: auto;\n}\n.kedo__main-documents-table-section-title-wrapper_hidden{\n  display: none;\n}\n.kedo__main-documents-table-section-title-wrapper_action{}\n\n.kedo__main-documents-table-section-title {\n  font-style: normal;\n  font-weight: 400;\n  font-size: 16px;\n  line-height: 140%;\n  color: #323232;\n  margin: 0;\n  padding: 0;\n}\n.kedo__main-documents-table-section-title-wrapper:hover .kedo__main-documents-table-section-title{\n\n}\n.kedo__main-documents-table-section_empty .kedo__main-documents-table-section-title-wrapper:hover .kedo__main-documents-table-section-title{\n  text-decoration: none;\n}\n.kedo__main-documents-table-section-title-arrow {\n  width: 14px;\n  height: 8px;\n  margin-left: 10px;\n  -webkit-transition: 0.5s ease-out;\n  -o-transition: 0.5s ease-out;\n  transition: 0.5s ease-out;\n  -webkit-transform: rotate(0deg);\n      -ms-transform: rotate(0deg);\n          transform: rotate(0deg);\n  background: url(data:image/svg+xml;charset=utf-8,%3Csvg%20width%3D%228%22%20height%3D%225%22%20viewBox%3D%220%200%208%205%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20d%3D%22M0.5%201L4%204.5L7.5%201%22%20stroke%3D%22%23000%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%0A%3C%2Fsvg%3E%0A) no-repeat center / contain;\n}\n\n.kedo__main-documents-table-section_opened .kedo__main-documents-table-section-title-arrow {\n  -webkit-transform: rotate(-180deg);\n      -ms-transform: rotate(-180deg);\n          transform: rotate(-180deg);\n}\n.kedo__main-documents-table-section_empty .kedo__main-documents-table-section-title{\n  color: #8C8C8C;\n}\n.kedo__main-documents-table-section_empty .kedo__main-documents-table-section-title-arrow{\n  display: none;\n}\n.kedo__main-documents-table-section-title_action{\n  font-style: normal;\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 140%;\n  color: #8C8C8C;\n}\n.kedo__main-documents-table-section-list {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: stretch;\n      -ms-flex-align: stretch;\n          align-items: stretch;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  max-height: 0px;\n  -webkit-transition: 0.5s ease-out;\n  -o-transition: 0.5s ease-out;\n  transition: 0.5s ease-out;\n  overflow: hidden;\n}\n.kedo__main-documents-table-section_opened .kedo__main-documents-table-section-list{\n  max-height: 9999px;\n}\n.kedo__main-documents-table-section-list-item {\n  display: -ms-grid;\n  display: grid;\n  -ms-grid-columns: 3.2fr 1.05fr 0.7fr;\n  grid-template-columns: 3.2fr 1.05fr 0.7fr;\n  gap: 1.2%;\n  padding: 16px 0;\n  border-bottom: 1px solid #CAD1D8;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n/*\n.kedo__main-documents-table-section-list-item:first-child {\n  padding: 0;\n}\n*/\n.kedo__main-documents-table-section-list_actions .kedo__main-documents-table-string-user-name-wrapper {\n  display: none;\n}\n\n.kedo__main-documents-table-section-list_actions .kedo__main-documents-table-section-list-item {\n  grid-template-columns: 3.2fr 1.05fr 0.7fr;\n}\n.kedo__main-documents-table-string-file-name-wrapper {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  overflow: hidden;\n  gap: 1rem;\n}\n\n.kedo__main-documents-table-string-ellips-wrapper{\n  display: none;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 20px 0 6px;\n}\n.kedo__main-documents-table-string-ellips {\n  display: none;\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: #1E6599;\n}\n.kedo__main-documents-table-string-file-name-wrapper_active .kedo__main-documents-table-string-ellips-wrapper{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.kedo__main-documents-table-string-file-name-wrapper_active .kedo__main-documents-table-string-ellips{\n  display: block;\n}\n.kedo__main-documents-table-string-file-name-wrapper_active .kedo__main-documents-table-string-file-name-img {\n  display: none;\n}\n.kedo__main-documents-table-string-file-name-img {\n  width: 14px;\n  height: 16px;\n}\n.kedo__main-documents-table-string-file-name {\n  font-style: normal;\n  font-weight: 400;\n  font-size: 16px;\n  line-height: 140%;\n  color: #5082E6;\n  margin: 0;\n  padding: 0;\n  text-decoration: none;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.kedo__main-documents-table-string-file-name:hover {\n  color: #5e93ff;\n  text-decoration: none;\n}\n.kedo__main-documents-table-string-date {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-style: normal;\n  font-weight: normal;\n  font-size: 16px;\n  line-height: 140%;\n  color: #323232;\n  margin: 0;\n  padding: 0;\n}\n.kedo__main-documents-table-string-user-name-wrapper {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin: 0;\n  padding: 0;\n}\n.kedo__main-documents-table-string-user-name-span {\n  display: none;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-style: normal;\n  font-weight: normal;\n  font-size: 14px;\n  line-height: 140%;\n  color: #323232;\n  margin: 0;\n  padding: 0;\n}\n.kedo__main-documents-table-string-user-name {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-style: normal;\n  font-weight: normal;\n  font-size: 14px;\n  line-height: 140%;\n  color: #323232;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n}\n.kedo__main-documents-table-string-status-wrapper{\n  width: 100%;\n\n}\n.kedo__main-documents-table-string-status {\n  font-style: normal;\n  font-weight: normal;\n  font-size: 16px;\n  line-height: 14px;\n  margin: 0;\n  border-radius: 4px;\n  padding: 5px 10px;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 15rem;\n}\n.kedo__main-documents-table-string-status_agrement {\n  color: #5082E6;\n  border: 1px solid #5082E6;\n  background: #5082E61A;\n}\n.kedo__main-documents-table-string-status_cancel {\n  color: #E62D31;\n  background: rgba(230, 45, 49, 0.1);\n  border: 1px solid #E62D31;\n}\n.kedo__main-documents-table-string-status_signed {\n  color: #56B461;\n  background: rgba(86, 180, 97, 0.1);\n  border: 1px solid #56B461;\n}\n.kedo__main-documents-table-string-status_default {\n  color: #8C8C8C;\n  background: rgba(140, 140, 140, 0.1);\n  border: 1px solid #8C8C8C;\n}\n.kedo__main-documents-table-string-status_on-sign {\n  color: #FABE00;\n  background: #FABE001A;\n  border: 1px solid #FABE00;\n}\n.kedo__main-documents-footer {\n  margin-top: auto;\n  min-height: 73px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.kedo__main-documents-footer-text {\n  font-style: normal;\n  font-weight: normal;\n  font-size: 12px;\n  line-height: 140%;\n  color: #D7DEE3;\n}\n\n@media (max-width: 1365px){\n  .kedo__main-documents-content {\n    width: calc(100% - 30px);\n    max-width: calc(100% - 30px);\n    -ms-flex-item-align: center;\n        -ms-grid-row-align: center;\n        align-self: center;\n  }\n  .kedo__main-documents-title{\n    font-style: normal;\n    font-weight: 600;\n    font-size: 24px;\n    line-height: 32px;\n  }\n}\n@media (max-width: 767px){\n  .kedo__main-documents-title-sub {\n    margin: 0;\n  }\n  .kedo__main-documents-table-section-list_actions .kedo__main-documents-table-section-list-item {\n    grid-template-columns: 3fr 1fr 2.1fr;\n  }\n  .kedo__main-documents-table-string-status-wrapper {\n    justify-content: flex-end;\n    grid-column-start: 3;\n    width: 12rem;\n  }\n  .kedo__main-documents-content {\n    margin: 0;\n    padding: 15px 0;\n    margin-bottom: 10rem;\n  }\n  .kedo__main-documents-files-wrapper {\n    background: none;\n  }\n  .kedo__main-documents-files-wrapper{\n    padding: 0;\n  }\n  .kedo__main-documents-table-head{\n    display: none;\n  }\n  .kedo__main-documents-table-section-list-item {\n    display: -ms-grid;\n    display: grid;\n    -ms-grid-columns: 32% 1.3% 32% 1.3% 32%;\n    grid-template-columns: 3fr 1fr 2.1fr;\n    -webkit-column-gap: 1.3%;\n       -moz-column-gap: 1.3%;\n            column-gap: 1.3%;\n    row-gap: 10px;\n    padding: 16px 0;\n    border-bottom: 1px solid #CAD1D8;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n  }\n  .kedo__main-documents-table-section-list-item:first-child {\n    padding: 0;\n  } \n  .kedo__main-documents-table-string-ellips-wrapper{\n    display: none;\n    padding: 0;\n  }\n  .kedo__main-documents-table-string-file-name-wrapper {\n    -ms-grid-column: 1;\n        grid-column-start: 1;\n    -ms-grid-column-span: 2;\n    grid-column-end: 4;\n    -ms-grid-row: 1;\n        grid-row-start: 1;\n    -ms-grid-row-span: 1;\n    grid-row-end: 2;\n    gap: 1rem;\n  }\n  .kedo__main-documents-table-string-file-name-img {\n    width: 14px;\n    height: 16px;\n    display: none;\n  }\n  .kedo__main-documents-table-string-file-name {\n    font-style: normal;\n    font-weight: 600;\n    font-size: 16px;\n    line-height: 140%;\n    color: #323232;\n    margin: 0;\n    padding: 0;\n    word-break: break-word;\n    text-decoration: none;\n    white-space: break-spaces;\n  }\n  .kedo__main-documents-table-string-file-name:hover {\n    text-decoration: underline;\n  }\n  .kedo__main-documents-table-string-date {\n    -ms-grid-column: 1;\n        grid-column-start: 1;\n    -ms-grid-column-span: 1;\n    grid-column-end: 2;\n    -ms-grid-row: 2;\n        grid-row-start: 2;\n    -ms-grid-row-span: 1;\n    grid-row-end: 3;\n    color: #979797;\n  }\n  .kedo__main-documents-table-string-user-name-wrapper {\n    -ms-grid-column: 2;\n        grid-column-start: 2;\n    -ms-grid-column-span: 2;\n    grid-column-end: 4;\n    -ms-grid-row: 2;\n        grid-row-start: 2;\n    -ms-grid-row-span: 1;\n    grid-row-end: 3;\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n  }\n  .kedo__main-documents-table-string-status {\n    -ms-grid-column: 3;\n        grid-column-start: 3;\n    -ms-grid-column-span: 1;\n    grid-column-end: 4;\n    -ms-grid-row: 1;\n        grid-row-start: 1;\n    -ms-grid-row-span: 1;\n    grid-row-end: 2;\n  }\n  .kedo__main-documents-table-string-user-name-span {\n    display: inline;\n    color: #979797;\n  }\n  .kedo__main-documents-table-string-user-name {\n    word-break: break-word;\n    color: #979797;\n  }\n}\n\n\u003c/style\u003e\n\n\n\u003cstyle\u003e\n    \n.kedo-loader-docs-wrapper {\n  position: absolute;\n  top: 0;\n  left: -10px;\n  width: calc(100% + 20px);\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  opacity: 0;\n  visibility: hidden;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-transition: 0.5s;\n  -o-transition: 0.5s;\n  transition: 0.5s;\n}\n.kedo-loader-docs-wrapper_active{\n  opacity: 1;\n  visibility: visible;\n}\n.kedo-loader-img {\n  width: 200px;\n  height: 200px;\n  background: url(data:image/svg+xml;charset=utf-8,%3Csvg%20version%3D%221.1%22%20id%3D%22L9%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%0A%20%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%200%200%22%20xml%3Aspace%3D%22preserve%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M73%2C50c0-12.7-10.3-23-23-23S27%2C37.3%2C27%2C50%20M30.9%2C50c0-10.5%2C8.5-19.1%2C19.1-19.1S69.1%2C39.5%2C69.1%2C50%22%3E%0A%20%20%20%20%20%20%3CanimateTransform%20%0A%20%20%20%20%20%20%20%20%20attributeName%3D%22transform%22%20%0A%20%20%20%20%20%20%20%20%20attributeType%3D%22XML%22%20%0A%20%20%20%20%20%20%20%20%20type%3D%22rotate%22%0A%20%20%20%20%20%20%20%20%20dur%3D%221s%22%20%0A%20%20%20%20%20%20%20%20%20from%3D%220%2050%2050%22%0A%20%20%20%20%20%20%20%20%20to%3D%22360%2050%2050%22%20%0A%20%20%20%20%20%20%20%20%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fpath%3E%0A%3C%2Fsvg%3E) no-repeat center / contain;\n}\n\n/* ==================================================== */\n.kedo-docs-search {\n    margin-bottom: 20px;\n    position: relative;\n}\n.kedo-docs-search_hidden {\n    display: none;\n}\n\n.kedo-docs-search__form-main {\n    position: relative;\n    display: flex;\n    justify-content: flex-start;\n    align-items: stretch;\n    border-radius: 4px;\n    border: 1px solid #D9D9D9;\n    max-width: 712px;\n    min-height: 39px;\n    overflow: hidden;\n}\n\n.kedo-docs-search__form-main-text {\n    padding: 8px 12px !important;\n    font-style: normal !important;\n    font-weight: 400 !important;\n    font-size: 14px !important;\n    line-height: 140% !important;\n    flex-grow: 1 !important;\n    background: #FFFFFF !important;\n    border: none !important;\n    outline: none !important;\n    border-radius: 0px !important;\n}\n\n.kedo-docs-search__form-main-btn-clear{\n    padding: 0;\n    margin: 0;\n    border: none;\n    outline: none;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 30px;\n    background: #FFFFFF;\n    opacity: 1;\n    visibility: visible;\n    transition: 0.3s;\n}\n.kedo-docs-search__form-main-btn-clear:hover{\n    cursor: pointer;\n}\n.kedo-docs-search__form-main-btn-clear_hidden{\n    opacity: 0;\n    visibility: hidden;\n    width: 0px;\n}\n\n.kedo-docs-search__form-main-button {\n    width: 39px;\n    border: none;\n    outline: none;\n    background: #FFFFFF;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: 0.3s;\n    border-left: 1px solid #D9D9D9;\n}\n.kedo-docs-search__form-main-button:hover {\n    cursor: pointer;\n    background: #F2F8FC;\n}\n\n/* ========== */\n.kedo-docs-search__form-filter {\n    width: 100%;\n    max-width: 712px;\n    position: absolute;\n    top: 45px;\n    background: #FFFFFF;\n    box-shadow: 0px 6px 28px rgba(37, 41, 65, 0.16);\n    border-radius: 4px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: stretch;\n    max-height: 0px;\n    opacity: 0;\n    visibility: hidden;\n    transition: 0.2s;\n    z-index: 99;\n    overflow: hidden;\n}\n.kedo-docs-search__form-filter_acitve{\n    max-height: 400px;\n    opacity: 1;\n    visibility: visible;\n}\n\n.kedo-docs-search__form-filter-wrapper{\n    padding: 24px;\n}\n\n.kedo-docs-search__form-filter-string {\n    display: flex;\n    align-items: center;\n    margin-bottom: 24px;\n}\n\n.kedo-docs-search__form-filter-label {\n    font-style: normal;\n    font-weight: 400;\n    font-size: 15px;\n    line-height: 22px;\n    margin: 0 0 5px 0;\n}\n\n.kedo-docs-search__form-filter-string-column {}\n\n.kedo-docs-search__form-filter-string-column_left {\n    flex: 30% 0 0;\n}\n\n.kedo-docs-search__form-filter-text {\n    font-style: normal;\n    font-weight: 400;\n    font-size: 15px;\n    line-height: 22px;\n    color: #262626;\n    background: #FFFFFF;\n    border: 1px solid #D9D9D9;\n    border-radius: 4px;\n    padding: 5px 9px;\n    outline: none;\n    transition: 0.3s;\n}\n\n.kedo-docs-search__form-filter-text:focus {\n    border: 1px solid #1E6599;\n}\n\n.kedo-docs-search__form-filter-string-column_right {\n    flex-grow: 1;\n}\n\n.kedo-docs-search__form-filter-dates-string {\n    display: flex;\n    align-items: center;\n}\n\n.kedo-docs-search__form-filter-dates-separator{\n    margin: 0 5px;\n}\n\n.kedo-docs-search__form-filter-statuses-wrapper {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n}\n\n.kedo-docs-search__form-filter-status-wrapper {\n    display: flex;\n    align-items: center;\n}\n\n.kedo-docs-search__form-filter-status-label {\n    font-style: normal;\n    font-weight: 400;\n    font-size: 15px;\n    line-height: 22px;\n    color: #262626;\n    display: flex;\n    align-items: center;\n}\n\n.kedo-docs-search__form-filter-status-input {\n    display: none;\n}\n\n.kedo-docs-search__form-filter-status-custom-checkbox{\n    height: 16px;\n    width: 16px;\n    border: 1px solid #BFBFBF;\n    margin-right: 8px;\n    transition: 0.1s;\n}\n\n.kedo-docs-search__form-filter-status-input:checked+.kedo-docs-search__form-filter-status-custom-checkbox{\n    border: 1px solid #1E6599;\n    background: url(data:image/svg+xml;charset=utf-8,%3Csvg%20width%3D%2212%22%20height%3D%229%22%20viewBox%3D%220%200%2012%209%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20d%3D%22M1%203.5L4.5%207L10.5%201%22%20stroke%3D%22%231E6599%22%20stroke-width%3D%222%22%2F%3E%0A%3C%2Fsvg%3E) no-repeat center;\n}\n\n.kedo-docs-search__form-filter-button {\n    border: none;\n    outline: none;\n    padding: 5px 12px;\n    font-style: normal;\n    font-weight: 600;\n    font-size: 15px;\n    line-height: 22px;\n    color: #FFFFFF;\n    background: #1E6599;\n    border-radius: 4px;\n    align-self: flex-start;\n    transition: 0.3s;\n}\n.kedo-docs-search__form-filter-button:hover{\n    background: #367eb2;\n    cursor: pointer;\n}\n.kedo-docs-search__form-filter-button:disabled {\n    background: #aaaaaa;\n    cursor: default;\n}\n\n\n.kedo-docs-search__form-filter-status-select-string{\n    font-style: normal;\n    font-weight: 400;\n    font-size: 15px;\n    line-height: 22px;\n    color: #262626;\n    background: #FFFFFF;\n    border: 1px solid #D9D9D9;\n    border-radius: 4px;\n    padding: 5px 9px;\n    outline: none;\n    transition: 0.3s;\n    appearance: none;\n    background: url(data:image/svg+xml;charset=utf-8,%3Csvg%20width%3D%2210%22%20height%3D%226%22%20viewBox%3D%220%200%2010%206%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20d%3D%22M1%201L5%205L9%201%22%20stroke%3D%22%23D9D9D9%22%20stroke-width%3D%222%22%20stroke-linejoin%3D%22round%22%2F%3E%0A%3C%2Fsvg%3E%0A) no-repeat 98%;\n}\n\n.kedo-docs-search__form-filter-status-select-string:focus {\n    border: 1px solid #1E6599;\n}\n\n@media (max-width: 767px) {\n    .kedo-docs-search__form-filter-statuses-wrapper {\n        grid-template-columns: repeat(2, 1fr);\n    }\n    .kedo-docs-search__form-filter-string {\n        display: flex;\n        flex-direction: column;\n        align-items: stretch;\n    }\n\n}\n\u003c/style\u003e\n\n"}},{"id":"8481c674-64f4-49db-a0fc-76b6e9ea4e2c","descriptor":"code","values":{"contentPlaceholder":"RENDER WIDGET","html":"\u003c% \nif (\n    Context.data.hide_my_documents === false \n    \u0026\u0026 !!Context.data.user_application \n    \u0026\u0026 !!Context.data.current_user\n) { \n    Scripts.renderPage()\n}\n\nif (Context.data.hide_my_documents === true) { \n    Scripts.offHandlersDocuments()\n}\n%\u003e\n\n\u003c% \nif (Context.data.show_search_in_my_documents) {\n    Scripts.initSearchSection()\n} else {\n    Scripts.initSearchSection()\n}\n%\u003e\n\n\u003c% \nif (Context.data.show_tasks || Context.data.show_documents) {\n    Scripts.showTasksOrDocsMobile()\n}\n\n%\u003e\n\n","hideContent":true}}]}},"fields":[{"code":"hide_my_documents","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":true,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Скрыть Мои документы","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"},"input":true,"output":false}},{"code":"show_search_in_my_documents","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":false,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Показывать поиск в Мои документы","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"},"input":true,"output":false}},{"code":"hide_home","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Скрыть Главную","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"},"input":false,"output":false}},{"code":"user_application","type":"SYS_COLLECTION","searchable":false,"indexed":false,"deleted":false,"array":true,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{"code":"staff","filter":{"value":{"tf":{}},"enabled":false},"namespace":"kedo"},"view":{"name":"Карточка сотрудника","data":{},"input":true,"output":false}},{"code":"current_user","type":"SYS_USER","searchable":false,"indexed":false,"deleted":false,"array":true,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{"filter":{"value":{"tf":{}},"enabled":false}},"view":{"name":"Текущий пользователь","data":{},"input":true,"output":false}},{"code":"data_object_tasks","type":"JSON","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Объект данных задач","data":{},"input":false,"output":false}},{"code":"data_object_files","type":"JSON","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Объект данных файлов","data":{},"input":false,"output":false}},{"code":"data_object_old_files","type":"JSON","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Объект данных старых файлов","data":{},"input":false,"output":false}},{"code":"error","type":"STRING","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Ошибка","data":{"additionalType":"string"},"input":false,"output":false}},{"code":"app_contract_personnel_documents","type":"SYS_COLLECTION","searchable":false,"indexed":false,"deleted":false,"array":true,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{"code":"personnel_documents","filter":{"value":{"tf":{}},"enabled":false},"namespace":"personnel_documents"},"view":{"name":"Кадровые документы (контракт)","data":{},"input":false,"output":false}},{"code":"chunk_acquisition_iteration_number","type":"FLOAT","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Номер итерации получения чанка","data":{"additionalType":"integer","showRowSeparator":true},"input":false,"output":false}},{"code":"number_of_empty_iterations","type":"FLOAT","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Количество пустых итераций","data":{"additionalType":"integer","showRowSeparator":true},"input":false,"output":false}},{"code":"all_documents_received","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Все документы получены","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"},"input":false,"output":false}},{"code":"filter_date_start","type":"DATETIME","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Дата фильтра начало","data":{"additionalType":"date","defaultTimeType":"startOfDay","timeOptional":false},"input":false,"output":false}},{"code":"filter_date_end","type":"DATETIME","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Дата фильтра конец","data":{"additionalType":"date","defaultTimeType":"startOfDay","timeOptional":false},"input":false,"output":false}},{"code":"widget_launched","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":false,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Виджет запущен","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"},"input":false,"output":false}},{"code":"show_tasks","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Показывать задачи? (мобиль.)","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"},"input":true,"output":false}},{"code":"show_documents","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Показывать документы? (мобиль.)","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"},"input":true,"output":false}},{"code":"handlers_running","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Обработчики запущены","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"},"input":true,"output":true}},{"code":"documents_contract","type":"SYS_COLLECTION","searchable":false,"indexed":false,"deleted":false,"array":true,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{"code":"documents_for_employment","filter":{"value":{"tf":{}},"enabled":false},"namespace":"kedo"},"view":{"name":"Документы (контракт)","data":{},"input":false,"output":false}},{"code":"app_contract_personnel_documents_new","type":"SYS_COLLECTION","searchable":false,"indexed":false,"deleted":false,"array":true,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{"code":"personnel_documents","filter":{"value":{"tf":{}},"enabled":false},"namespace":"personnel_documents"},"view":{"name":"Кадровые документы (актуальный контракт)","data":{},"input":true,"output":true}}],"fieldVisibilityConditions":{"error":{"enabled":false,"conditions":[]},"hide_home":{"enabled":false,"conditions":[]},"show_tasks":{"enabled":false,"conditions":[]},"current_user":{"enabled":false,"conditions":[]},"show_documents":{"enabled":false,"conditions":[]},"filter_date_end":{"enabled":false,"conditions":[]},"widget_launched":{"enabled":false,"conditions":[]},"handlers_running":{"enabled":false,"conditions":[]},"user_application":{"enabled":false,"conditions":[]},"data_object_files":{"enabled":false,"conditions":[]},"data_object_tasks":{"enabled":false,"conditions":[]},"filter_date_start":{"enabled":false,"conditions":[]},"hide_my_documents":{"enabled":false,"conditions":[]},"documents_contract":{"enabled":false,"conditions":[]},"data_object_old_files":{"enabled":false,"conditions":[]},"all_documents_received":{"enabled":false,"conditions":[]},"number_of_empty_iterations":{"enabled":false,"conditions":[]},"show_search_in_my_documents":{"enabled":false,"conditions":[]},"app_contract_personnel_documents":{"enabled":false,"conditions":[]},"chunk_acquisition_iteration_number":{"enabled":false,"conditions":[]},"app_contract_personnel_documents_new":{"enabled":false,"conditions":[]}},"scriptOptions":{},"clientScripts":"/* Client scripts module */\n\ndeclare const console: any;\ndeclare const window: any;\ndeclare const document: any;\n\ninterface stringData{\n    responsibleUserText: string,\n    fileName: string,\n    linkNamespace: string,\n    linkCode: string,\n    linkId: string,\n    fileDate: string,\n    statusText: string,\n    statusCode: string,\n    isTask: boolean,\n    fileType: string,\n    taskDate: string\n}\n\n// время обновления страницы, с\nconst pageRefreshTime = 60;\n// максимальное количество пустых итераций получения старых файлов\nconst maxEmptyIterationsCount = 3;\n// объем чанка получения старых файлов, мес\nconst sizeChunkOfOldFiles = 2;\n// количество старых файлов для добавления при прокрутке\nconst countOfOldDocumentsForRender = 20;\n\n\nconst host = window.location.host;\n\nconst currentDate = new Datetime();\nconst date = new Date()\nconst currentDay = date.getDate();\n\nconst stringHeight = 100; // высота строки для вычисления высоты раздела для документов\n\nlet isFirstRender = true;\nlet isSearchListenersInit = false;\nlet isTaskPopupOpen = false;\nlet isChunkOldFilesLoading = false;\nlet isOldsFilesRendered = false; // определяет необходимость отрисовки старых файлов\n\nlet documentsBottomPoint: number = 0;\nlet userApp: ApplicationItem\u003cApplication$kedo$staff$Data,any\u003e;\nlet stringOfDocsIds:string = '';\n\nlet loaderEl: any;\nlet loaderDocsEl: any;\nlet kedoDocsWrappper: any;\n\nlet wrapperActions: any;\nlet wrapperDay: any;\nlet wrapperWeek: any;\nlet wrapperMonth: any;\n\nlet userDocsAppsWeekOlderArrIteration: any[] = [];\nlet userDocsAppsWeekOlderArrChunk:any = [];\n\nlet currentStepOfRenderOldFiles = 0;\nlet allOldsFilesRendered = false;\n\nlet timerCheckFilesDocs:any;\nlet timerClosePopupDocs:any;\n\n// for search\nlet userTasksForSearch: ProcessTaskItem[] = [];\nlet userTasksForSearchFiltered: ProcessTaskItem[] = [];\nlet userDocsForSearch: any[] = [];\nlet userDocsForSearchFiltered: any[] = [];\nconst numberOfUnloadedElements: number = 5000;\n\n\n\nasync function renderPage(): Promise\u003cvoid\u003e{\n    if(Context.data.handlers_running) return;    \n    await onHandlersDocuments();\n    if(Context.data.widget_launched) return;\n\n    if(!Context.data.user_application || !Context.data.current_user) {\n        showError('Пользователь не найден.');\n        return;\n    };\n\n    loaderDocsEl = document.querySelector('.kedo-loader-docs-wrapper');\n    \n    initSearchSection();\n\n    await getAndRenderDocs();    \n\n    Context.data.widget_launched = true;\n}\n\nasync function getAndRenderDocs(){\n    showLoaderDocs();\n    await getFilesDataObject();\n\n    sortDataObjByDate();\n    getIdsStringOfDocs();\n    \n    // обнуляем значения\n    allOldsFilesRendered = false;\n    Context.data.all_documents_received = false;\n\n    await renderDocuments();\n    hideLoaderDocs();\n}\n\nasync function offHandlersDocuments(){\n    window.clearInterval(timerCheckFilesDocs);\n    window.clearInterval(timerClosePopupDocs);\n\n    contentBody.removeEventListener('scroll', handleWindowScroll);\n\n    Context.data.handlers_running = false;\n}\n\nasync function onHandlersDocuments(){\n    let findBody = window.setInterval(() =\u003e {\n        contentBody = document.querySelector('app-page-wrapper');\n        if (!contentBody) {\n            return;\n        };\n        contentBody.addEventListener('scroll', handleWindowScroll);\n        window.clearInterval(findBody);\n    }, 500);\n\n    timerCheckFilesDocs = window.setInterval(async() =\u003e {\n        await checkUpdateFiles();\n    }, pageRefreshTime * 1000)\n    \n    timerClosePopupDocs = window.setInterval(checkTaskPopup, 2000);\n    Context.data.handlers_running = true;\n    \n}\n\nasync function addIntervalCheckFiles(){\n    timerCheckFilesDocs = window.setInterval(async() =\u003e {\n        await checkUpdateFiles();\n    }, pageRefreshTime * 1000)\n}\n\nlet searchFilterInput:any;\nlet searchFilterSelect:any;\n// let searchFilterStatusAny:any;\n// let searchFilterStatusSigning:any;\n// let searchFilterStatusAgrement:any;\n// let searchFilterStatusSigned:any;\n// let searchFilterStatusNew:any;\n// let searchFilterStatusRemoved:any;\nlet submitBtn:any;\nlet clearSearchBtn:any;\n\nfunction initSearchSection() {\n    const searchSection = document.querySelector('.kedo-docs-search');\n    const searchMainInput = document.querySelector('.kedo-docs-search__form-main-text');\n    searchFilterInput = document.querySelector('.kedo-docs-search__form-filter-text');\n    searchFilterSelect = document.querySelector('.kedo-docs-search__form-filter-status-select-string');\n    // searchFilterStatusAny = document.querySelector('#filterCheckBoxAny');\n    // searchFilterStatusSigning = document.querySelector('#filterCheckBoxSigning');\n    // searchFilterStatusAgrement = document.querySelector('#filterCheckBoxAgrement');\n    // searchFilterStatusSigned = document.querySelector('#filterCheckBoxSigned');\n    // searchFilterStatusNew = document.querySelector('#filterCheckBoxNew');\n    // searchFilterStatusRemoved = document.querySelector('#filterCheckBoxRemoved');\n\n    submitBtn = document.querySelector('.kedo-docs-search__form-filter-button');\n    clearSearchBtn = document.querySelector('.kedo-docs-search__form-main-btn-clear');\n\n    const kedoSearchMainForm = document.querySelector(\".kedo-docs-search__form-main\");\n    const kedoSearchFilterForm = document.querySelector(\".kedo-docs-search__form-filter\");\n\n    if(Context.data.show_search_in_my_documents === false) {\n        searchSection.classList.add('kedo-docs-search_hidden');\n    } else {\n        searchSection.classList.remove('kedo-docs-search_hidden');\n    }\n\n    async function kedoSearchFormSubmitHandler(evt: any) {\n        evt.preventDefault();\n        \n        showLoaderDocs();\n\n        if(kedoSearchFilterForm.classList.contains('kedo-docs-search__form-filter_acitve')){\n            // closeSearchFilter();\n\n            await searchByFilterData();\n        } else {\n            await searchByMainData();\n        }\n\n        clearSearchBtn.classList.remove('kedo-docs-search__form-main-btn-clear_hidden');\n\n        // clearSearchForms();\n        hideLoaderDocs();\n    }    \n\n    const searchFilterForm = document.querySelector(\".kedo-docs-search__form-filter\");\n\n    function closeSearchFilter(){\n        searchFilterForm.classList.remove('kedo-docs-search__form-filter_acitve');\n    }\n\n    function clearSearchFilterForms(){\n        // searchMainInput.value = '';\n        searchFilterInput.value = '';\n        // searchFilterStatusAny.checked = false;\n        // searchFilterStatusSigning.checked = false;\n        // searchFilterStatusAgrement.checked = false;\n        // searchFilterStatusSigned.checked = false;\n        // searchFilterStatusNew.checked = false;\n        // searchFilterStatusRemoved.checked = false;\n        Context.data.filter_date_start = undefined;\n        Context.data.filter_date_end = undefined;\n    }    \n\n    // window click handler\n    function searchCloseWindowClickHandler(evt: any){\n        // click on button\n        if(evt.target.closest('.kedo-docs-search__form-main-button')){\n            searchFilterForm.classList.toggle('kedo-docs-search__form-filter_acitve');\n            return;\n        }\n        if(evt.target.closest('.ui-datepicker')){\n            return;\n        }\n        \n        // click on window\n        if(!evt.target.closest('.kedo-docs-search__form-filter')){\n            closeSearchFilter();\n        }\n    }\n\n    function setConditionsForSearch(){        \n        isOldsFilesRendered = false;\n        allOldsFilesRendered = false;\n        currentStepOfRenderOldFiles = 0;\n        wrapperMonth.textContent = '';\n    }\n\n    async function searchByFilterData(){\n        searchMainInput.value = '';\n        await findAllTasksDocsForSearch();\n        \n        if(searchFilterInput.value){\n            await filterSearchDataByString(searchFilterInput.value);\n        } else {\n            userTasksForSearchFiltered = userTasksForSearch;\n            userDocsForSearchFiltered = userDocsForSearch;\n        }\n\n        if(Context.data.filter_date_start){\n            await filterSearchDataByStartDate(Context.data.filter_date_start);\n        }\n        if(Context.data.filter_date_end){\n            await filterSearchDataByEndDate(Context.data.filter_date_end);\n        }\n\n        // if(searchFilterStatusAny.checked === false){\n        //     await filterSearchDataByStatuses();\n        // }\n        if(searchFilterSelect.value !== \"any\"){\n            await filterSearchDataByStatuses();\n        }\n\n        await writeToContextSearchData();\n\n        // задаем условия для запуска\n        setConditionsForSearch();\n        Context.data.all_documents_received = true;\n\n        window.clearInterval(timerCheckFilesDocs);\n\n        await renderDocuments();\n    }\n\n    async function searchByMainData(){\n        if(!searchMainInput.value) return;\n        clearSearchFilterForms();\n\n        await findAllTasksDocsForSearch();\n        await filterSearchDataByString(searchMainInput.value);\n\n        await writeToContextSearchData();\n\n        // задаем условия для запуска\n        setConditionsForSearch();\n        Context.data.all_documents_received = true;\n\n        window.clearInterval(timerCheckFilesDocs);\n\n        await renderDocuments();\n    }\n\n    function setIntpusListeners(){\n        searchFilterInput.addEventListener('input', onInputHandler);\n        searchFilterSelect.addEventListener('change', onInputHandler)\n        // searchFilterStatusAny.addEventListener('input', onInputHandler);\n        // searchFilterStatusSigning.addEventListener('input', onInputHandler);\n        // searchFilterStatusAgrement.addEventListener('input', onInputHandler);\n        // searchFilterStatusSigned.addEventListener('input', onInputHandler);\n        // searchFilterStatusNew.addEventListener('input', onInputHandler);\n        // searchFilterStatusRemoved.addEventListener('input', onInputHandler);\n    }\n\n    async function clearSearchBtnClickHandler(){\n        clearSearchBtn.classList.add('kedo-docs-search__form-main-btn-clear_hidden');\n        setConditionsForSearch();\n        stringOfDocsIds = '';\n        Context.data.all_documents_received = false;\n        \n        await getAndRenderDocs();\n        await addIntervalCheckFiles();\n    }\n\n\n    if(isSearchListenersInit) return;\n\n    setIntpusListeners()\n\n    kedoSearchMainForm.addEventListener(\"submit\", kedoSearchFormSubmitHandler);\n    kedoSearchFilterForm.addEventListener(\"submit\", kedoSearchFormSubmitHandler);\n    window.addEventListener('click', searchCloseWindowClickHandler)\n    clearSearchBtn.addEventListener('click', clearSearchBtnClickHandler)\n\n    isSearchListenersInit = true;\n}\n\n// function setAnyStatus(){\n//     searchFilterSelect.value = \"any\"\n    // searchFilterStatusAny.checked = true;\n    // searchFilterStatusSigning.checked = false;\n    // searchFilterStatusAgrement.checked = false;\n    // searchFilterStatusSigned.checked = false;\n    // searchFilterStatusNew.checked = false;\n    // searchFilterStatusRemoved.checked = false;\n// }\n\nfunction checkIsFilterEmpty(){\n    if(\n        // searchMainInput.value.length \u003c 2\n        searchFilterInput.value.length \u003c 2\n        \u0026\u0026 searchFilterSelect.value === \"any\"\n        // \u0026\u0026 searchFilterStatusAny.checked === false\n        // \u0026\u0026 searchFilterStatusSigning.checked === false\n        // \u0026\u0026 searchFilterStatusAgrement.checked === false\n        // \u0026\u0026 searchFilterStatusSigned.checked === false\n        // \u0026\u0026 searchFilterStatusNew.checked === false\n        // \u0026\u0026 searchFilterStatusRemoved.checked === false\n        \u0026\u0026 Context.data.filter_date_start === undefined\n        \u0026\u0026 Context.data.filter_date_end === undefined\n    ){\n        return true;\n    }\n    return false;\n}\n\nfunction onInputHandler(evt:any){\n    const isFilterEmpty = checkIsFilterEmpty();\n    if(!isFilterEmpty){\n        submitBtn.disabled = false;\n    } else {\n        submitBtn.disabled = true;\n    }\n\n    // if(evt.target.id === 'filterCheckBoxAny'){\n    //     setAnyStatus();\n    // } else \n    // if (evt.target.closest('.kedo-docs-search__form-filter-status-input')){\n    //     searchFilterStatusAny.checked = false;\n    // }\n}\n\n\nasync function findAllTasksDocsForSearch(){\n    Context.data.data_object_tasks = [];\n    Context.data.data_object_files = [];\n    Context.data.data_object_old_files = [];\n    userTasksForSearch = []\n    userTasksForSearchFiltered = []\n    userDocsForSearch = []\n    userDocsForSearchFiltered = []\n\n    try{\n        await Promise.all([await getUserTasksForSearch(), await getPersonalDocsForSearch(), await getUserKedoDocsForSearch()]);\n    }\n    catch(err){\n        console.error(`Promise.all([await getUserTasksForSearch(), await getPersonalDocsForSearch(), await getUserKedoDocsForSearch()]) error: ${err}`)\n    }\n}\n\nasync function getUserTasksForSearch(){\n    if(!Context.data.current_user) return;\n\n    userTasksForSearch = await System.processes._searchTasks()\n        .where((f, g) =\u003e g.and(\n            f.__deletedAt.eq(null),\n            f.performers.has(Context.data.current_user!),\n            g.or(\n                f.state.like(ProcessTaskState.inProgress),\n                f.state.like(ProcessTaskState.assignment),\n            )\n        ))\n        .size(7000)\n        .all()\n}\n\nasync function getPersonalDocsForSearch(){\n    if(!Context.data.user_application) return;\n    \n    let appSearch =  Context.fields.app_contract_personnel_documents_new.app.search();\n    let numberOfAllElements = await appSearch.count();\n    const numberOfIterations = Math.ceil(numberOfAllElements / numberOfUnloadedElements);\n \n    for (let i = 0; i \u003c numberOfIterations; i++) {\n        const firstElementNumber = i * numberOfUnloadedElements;\n        const amountOfElements = (i != numberOfIterations - 1) ? numberOfUnloadedElements : (numberOfAllElements - firstElementNumber);\n         \n        try {\n            const items = await appSearch\n                .size(amountOfElements)\n                .where((f, g) =\u003e g.and(\n                    f.__deletedAt.eq(null),\n                    f.staff.link(Context.data.user_application!)\n                ))\n                .from(firstElementNumber)\n                .all();\n \n            userDocsForSearch.push(...items);\n        } catch (err) {\n            console.error(`getPersonalDocsForSearch error: ${err}`);\n            return;\n        }\n    }\n}\n\nasync function getUserKedoDocsForSearch(){\n    if(!Context.data.user_application) return;\n    \n    let appSearch =  Context.fields.documents_contract.app.search();\n    let numberOfAllElements = await appSearch.count();\n    const numberOfIterations = Math.ceil(numberOfAllElements / numberOfUnloadedElements);\n \n    for (let i = 0; i \u003c numberOfIterations; i++) {\n        const firstElementNumber = i * numberOfUnloadedElements;\n        const amountOfElements = (i != numberOfIterations - 1) ? numberOfUnloadedElements : (numberOfAllElements - firstElementNumber);\n         \n        try {\n            const items = await appSearch\n                .size(amountOfElements)\n                .where((f, g) =\u003e g.and(\n                    f.__deletedAt.eq(null),\n                    f.staff.link(Context.data.user_application!)\n                ))\n                .from(firstElementNumber)\n                .all();\n \n            userDocsForSearch.push(...items);\n        } catch (err) {\n            console.error(`getUserKedoDocsForSearch error: ${err}`);\n            return;\n        }\n    }\n}\n\nasync function filterSearchDataByString(searchText: string){\n    userTasksForSearchFiltered = userTasksForSearch.filter((item) =\u003e {\n        return item.data.__name.toLocaleUpperCase().includes(searchText.toLocaleUpperCase());\n    })\n    userDocsForSearchFiltered = userDocsForSearch.filter((item) =\u003e {\n        return item.data.__name.toLocaleUpperCase().includes(searchText.toLocaleUpperCase());\n    })\n}\n\nasync function filterSearchDataByStartDate(date: TDate){\n    userTasksForSearchFiltered = userTasksForSearchFiltered.filter((item) =\u003e {\n        return date.before(item.data.__createdAt);\n    })\n    userDocsForSearchFiltered = userDocsForSearch.filter((item) =\u003e {\n       return date.before(item.data.__createdAt);\n    })\n}\n\nasync function filterSearchDataByEndDate(date: TDate){\n    userTasksForSearchFiltered = userTasksForSearchFiltered.filter((item) =\u003e {\n        return date.after(item.data.__createdAt);\n    })\n    userDocsForSearchFiltered = userDocsForSearch.filter((item) =\u003e {\n       return date.after(item.data.__createdAt);\n    })\n}\n\nasync function filterSearchDataByStatuses(){\n    function processCheckBoxData(statusCode:string){\n        // if(input.checked === true){\n        //     isSomeCheckBoxChecked = true;\n\n        //     for(let i = 0; i \u003c userDocsForSearchFiltered.length; i++){\n        //         const status = userDocsForSearchFiltered[i].data.line_status.split(';')[0]\n\n        //         if(status === statusCode){\n        //             resultDocsObj.push(userDocsForSearchFiltered[i])\n        //         }\n        //     }\n        // }\n        for(let i = 0; i \u003c userDocsForSearchFiltered.length; i++){\n            const status = userDocsForSearchFiltered[i].data.line_status.split(';')[0]\n\n            if(status === statusCode){\n                resultDocsObj.push(userDocsForSearchFiltered[i])\n            }\n        }\n    }\n\n    let resultDocsObj:any[] = []\n\n    // let isSomeCheckBoxChecked = false;\n\n    switch(searchFilterSelect.value){\n        case \"signing\":\n            processCheckBoxData('signing');\n            break;\n        case \"agrement\":\n            processCheckBoxData('agrement');\n            break;\n        case \"signed\":\n            processCheckBoxData('signed');\n            break;\n        case \"new\":\n            processCheckBoxData('new');\n            break;\n        case \"removed\":\n            processCheckBoxData('removed');\n            break;\n    }\n\n    // processCheckBoxData(searchFilterStatusSigning, 'signing');\n    // processCheckBoxData(searchFilterStatusAgrement, 'agrement');\n    // processCheckBoxData(searchFilterStatusSigned, 'signed');\n    // processCheckBoxData(searchFilterStatusNew, 'new');\n    // processCheckBoxData(searchFilterStatusRemoved, 'removed');\n\n    // if(isSomeCheckBoxChecked){\n    //     userTasksForSearchFiltered = [];\n    //     userDocsForSearchFiltered = resultDocsObj\n    // }\n\n    userTasksForSearchFiltered = [];\n    userDocsForSearchFiltered = resultDocsObj\n}\n\nasync function writeToContextSearchData(){\n    await Promise.all(userTasksForSearchFiltered.map(async(item) =\u003e {\n        Context.data.data_object_files.push(await getElementObj(item, true));\n    }))\n    \n    await Promise.all(userDocsForSearchFiltered.map(async(item) =\u003e {\n        if(currentDate.addDate(0, 0, -7).after(item.data.__createdAt)){\n            Context.data.data_object_old_files.push(await getElementObj(item, false));\n        } else {\n            Context.data.data_object_files.push(await getElementObj(item, false));\n        }\n        \n    }))\n\n    sortDataObjByDate();\n    sortOldDataObjByDate();\n}\n\n\n// ==================================================================================================================================\n// ==================================================================================================================================\n// ==================================================================================================================================\n\n\nasync function renderDocuments() {\n    if(!wrapperActions || !kedoDocsWrappper){\n        wrapperActions = document.querySelector('.kedo__main-documents-table-section-list_actions');\n        wrapperDay = document.querySelector('.kedo__main-documents-table-section-list_today');\n        wrapperWeek = document.querySelector('.kedo__main-documents-table-section-list_week');\n        wrapperMonth = document.querySelector('.kedo__main-documents-table-section-list_month');\n        kedoDocsWrappper = document.querySelector('.kedo__main-documents-files-wrapper');   \n    }\n    wrapperMonthTop = wrapperMonth.getBoundingClientRect().top;\n\n    wrapperActions.textContent = '';\n    wrapperDay.textContent = '';\n    wrapperWeek.textContent = '';\n    // wrapperMonth.textContent = '';\n    \n    // рисуем задачи\n    if(Context.data.data_object_tasks){\n        for(let i = 0; i \u003c Context.data.data_object_tasks.length; i++){\n            renderDocumentString(Context.data.data_object_tasks[i])\n        };\n        if (Context.data.data_object_tasks.length \u003e 0) {\n\n        }\n    }\n\n    // рисуем документы\n    if(Context.data.data_object_files){\n        for(let i = 0; i \u003c Context.data.data_object_files.length; i++){\n            renderDocumentString(Context.data.data_object_files[i])\n        };\n    }    \n    \n    // рисуем старые документы\n    // if(Context.data.data_object_old_files \u0026\u0026 isFirstRender){\n    if(Context.data.data_object_old_files \u0026\u0026 !isOldsFilesRendered){\n        renderStepOfOldFiles();\n    }\n    isOldsFilesRendered = true;\n    \n    // стили заголовков секций и раскрывающиеся списки\n    setDocswrappersStyles()\n\n    if(!isFirstRender) return;\n\n    // handler opened list \n    setDocsWrapperClickHandler()    \n\n    window.addEventListener('resize', showTasksOrDocsMobile)\n\n    isFirstRender = false;\n}\n\n// lazy loading\nlet contentBody: any;\nlet timeOut: any;\nlet wrapperMonthTop:number;\n\nasync function handleWindowScroll(){\n    window.clearTimeout(timeOut);\n\n    if(allOldsFilesRendered){\n        return\n    }\n\n    timeOut = window.setTimeout(async() =\u003e {\n        if(!wrapperMonth.closest('.kedo__main-documents-table-section').classList.contains('kedo__main-documents-table-section_opened')) return;\n\n        documentsBottomPoint = wrapperMonthTop + wrapperMonth.offsetHeight;\n        \n        if(documentsBottomPoint - contentBody.scrollTop - window.innerHeight \u003c 150){            \n            contentBody.scrollBy(0, -100)\n            try {\n                await renderStepOfOldFiles();                    \n            }\n            catch(err){\n                throw new Error(`renderStepItems error ${err}`);\n            }\n            contentBody.scrollBy(0, 100);\n        }\n    }, 200)\n    \n}\n\n\nasync function renderStepOfOldFiles(){\n    if(allOldsFilesRendered) return;\n\n    // TODO - проверить правильность этого условия\n    if(isChunkOldFilesLoading) return;\n\n    // отрисовка элементов\n    if((currentStepOfRenderOldFiles + 1) * countOfOldDocumentsForRender \u003e Context.data.data_object_old_files.length){\n        for(let i = (currentStepOfRenderOldFiles * countOfOldDocumentsForRender); i \u003c Context.data.data_object_old_files.length; i++){\n            renderDocumentString(Context.data.data_object_old_files[i])\n        }\n        if(Context.data.all_documents_received === true){\n            allOldsFilesRendered = true;\n        }\n    } else {\n        for(let i = (currentStepOfRenderOldFiles * countOfOldDocumentsForRender); i \u003c (currentStepOfRenderOldFiles + 1) * countOfOldDocumentsForRender; i++){\n            renderDocumentString(Context.data.data_object_old_files[i])\n        }\n    }\n    currentStepOfRenderOldFiles++;\n\n    // расширяем контейнер\n    if(wrapperMonth.closest('.kedo__main-documents-table-section').classList.contains('kedo__main-documents-table-section_opened')){\n        wrapperMonth.style = `max-height: 100%`//${stringHeight * wrapperMonth.children.length}px`;\n    }\n\n    if(allOldsFilesRendered) return;\n\n    await checkFilesToRenderCount();\n}\n\nasync function checkFilesToRenderCount(){\n    // проверка количества неотрисованных элементов\n    if((Context.data.data_object_old_files.length - currentStepOfRenderOldFiles * countOfOldDocumentsForRender) \u003c countOfOldDocumentsForRender){\n        if(isChunkOldFilesLoading === false){\n            await getChunkOfOldFilesWrapper();\n        }\n    }\n}\n\nfunction setDocswrappersStyles(){\n    const wrappersArr = document.querySelectorAll('.kedo__main-documents-table-section-list');\n    let openedFilesCount: number = 0;\n       \n    function clearStyleOfSectionNeedAction(){\n        for(let i = 0; i \u003c wrappersArr.length; i++){\n            const sectionNeedAction = wrappersArr[i].closest('.kedo__main-documents-table-section');\n            sectionNeedAction.classList.remove('kedo__main-documents-table-section_empty');\n            sectionNeedAction.classList.remove('kedo__main-documents-table-section_opened');\n        }        \n    }\n\n    clearStyleOfSectionNeedAction();\n\n    // стили секции Требуют действий\n    const sectionNeedAction = wrappersArr[0].closest('.kedo__main-documents-table-section');\n    const sectionNeedActionHeader = document.querySelector('.kedo__main-documents-table-section-title-wrapper_action')\n\n    if(wrappersArr[0].children.length === 0){        \n        sectionNeedAction.classList.add('kedo__main-documents-table-section_empty');\n        sectionNeedActionHeader.classList.remove('kedo__main-documents-table-section-title-wrapper_hidden');\n    } else {\n        sectionNeedAction.classList.add('kedo__main-documents-table-section_opened');\n        sectionNeedActionHeader.classList.add('kedo__main-documents-table-section-title-wrapper_hidden');\n        openedFilesCount += wrappersArr[0].children.length;\n        wrappersArr[0].style = `max-height: 100%`//${stringHeight * wrappersArr[0].children.length}px`;\n    }\n    \n    // стили остальных секций\n    for(let i = 1; i \u003c wrappersArr.length; i++){\n        if (wrappersArr[i].children.length === 0){\n            wrappersArr[i].closest('.kedo__main-documents-table-section').classList.add('kedo__main-documents-table-section_empty');\n        } else {\n            if(openedFilesCount \u003c 5){\n                wrappersArr[i].closest('.kedo__main-documents-table-section').classList.add('kedo__main-documents-table-section_opened');\n                openedFilesCount += wrappersArr[i].children.length;\n                wrappersArr[i].style = `max-height: 100%`//${stringHeight * wrappersArr[i].children.length}px`;\n            }\n        }\n    }\n}\n\nfunction setDocsWrapperClickHandler(){\n    function handleDocsWrapperClick(e: any){\n        const section = e.target.closest('.kedo__main-documents-table-section');\n        if(!section){\n            return;\n        }\n        if(section.classList.contains('kedo__main-documents-table-section_empty')){\n            return;\n        }\n        if(section.classList.contains('kedo__main-documents-table-section_actions')){\n            return;\n        }\n        if(e.target.closest('.kedo__main-documents-table-section-list')){\n            return;\n        }\n        \n        const filesWrapper = section.querySelector('.kedo__main-documents-table-section-list');\n\n        if(section.classList.contains('kedo__main-documents-table-section_opened')){\n            filesWrapper.style = `max-height: 0px`;\n            section.classList.remove('kedo__main-documents-table-section_opened')\n        } else {\n            // filesWrapper.style = `max-height: ${stringHeight * filesWrapper.children.length}px`;\n            filesWrapper.style = `max-height: 100%`;\n            section.classList.add('kedo__main-documents-table-section_opened')\n        }\n    }\n\n    let docsWrappers = document.querySelectorAll(\".kedo__main-documents-table-section:not(.kedo__main-documents-table-section_empty):not(.kedo__main-documents-table-section_actions)\");\n\n    docsWrappers.forEach((wrapper: any) =\u003e {\n        let wrapperTitleArrow = wrapper.querySelector(\".kedo__main-documents-table-section-title-wrapper .kedo__main-documents-table-section-title-arrow\");\n        wrapperTitleArrow.addEventListener(\"click\", (e: any) =\u003e {\n            handleDocsWrapperClick(e)\n        })\n    })\n    kedoDocsWrappper.addEventListener('click', handleDocsWrapperClick);\n}\n\nasync function checkTaskPopup(){\n    const taskPopup = document.querySelector('body \u003e elma-form \u003e form \u003e elma-complex-popup \u003e div');\n\n    if(taskPopup){\n        isTaskPopupOpen = true;\n    } else {\n        if(isTaskPopupOpen){\n            isTaskPopupOpen = false;\n            await checkUpdateFiles();\n        }\n    }\n}\n\nasync function checkUpdateFiles(){\n    const oldIdsStringOfDocs = stringOfDocsIds;\n        \n    await getFilesDataObjectForUpdate();\n    sortDataObjByDate();\n    getIdsStringOfDocs();\n\n    if(!stringOfDocsIds) return;\n    \n    if(oldIdsStringOfDocs !== stringOfDocsIds){\n        showLoaderDocs();\n\n        // обнуляем значения\n        allOldsFilesRendered = false;\n        Context.data.all_documents_received = false;\n\n        await renderDocuments();\n\n        hideLoaderDocs();\n    }\n}\n\nasync function renderDocumentString(data: stringData){\n    function setStatusStyle(){\n        if(data.statusCode === 'new'){\n            statusEl.classList.add('kedo__main-documents-table-string-status_default');\n            return;\n        }\n        if(data.statusCode === 'agrement'){\n            statusEl.classList.add('kedo__main-documents-table-string-status_agrement');\n            return;\n        }\n        if(data.statusCode === 'signing'){\n            statusEl.classList.add('kedo__main-documents-table-string-status_on-sign');\n            return;\n        }\n        if(data.statusCode === 'signed'){\n            statusEl.classList.add('kedo__main-documents-table-string-status_signed');\n            return;\n        }\n        if(data.statusCode === 'removed'){\n            statusEl.classList.add('kedo__main-documents-table-string-status_cancel');\n            return;\n        }\n        if(data.statusCode.length \u003e 0){\n            statusEl.classList.add('kedo__main-documents-table-string-status_default');      \n            // statusEl.textContent = '';\n            // return;\n        }\n    }\n\n    const fileString = document.querySelector('.kedo__main-documents-table-section-list-item-template').content.cloneNode(true);\n    let fileName = 'Файл';\n\n    if (data.fileName){\n        fileName = data.fileName;\n    }     \n\n    const nameWrapperEl = fileString.querySelector('.kedo__main-documents-table-string-file-name-wrapper');\n    const imgEl = fileString.querySelector('.kedo__main-documents-table-string-file-name-img');\n    const linkEl = fileString.querySelector('.kedo__main-documents-table-string-file-name');\n    const dateEl = fileString.querySelector('.kedo__main-documents-table-string-date');\n    // const responsibleEl = fileString.querySelector('.kedo__main-documents-table-string-user-name');\n    const statusEl = fileString.querySelector('.kedo__main-documents-table-string-status');\n\n    // ellips\n    if(data.isTask){\n        nameWrapperEl.classList.add('kedo__main-documents-table-string-file-name-wrapper_active');\n    }\n\n    // img\n    let fileType: string = \"\";\n    if (!data.fileType) {\n        let fileNameArr = data.fileName.split(\".\").slice(-1)[0];\n        if (fileNameArr.length \u003e 1) {\n            fileType = fileNameArr[fileNameArr.length - 1]\n        };\n    };\n    \n    // if(data.fileType.includes(\"doc\") || fileType.includes('doc')){\n    //     imgEl.classList.add('doc-img_doc');\n    // } else if (data.fileType.includes(\"pdf\") || fileType.includes('pdf')){\n    //     imgEl.classList.add('doc-img_pdf');\n    // } else {\n    //     if (!data.isTask) {\n    //         imgEl.classList.add('doc_img-null');\n    //     };\n    // };\n    imgEl.classList.add('doc-img_pdf');\n\n    // link\n    linkEl.textContent = fileName;\n    if(data.isTask){\n        linkEl.href = `https://${host}/_portal/kedo_ext/user_page(p:task/${data.linkId})`\n    } else {\n        if(data.linkCode \u0026\u0026 data.linkId \u0026\u0026 data.linkNamespace){\n            linkEl.href = `https://${host}/_portal/kedo_ext/user_page(p:item/${data.linkNamespace}/${data.linkCode}/${data.linkId})`\n        } else {\n            linkEl.href = `https://${host}/_portal/kedo_ext/user_page`\n        }\n    }\n\n    // дата создания и текст для отображения\n    let fileDay: number|undefined = undefined;\n    \n    let dateText:string = '';        \n    let date: Date|undefined = undefined;\n    \n    if(data.isTask){\n        date = !data.taskDate ? undefined : new Date(data.taskDate);\n    } else {\n        date = !data.fileDate ? undefined : new Date(data.fileDate);\n    }\n\n    if(data.fileDate){\n        fileDay = (new Date(data.fileDate)).getDate();\n    }\n    \n    if(date){\n        dateText = `${date.toLocaleString('ru-RU', { year:'2-digit', month: 'numeric', day: 'numeric', hour: 'numeric', minute: 'numeric' })}`;\n    }   \n    dateEl.textContent = dateText;\n\n    // reponsible        \n    let responsiblePerson: string = '';\n    if(data.responsibleUserText){\n        responsiblePerson = data.responsibleUserText;\n    }\n    // responsibleEl.textContent = responsiblePerson;\n\n    // status \n    statusEl.textContent = ''\n    if(data.statusText){\n        statusEl.textContent = data.statusText;\n        setStatusStyle();\n    } else {\n        statusEl.textContent = '';\n    }\n\n    // добавление на страницу\n    if(data.isTask === true){\n        wrapperActions.append(fileString);\n        return; \n    }\n    \n    if(data.fileDate \u003c currentDate.addDate(0, 0, -7).format()){\n        wrapperMonth.append(fileString);\n        return;\n    }\n    \n    if (Number(fileDay) !== Number(currentDay)){\n        wrapperWeek.append(fileString);\n        return\n    } \n    wrapperDay.append(fileString);\n}\n\nfunction sortDataObjByDate(){\n    Context.data.data_object_files = Context.data.data_object_files.sort((obj1: stringData, obj2: stringData) =\u003e {\n        if (obj2.fileDate \u003e obj1.fileDate) {\n            return 1;\n        }\n        if (obj2.fileDate \u003c obj1.fileDate) {\n            return -1;\n        }\n        return 0;\n    });\n\n    Context.data.data_object_tasks = Context.data.data_object_tasks.sort((obj1: stringData, obj2: stringData) =\u003e {\n        if (obj2.fileDate \u003e obj1.fileDate) {\n            return 1;\n        }\n        if (obj2.fileDate \u003c obj1.fileDate) {\n            return -1;\n        }\n        return 0;\n    });\n}\n\nfunction sortOldDataObjByDate(){\n    Context.data.data_object_old_files = Context.data.data_object_old_files.sort((obj1: stringData, obj2: stringData) =\u003e {\n        if (obj2.fileDate \u003e obj1.fileDate) {\n            return 1;\n        }\n        if (obj2.fileDate \u003c obj1.fileDate) {\n            return -1;\n        }\n        return 0;\n    });\n}\n\nfunction getIdsStringOfDocs(){\n    stringOfDocsIds = '';\n\n    if(Context.data.data_object_tasks){\n        for (let i = 0; i \u003c Context.data.data_object_tasks.length; i++){\n            stringOfDocsIds += Context.data.data_object_tasks[i].linkId;\n            stringOfDocsIds += Context.data.data_object_tasks[i].statusCode;\n        }\n    }\n    if(Context.data.data_object_files){\n        for (let i = 0; i \u003c Context.data.data_object_files.length; i++){\n            stringOfDocsIds += Context.data.data_object_files[i].linkId;\n            stringOfDocsIds += Context.data.data_object_files[i].statusCode;\n        }\n    }\n}\n\n\nasync function getFilesDataObject(): Promise\u003cvoid\u003e {\n    Context.data.data_object_files = [];\n    Context.data.data_object_old_files = [];\n    Context.data.data_object_tasks = [];\n    Context.data.chunk_acquisition_iteration_number = 0;\n    Context.data.number_of_empty_iterations = 0;\n    // Context.data.all_documents_received = false;\n\n    try{\n        await Promise.all([await getUserTasks(), await getPersonalDocs(), await getUserKedoDocs(), await getChunkOfOldFilesWrapper()]);\n    }\n    catch(err){\n        console.error(`Promise.all([await getPersonalDocs(), await getUserKedoDocs()]) error: ${err}`)\n    }\n}\n\nasync function getFilesDataObjectForUpdate(): Promise\u003cvoid\u003e {\n    Context.data.data_object_files = [];\n    Context.data.data_object_tasks = [];\n\n    try{\n        await Promise.all([await getUserTasks(), await getPersonalDocs(), await getUserKedoDocs()]);\n    }\n    catch(err){\n        console.error(`Promise.all([await getPersonalDocs(), await getUserKedoDocs()]) error: ${err}`)\n    }\n}\n\nasync function getChunkOfOldFilesWrapper(){\n    if(isChunkOldFilesLoading) return;\n\n    showLoaderDocs();\n    isChunkOldFilesLoading = true;\n\n    userDocsAppsWeekOlderArrChunk = [];\n    await getChunkOfOldFiles();\n    Context.data.data_object_old_files.push(...userDocsAppsWeekOlderArrChunk);\n\n    isChunkOldFilesLoading = false;\n    hideLoaderDocs();\n}\n\nasync function getChunkOfOldFiles(){\n    if(Context.data.all_documents_received === true) return;\n\n    // проверка на максимальное количество пустых итераций\n    if(Context.data.number_of_empty_iterations! === maxEmptyIterationsCount){\n        Context.data.all_documents_received = true;\n        return;\n    }\n    userDocsAppsWeekOlderArrIteration = [];\n\n    let startDay = 0;\n    if(Context.data.chunk_acquisition_iteration_number === 0){\n        startDay = -7;\n    }\n\n    try{\n        await Promise.all([await getChunkOldPersonalDocs(startDay), await getChunkOldUserKedoDocs(startDay)]);\n    }\n    catch(err){\n        console.error(`Promise.all([await getChunkOldPersonalDocs(startDay), await getChunkOldUserKedoDocs(startDay)]) error: ${err}`)\n    }\n    Context.data.chunk_acquisition_iteration_number!++;\n\n    // userDocsAppsWeekOlderArrIteration = userDocsAppsWeekOlderArrIteration.concat(userDocsAppsWeekOlderArrIteration)\n    // userDocsAppsWeekOlderArrIteration = userDocsAppsWeekOlderArrIteration.concat(userDocsAppsWeekOlderArrIteration)\n    // userDocsAppsWeekOlderArrIteration = userDocsAppsWeekOlderArrIteration.concat(userDocsAppsWeekOlderArrIteration)\n    // userDocsAppsWeekOlderArrIteration = userDocsAppsWeekOlderArrIteration.concat(userDocsAppsWeekOlderArrIteration)\n  \n    // сортируем массив старых документов по дате создания\n    userDocsAppsWeekOlderArrIteration = userDocsAppsWeekOlderArrIteration.sort((obj1: stringData, obj2: stringData) =\u003e {\n        if (obj2.fileDate \u003e obj1.fileDate) {\n            return 1;\n        }\n        if (obj2.fileDate \u003c obj1.fileDate) {\n            return -1;\n        }\n        return 0;\n    });\n\n    userDocsAppsWeekOlderArrChunk.push(...userDocsAppsWeekOlderArrIteration);\n\n    // проверка размера полученного чанка\n    if(userDocsAppsWeekOlderArrChunk.length \u003c countOfOldDocumentsForRender){\n        Context.data.number_of_empty_iterations!++;\n        await getChunkOfOldFiles()\n    } else {\n        Context.data.number_of_empty_iterations = 0;\n    }\n}\n\nasync function getChunkOldPersonalDocs(startDay: number): Promise\u003cvoid\u003e {\n    let personalDocsAppsArr: ApplicationItem\u003cApplication$personnel_documents$personnel_documents$Data, Application$personnel_documents$personnel_documents$Params\u003e[] = [];\n\n    if(!Context.data.user_application) return;\n\n    //@ts-ignore\n    personalDocsAppsArr = await Context.fields.app_contract_personnel_documents_new.app\n        .search()\n        .where((f, g) =\u003e g.and(\n            f.__deletedAt.eq(null),\n            f.staff.link(Context.data.user_application!),\n            f.__createdAt.lt(currentDate.addDate(0, -(Context.data.chunk_acquisition_iteration_number! * sizeChunkOfOldFiles), startDay)),\n            f.__createdAt.gt(currentDate.addDate(0, -((Context.data.chunk_acquisition_iteration_number! + 1) * sizeChunkOfOldFiles), 0))\n        ))\n        .size(7000)\n        .all()\n\n    if(personalDocsAppsArr.length \u003e 0){\n        await Promise.all(personalDocsAppsArr.map(async(item) =\u003e {\n            userDocsAppsWeekOlderArrIteration.push(await getElementObj(item, false));\n        }))\n    }\n}\n\nasync function getChunkOldUserKedoDocs(startDay: number): Promise\u003cvoid\u003e {\n    let kedoDocsArr: ApplicationItem\u003cApplication$kedo$documents_for_employment$Data, Application$kedo$documents_for_employment$Params\u003e[] = [];\n\n    if(!Context.data.user_application) return;\n\n    kedoDocsArr = await Context.fields.documents_contract.app\n        .search()\n        .where((f, g) =\u003e g.and(\n            f.__deletedAt.eq(null),\n            f.staff.link(Context.data.user_application!),\n            f.__createdAt.lt(currentDate.addDate(0, -(Context.data.chunk_acquisition_iteration_number! * sizeChunkOfOldFiles), startDay)),\n            f.__createdAt.gt(currentDate.addDate(0, -((Context.data.chunk_acquisition_iteration_number! + 1) * sizeChunkOfOldFiles), 0))\n        ))\n        .size(7000)\n        .all()\n\n    if(kedoDocsArr){\n        await Promise.all(kedoDocsArr.map(async(item) =\u003e {\n            userDocsAppsWeekOlderArrIteration.push(await getElementObj(item, false));\n        }))\n    }\n}\n\nasync function getUserTasks(){\n    let userTasks: ProcessTaskItem[] = [];\n\n    if(!Context.data.current_user) return;\n\n    userTasks = await System.processes._searchTasks()\n        .where((f, g) =\u003e g.and(\n            f.__deletedAt.eq(null),\n            f.performers.has(Context.data.current_user!),\n            g.or(\n                f.state.like(ProcessTaskState.inProgress),\n                f.state.like(ProcessTaskState.assignment),\n            )\n        ))\n        .size(7000)\n        .all()\n\n    if(userTasks.length \u003e 0){\n        await Promise.all(userTasks.map(async(item) =\u003e {\n            Context.data.data_object_tasks.push(await getElementObj(item, true));\n        }))\n    }\n}\n \nasync function getPersonalDocs(): Promise\u003cvoid\u003e {\n    let personalDocsAppsArr: ApplicationItem\u003cApplication$personnel_documents$personnel_documents$Data, Application$personnel_documents$personnel_documents$Params\u003e[] = [];\n\n    if(!Context.data.user_application) return;\n    //@ts-ignore\n    personalDocsAppsArr = await Context.fields.app_contract_personnel_documents_new.app\n        .search()\n        .where((f, g) =\u003e g.and(\n            f.__deletedAt.eq(null),\n            f.staff.link(Context.data.user_application!),\n            f.__createdAt.gt(currentDate.addDate(0, 0, -7))\n        ))\n        .size(10000)\n        .all()\n    if(personalDocsAppsArr.length \u003e 0){\n        await Promise.all(personalDocsAppsArr.map(async(item) =\u003e {\n            Context.data.data_object_files.push(await getElementObj(item, false));\n        }))\n    }\n}\n\n\nasync function getUserKedoDocs(): Promise\u003cvoid\u003e {\n    let kedoDocsArr: ApplicationItem\u003cApplication$kedo$documents_for_employment$Data, Application$kedo$documents_for_employment$Params\u003e[] = [];\n\n    if(!Context.data.user_application) return;\n\n    kedoDocsArr = await Context.fields.documents_contract.app\n        .search()\n        .where((f, g) =\u003e g.and(\n            f.__deletedAt.eq(null),\n            f.staff.link(Context.data.user_application!),\n            f.__createdAt.gt(currentDate.addDate(0, 0, -7))\n        ))\n        .size(7000)\n        .all()\n\n    console.log(kedoDocsArr)\n\n    if(kedoDocsArr){\n        await Promise.all(kedoDocsArr.map(async(item) =\u003e {\n            Context.data.data_object_files.push(await getElementObj(item, false));\n        }))\n    }\n}\n\n\n\nasync function getElementObj(element: ProcessTaskItem|ApplicationItem\u003cApplication$personnel_documents$personnel_documents$Data, Application$personnel_documents$personnel_documents$Params\u003e|ApplicationItem\u003cApplication$kedo$documents_for_employment$Data, Application$kedo$documents_for_employment$Params\u003e, isTask: boolean){\n    let fileCode: string = '';\n    let fileId: string = '';\n    let fileNamespace:any =  '';\n    let docapp:any = undefined;\n    let statusText: string = '';\n    let statusCode: string = '';\n    let fileType: string = '';\n    let fileName: string = '';\n    let fileDate: string = '';\n    let taskDate: string = '';\n    function setStatusCodeName(){\n        if(isTask){\n            // if(!docapp) return\n            // if(!docapp.data.__status) return\n            // if(!docapp.data.__status.status) return\n            switch (element.data.state) {\n                case ProcessTaskState.cancel: \n                    statusCode = \"removed\";\n                    statusText = \"Отменена\";\n                    break;\n                case ProcessTaskState.assignment:\n                    statusCode = \"agrement\";\n                    statusText = \"На распределении\";\n                    break;\n                case ProcessTaskState.closed:\n                    statusCode = \"signed\";\n                    statusText = \"Выполнена\";\n                    break;\n                case ProcessTaskState.inProgress:\n                    statusCode = \"agrement\";\n                    statusText = \"В процессе\";\n                    break;\n            };\n        } else {\n            if(!element.data.line_status) {\n                statusCode = \"not_implemented\";\n                statusText = \"Не определён\";\n                return;\n            };\n            const codeNameArr = element.data.line_status.split(';')\n\n            statusCode = codeNameArr[0];\n            if(codeNameArr.length \u003e 1){\n                statusText = codeNameArr[1]\n            } else {\n                switch (true) {\n                    case element.data.line_status.toUpperCase().includes(\"ПОДПИС\"):\n                        statusCode = \"signed\";\n                        statusText = \"Подписан\";\n                        break;\n                    case element.data.line_status.toUpperCase().includes(\"СОГЛАСОВ\"):\n                        statusCode = \"signed\";\n                        statusText = \"Согласован\";\n                        break;\n                    case element.data.line_status.toUpperCase().includes(\"НА ПОДПИС\"):\n                        statusCode = \"signing\";\n                        statusText = \"На подписании\";\n                        break;\n                    case element.data.line_status.toUpperCase().includes(\"НА СОГЛАС\"):\n                        statusCode = \"agrement\";\n                        statusText = \"На согласовании\";\n                        break;\n                }\n            }\n        }\n    }\n    function setDocappData(){\n        if(!element.data){\n            return;\n        }\n        if(!element.data.__sourceRef){\n            return;\n        }\n        \n        if(element.data.__sourceRef.code){\n            fileCode = element.data.__sourceRef.code;\n        }\n        if(element.data.__sourceRef.id){\n            fileId = element.data.__sourceRef.id;\n        }\n        if(element.data.__sourceRef.namespace){\n            fileNamespace = element.data.__sourceRef.namespace;\n        }\n    }\n\n    async function getDocappByItem(){\n        let doc: any;\n        if(element.data.__item){\n            try{\n                doc = await element.data.__item.fetch();\n            }\n            catch(err){\n                console.error(`element.data.__item.fetch error: ${err}`)\n            }\n        }\n        \n        if(!doc) return;\n\n        if(doc.fields.linked_order \u0026\u0026 doc.data.linked_order){\n            try{\n                docapp = await doc.data.linked_order.fetch();\n            }\n            catch(err){\n                console.error(`doc.data.linked_order.fetch error: ${err}`)\n            }\n        }\n\n        if(!docapp \u0026\u0026 !!doc){\n            docapp = doc;\n        }\n    }\n\n    // docApp\n    if(isTask){\n        fileCode = element.code;\n        fileNamespace = element.namespace;\n        fileId = element.id;\n    } else {\n        setDocappData();\n    }\n\n    if(isTask){\n        await getDocappByItem();\n    }\n    \n    if(element \u0026\u0026 element.data.__name){\n        if(isTask \u0026\u0026 docapp){\n            fileName = element.data.__name; \n        } else {\n            fileName = element.data.__name;     \n        }\n    }\n    \n    if(element \u0026\u0026 element.data.__createdAt){\n        fileDate = element.data.__createdAt.format();\n    }\n    if(isTask){\n        taskDate = !element.data.dueDate ? '' : `${element.data.dueDate.format()}`;\n    }\n    \n    setStatusCodeName();\n\n    // responsible\n    let responsibleUserText: string = '';\n\n    if(!isTask){\n        if(element.data.responsible \u0026\u0026 typeof element.data.responsible === 'string'){\n            responsibleUserText = element.data.responsible;\n        }         \n    }\n\n    if(element \u0026\u0026 element.data.line_file_name){\n        fileType = element.data.line_file_name.split('.').slice(-1)[0];\n\n        // if (fileItemArr.length \u003e 1){\n        //     fileType = fileItemArr[fileItemArr.length - 1];\n        // };\n    };\n\n    const stringElement: stringData = {\n        responsibleUserText,\n        fileName,\n        linkNamespace: fileNamespace,\n        linkCode: fileCode,\n        linkId: fileId,\n        fileDate,\n        statusText,\n        statusCode: statusCode,\n        isTask,\n        fileType,\n        taskDate\n    }    \n\n    return stringElement;\n}\n\n// ===============================================================================================================\nfunction showLoaderDocs(){\n    loaderDocsEl.classList.add(\"kedo-loader-docs-wrapper_active\");\n}\nfunction hideLoaderDocs(){\n    loaderDocsEl.classList.remove(\"kedo-loader-docs-wrapper_active\");\n}\n\nfunction getShortString(str: string) {\n    const stringLength = 60;\n    if (str.length \u003c stringLength) return str;\n\n    let resultString = str.slice(0, stringLength)\n    const index = resultString.lastIndexOf(' ')\n    resultString = resultString.slice(0, index) + '...'\n\n    return resultString;\n}\n\nasync function showError(text: string){\n    hideLoaderDocs();\n    kedoDocsWrappper = document.querySelector('.kedo__main-documents-files-wrapper'); \n    kedoDocsWrappper.textContent = text;\n    kedoDocsWrappper.style = \"color: #323232; font-size: 24px;\";\n}\n\nlet title:any;\nlet tasksHead:any;\nlet tasksWrapper:any;\nlet docsHead:any;\nlet docsTodayWrapper:any;\nlet docsWeekWrapper:any;\nlet docsMonthWrapper:any;\n\nfunction showDocsAndTasks(){\n    title.textContent = 'Мои документы';\n\n    tasksHead.classList.remove('kedo__main-documents-table-head_hidden');\n    tasksWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n\n    // docsHead.classList.remove('kedo__main-documents-table-head_hidden')\n    docsTodayWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n    docsWeekWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n    docsMonthWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n}\n\nfunction showTasksOrDocsMobile(){\n    title = document.querySelector('.kedo__main-documents-title')\n    tasksHead = document.querySelector('.kedo__main-documents-table-head_actions')\n    tasksWrapper = document.querySelector('.kedo__main-documents-table-section_actions')\n    // docsHead = document.querySelector('.kedo__main-documents-table-head_docs')\n    docsTodayWrapper = document.querySelector('.kedo__main-documents-table-section_today')\n    docsWeekWrapper = document.querySelector('.kedo__main-documents-table-section_week')\n    docsMonthWrapper = document.querySelector('.kedo__main-documents-table-section_month')\n\n    if(window.innerWidth \u003c 998){\n        if(Context.data.show_tasks === true){            \n            title.textContent = 'Мои задачи';\n\n            tasksHead.classList.add('kedo__main-documents-table-head_hidden');\n            tasksWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n\n            // docsHead.classList.add('kedo__main-documents-table-head_hidden');\n            docsTodayWrapper.classList.add('kedo__main-documents-table-section_hidden');\n            docsWeekWrapper.classList.add('kedo__main-documents-table-section_hidden');\n            docsMonthWrapper.classList.add('kedo__main-documents-table-section_hidden');\n        }\n\n        if(Context.data.show_documents === true){\n            title.textContent = 'Мои документы';\n\n            tasksHead.classList.add('kedo__main-documents-table-head_hidden');\n            tasksWrapper.classList.add('kedo__main-documents-table-section_hidden');\n\n            // docsHead.classList.add('kedo__main-documents-table-head_hidden');\n            docsTodayWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n            docsWeekWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n            docsMonthWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n        }\n    } else {\n        showDocsAndTasks();\n    }\n}\n","clientScriptOptions":{"allowServer":true},"serverScripts":"/* Server scripts module */\n","serverScriptOptions":{}},"dataNamespace":"","dataCode":"","runtime":{"version":1,"clientScripts":"System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server, System) {\n        const pageRefreshTime = 60;\n        const maxEmptyIterationsCount = 3;\n        const sizeChunkOfOldFiles = 2;\n        const countOfOldDocumentsForRender = 20;\n        const host = window.location.host;\n        const currentDate = new Datetime();\n        const date = new Date();\n        const currentDay = date.getDate();\n        const stringHeight = 100;\n        let isFirstRender = true;\n        let isSearchListenersInit = false;\n        let isTaskPopupOpen = false;\n        let isChunkOldFilesLoading = false;\n        let isOldsFilesRendered = false;\n        let documentsBottomPoint = 0;\n        let userApp;\n        let stringOfDocsIds = '';\n        let loaderEl;\n        let loaderDocsEl;\n        let kedoDocsWrappper;\n        let wrapperActions;\n        let wrapperDay;\n        let wrapperWeek;\n        let wrapperMonth;\n        let userDocsAppsWeekOlderArrIteration = [];\n        let userDocsAppsWeekOlderArrChunk = [];\n        let currentStepOfRenderOldFiles = 0;\n        let allOldsFilesRendered = false;\n        let timerCheckFilesDocs;\n        let timerClosePopupDocs;\n        let userTasksForSearch = [];\n        let userTasksForSearchFiltered = [];\n        let userDocsForSearch = [];\n        let userDocsForSearchFiltered = [];\n        const numberOfUnloadedElements = 5000;\n        async function renderPage() {\n            if (Context.data.handlers_running)\n                return;\n            await onHandlersDocuments();\n            if (Context.data.widget_launched)\n                return;\n            if (!Context.data.user_application || !Context.data.current_user) {\n                showError('Пользователь не найден.');\n                return;\n            }\n            ;\n            loaderDocsEl = document.querySelector('.kedo-loader-docs-wrapper');\n            initSearchSection();\n            await getAndRenderDocs();\n            Context.data.widget_launched = true;\n        }\n        async function getAndRenderDocs() {\n            showLoaderDocs();\n            await getFilesDataObject();\n            sortDataObjByDate();\n            getIdsStringOfDocs();\n            allOldsFilesRendered = false;\n            Context.data.all_documents_received = false;\n            await renderDocuments();\n            hideLoaderDocs();\n        }\n        async function offHandlersDocuments() {\n            window.clearInterval(timerCheckFilesDocs);\n            window.clearInterval(timerClosePopupDocs);\n            contentBody.removeEventListener('scroll', handleWindowScroll);\n            Context.data.handlers_running = false;\n        }\n        async function onHandlersDocuments() {\n            let findBody = window.setInterval(() =\u003e {\n                contentBody = document.querySelector('app-page-wrapper');\n                if (!contentBody) {\n                    return;\n                }\n                ;\n                contentBody.addEventListener('scroll', handleWindowScroll);\n                window.clearInterval(findBody);\n            }, 500);\n            timerCheckFilesDocs = window.setInterval(async () =\u003e {\n                await checkUpdateFiles();\n            }, pageRefreshTime * 1000);\n            timerClosePopupDocs = window.setInterval(checkTaskPopup, 2000);\n            Context.data.handlers_running = true;\n        }\n        async function addIntervalCheckFiles() {\n            timerCheckFilesDocs = window.setInterval(async () =\u003e {\n                await checkUpdateFiles();\n            }, pageRefreshTime * 1000);\n        }\n        let searchFilterInput;\n        let searchFilterSelect;\n        let submitBtn;\n        let clearSearchBtn;\n        function initSearchSection() {\n            const searchSection = document.querySelector('.kedo-docs-search');\n            const searchMainInput = document.querySelector('.kedo-docs-search__form-main-text');\n            searchFilterInput = document.querySelector('.kedo-docs-search__form-filter-text');\n            searchFilterSelect = document.querySelector('.kedo-docs-search__form-filter-status-select-string');\n            submitBtn = document.querySelector('.kedo-docs-search__form-filter-button');\n            clearSearchBtn = document.querySelector('.kedo-docs-search__form-main-btn-clear');\n            const kedoSearchMainForm = document.querySelector(\".kedo-docs-search__form-main\");\n            const kedoSearchFilterForm = document.querySelector(\".kedo-docs-search__form-filter\");\n            if (Context.data.show_search_in_my_documents === false) {\n                searchSection.classList.add('kedo-docs-search_hidden');\n            }\n            else {\n                searchSection.classList.remove('kedo-docs-search_hidden');\n            }\n            async function kedoSearchFormSubmitHandler(evt) {\n                evt.preventDefault();\n                showLoaderDocs();\n                if (kedoSearchFilterForm.classList.contains('kedo-docs-search__form-filter_acitve')) {\n                    await searchByFilterData();\n                }\n                else {\n                    await searchByMainData();\n                }\n                clearSearchBtn.classList.remove('kedo-docs-search__form-main-btn-clear_hidden');\n                hideLoaderDocs();\n            }\n            const searchFilterForm = document.querySelector(\".kedo-docs-search__form-filter\");\n            function closeSearchFilter() {\n                searchFilterForm.classList.remove('kedo-docs-search__form-filter_acitve');\n            }\n            function clearSearchFilterForms() {\n                searchFilterInput.value = '';\n                Context.data.filter_date_start = undefined;\n                Context.data.filter_date_end = undefined;\n            }\n            function searchCloseWindowClickHandler(evt) {\n                if (evt.target.closest('.kedo-docs-search__form-main-button')) {\n                    searchFilterForm.classList.toggle('kedo-docs-search__form-filter_acitve');\n                    return;\n                }\n                if (evt.target.closest('.ui-datepicker')) {\n                    return;\n                }\n                if (!evt.target.closest('.kedo-docs-search__form-filter')) {\n                    closeSearchFilter();\n                }\n            }\n            function setConditionsForSearch() {\n                isOldsFilesRendered = false;\n                allOldsFilesRendered = false;\n                currentStepOfRenderOldFiles = 0;\n                wrapperMonth.textContent = '';\n            }\n            async function searchByFilterData() {\n                searchMainInput.value = '';\n                await findAllTasksDocsForSearch();\n                if (searchFilterInput.value) {\n                    await filterSearchDataByString(searchFilterInput.value);\n                }\n                else {\n                    userTasksForSearchFiltered = userTasksForSearch;\n                    userDocsForSearchFiltered = userDocsForSearch;\n                }\n                if (Context.data.filter_date_start) {\n                    await filterSearchDataByStartDate(Context.data.filter_date_start);\n                }\n                if (Context.data.filter_date_end) {\n                    await filterSearchDataByEndDate(Context.data.filter_date_end);\n                }\n                if (searchFilterSelect.value !== \"any\") {\n                    await filterSearchDataByStatuses();\n                }\n                await writeToContextSearchData();\n                setConditionsForSearch();\n                Context.data.all_documents_received = true;\n                window.clearInterval(timerCheckFilesDocs);\n                await renderDocuments();\n            }\n            async function searchByMainData() {\n                if (!searchMainInput.value)\n                    return;\n                clearSearchFilterForms();\n                await findAllTasksDocsForSearch();\n                await filterSearchDataByString(searchMainInput.value);\n                await writeToContextSearchData();\n                setConditionsForSearch();\n                Context.data.all_documents_received = true;\n                window.clearInterval(timerCheckFilesDocs);\n                await renderDocuments();\n            }\n            function setIntpusListeners() {\n                searchFilterInput.addEventListener('input', onInputHandler);\n                searchFilterSelect.addEventListener('change', onInputHandler);\n            }\n            async function clearSearchBtnClickHandler() {\n                clearSearchBtn.classList.add('kedo-docs-search__form-main-btn-clear_hidden');\n                setConditionsForSearch();\n                stringOfDocsIds = '';\n                Context.data.all_documents_received = false;\n                await getAndRenderDocs();\n                await addIntervalCheckFiles();\n            }\n            if (isSearchListenersInit)\n                return;\n            setIntpusListeners();\n            kedoSearchMainForm.addEventListener(\"submit\", kedoSearchFormSubmitHandler);\n            kedoSearchFilterForm.addEventListener(\"submit\", kedoSearchFormSubmitHandler);\n            window.addEventListener('click', searchCloseWindowClickHandler);\n            clearSearchBtn.addEventListener('click', clearSearchBtnClickHandler);\n            isSearchListenersInit = true;\n        }\n        function checkIsFilterEmpty() {\n            if (searchFilterInput.value.length \u003c 2\n                \u0026\u0026 searchFilterSelect.value === \"any\"\n                \u0026\u0026 Context.data.filter_date_start === undefined\n                \u0026\u0026 Context.data.filter_date_end === undefined) {\n                return true;\n            }\n            return false;\n        }\n        function onInputHandler(evt) {\n            const isFilterEmpty = checkIsFilterEmpty();\n            if (!isFilterEmpty) {\n                submitBtn.disabled = false;\n            }\n            else {\n                submitBtn.disabled = true;\n            }\n        }\n        async function findAllTasksDocsForSearch() {\n            Context.data.data_object_tasks = [];\n            Context.data.data_object_files = [];\n            Context.data.data_object_old_files = [];\n            userTasksForSearch = [];\n            userTasksForSearchFiltered = [];\n            userDocsForSearch = [];\n            userDocsForSearchFiltered = [];\n            try {\n                await Promise.all([await getUserTasksForSearch(), await getPersonalDocsForSearch(), await getUserKedoDocsForSearch()]);\n            }\n            catch (err) {\n                console.error(`Promise.all([await getUserTasksForSearch(), await getPersonalDocsForSearch(), await getUserKedoDocsForSearch()]) error: ${err}`);\n            }\n        }\n        async function getUserTasksForSearch() {\n            if (!Context.data.current_user)\n                return;\n            userTasksForSearch = await System.processes._searchTasks()\n                .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.performers.has(Context.data.current_user), g.or(f.state.like(ProcessTaskState.inProgress), f.state.like(ProcessTaskState.assignment))))\n                .size(7000)\n                .all();\n        }\n        async function getPersonalDocsForSearch() {\n            if (!Context.data.user_application)\n                return;\n            let appSearch = Context.fields.app_contract_personnel_documents_new.app.search();\n            let numberOfAllElements = await appSearch.count();\n            const numberOfIterations = Math.ceil(numberOfAllElements / numberOfUnloadedElements);\n            for (let i = 0; i \u003c numberOfIterations; i++) {\n                const firstElementNumber = i * numberOfUnloadedElements;\n                const amountOfElements = (i != numberOfIterations - 1) ? numberOfUnloadedElements : (numberOfAllElements - firstElementNumber);\n                try {\n                    const items = await appSearch\n                        .size(amountOfElements)\n                        .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.staff.link(Context.data.user_application)))\n                        .from(firstElementNumber)\n                        .all();\n                    userDocsForSearch.push(...items);\n                }\n                catch (err) {\n                    console.error(`getPersonalDocsForSearch error: ${err}`);\n                    return;\n                }\n            }\n        }\n        async function getUserKedoDocsForSearch() {\n            if (!Context.data.user_application)\n                return;\n            let appSearch = Context.fields.documents_contract.app.search();\n            let numberOfAllElements = await appSearch.count();\n            const numberOfIterations = Math.ceil(numberOfAllElements / numberOfUnloadedElements);\n            for (let i = 0; i \u003c numberOfIterations; i++) {\n                const firstElementNumber = i * numberOfUnloadedElements;\n                const amountOfElements = (i != numberOfIterations - 1) ? numberOfUnloadedElements : (numberOfAllElements - firstElementNumber);\n                try {\n                    const items = await appSearch\n                        .size(amountOfElements)\n                        .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.staff.link(Context.data.user_application)))\n                        .from(firstElementNumber)\n                        .all();\n                    userDocsForSearch.push(...items);\n                }\n                catch (err) {\n                    console.error(`getUserKedoDocsForSearch error: ${err}`);\n                    return;\n                }\n            }\n        }\n        async function filterSearchDataByString(searchText) {\n            userTasksForSearchFiltered = userTasksForSearch.filter((item) =\u003e {\n                return item.data.__name.toLocaleUpperCase().includes(searchText.toLocaleUpperCase());\n            });\n            userDocsForSearchFiltered = userDocsForSearch.filter((item) =\u003e {\n                return item.data.__name.toLocaleUpperCase().includes(searchText.toLocaleUpperCase());\n            });\n        }\n        async function filterSearchDataByStartDate(date) {\n            userTasksForSearchFiltered = userTasksForSearchFiltered.filter((item) =\u003e {\n                return date.before(item.data.__createdAt);\n            });\n            userDocsForSearchFiltered = userDocsForSearch.filter((item) =\u003e {\n                return date.before(item.data.__createdAt);\n            });\n        }\n        async function filterSearchDataByEndDate(date) {\n            userTasksForSearchFiltered = userTasksForSearchFiltered.filter((item) =\u003e {\n                return date.after(item.data.__createdAt);\n            });\n            userDocsForSearchFiltered = userDocsForSearch.filter((item) =\u003e {\n                return date.after(item.data.__createdAt);\n            });\n        }\n        async function filterSearchDataByStatuses() {\n            function processCheckBoxData(statusCode) {\n                for (let i = 0; i \u003c userDocsForSearchFiltered.length; i++) {\n                    const status = userDocsForSearchFiltered[i].data.line_status.split(';')[0];\n                    if (status === statusCode) {\n                        resultDocsObj.push(userDocsForSearchFiltered[i]);\n                    }\n                }\n            }\n            let resultDocsObj = [];\n            switch (searchFilterSelect.value) {\n                case \"signing\":\n                    processCheckBoxData('signing');\n                    break;\n                case \"agrement\":\n                    processCheckBoxData('agrement');\n                    break;\n                case \"signed\":\n                    processCheckBoxData('signed');\n                    break;\n                case \"new\":\n                    processCheckBoxData('new');\n                    break;\n                case \"removed\":\n                    processCheckBoxData('removed');\n                    break;\n            }\n            userTasksForSearchFiltered = [];\n            userDocsForSearchFiltered = resultDocsObj;\n        }\n        async function writeToContextSearchData() {\n            await Promise.all(userTasksForSearchFiltered.map(async (item) =\u003e {\n                Context.data.data_object_files.push(await getElementObj(item, true));\n            }));\n            await Promise.all(userDocsForSearchFiltered.map(async (item) =\u003e {\n                if (currentDate.addDate(0, 0, -7).after(item.data.__createdAt)) {\n                    Context.data.data_object_old_files.push(await getElementObj(item, false));\n                }\n                else {\n                    Context.data.data_object_files.push(await getElementObj(item, false));\n                }\n            }));\n            sortDataObjByDate();\n            sortOldDataObjByDate();\n        }\n        async function renderDocuments() {\n            if (!wrapperActions || !kedoDocsWrappper) {\n                wrapperActions = document.querySelector('.kedo__main-documents-table-section-list_actions');\n                wrapperDay = document.querySelector('.kedo__main-documents-table-section-list_today');\n                wrapperWeek = document.querySelector('.kedo__main-documents-table-section-list_week');\n                wrapperMonth = document.querySelector('.kedo__main-documents-table-section-list_month');\n                kedoDocsWrappper = document.querySelector('.kedo__main-documents-files-wrapper');\n            }\n            wrapperMonthTop = wrapperMonth.getBoundingClientRect().top;\n            wrapperActions.textContent = '';\n            wrapperDay.textContent = '';\n            wrapperWeek.textContent = '';\n            if (Context.data.data_object_tasks) {\n                for (let i = 0; i \u003c Context.data.data_object_tasks.length; i++) {\n                    renderDocumentString(Context.data.data_object_tasks[i]);\n                }\n                ;\n                if (Context.data.data_object_tasks.length \u003e 0) {\n                }\n            }\n            if (Context.data.data_object_files) {\n                for (let i = 0; i \u003c Context.data.data_object_files.length; i++) {\n                    renderDocumentString(Context.data.data_object_files[i]);\n                }\n                ;\n            }\n            if (Context.data.data_object_old_files \u0026\u0026 !isOldsFilesRendered) {\n                renderStepOfOldFiles();\n            }\n            isOldsFilesRendered = true;\n            setDocswrappersStyles();\n            if (!isFirstRender)\n                return;\n            setDocsWrapperClickHandler();\n            window.addEventListener('resize', showTasksOrDocsMobile);\n            isFirstRender = false;\n        }\n        let contentBody;\n        let timeOut;\n        let wrapperMonthTop;\n        async function handleWindowScroll() {\n            window.clearTimeout(timeOut);\n            if (allOldsFilesRendered) {\n                return;\n            }\n            timeOut = window.setTimeout(async () =\u003e {\n                if (!wrapperMonth.closest('.kedo__main-documents-table-section').classList.contains('kedo__main-documents-table-section_opened'))\n                    return;\n                documentsBottomPoint = wrapperMonthTop + wrapperMonth.offsetHeight;\n                if (documentsBottomPoint - contentBody.scrollTop - window.innerHeight \u003c 150) {\n                    contentBody.scrollBy(0, -100);\n                    try {\n                        await renderStepOfOldFiles();\n                    }\n                    catch (err) {\n                        throw new Error(`renderStepItems error ${err}`);\n                    }\n                    contentBody.scrollBy(0, 100);\n                }\n            }, 200);\n        }\n        async function renderStepOfOldFiles() {\n            if (allOldsFilesRendered)\n                return;\n            if (isChunkOldFilesLoading)\n                return;\n            if ((currentStepOfRenderOldFiles + 1) * countOfOldDocumentsForRender \u003e Context.data.data_object_old_files.length) {\n                for (let i = (currentStepOfRenderOldFiles * countOfOldDocumentsForRender); i \u003c Context.data.data_object_old_files.length; i++) {\n                    renderDocumentString(Context.data.data_object_old_files[i]);\n                }\n                if (Context.data.all_documents_received === true) {\n                    allOldsFilesRendered = true;\n                }\n            }\n            else {\n                for (let i = (currentStepOfRenderOldFiles * countOfOldDocumentsForRender); i \u003c (currentStepOfRenderOldFiles + 1) * countOfOldDocumentsForRender; i++) {\n                    renderDocumentString(Context.data.data_object_old_files[i]);\n                }\n            }\n            currentStepOfRenderOldFiles++;\n            if (wrapperMonth.closest('.kedo__main-documents-table-section').classList.contains('kedo__main-documents-table-section_opened')) {\n                wrapperMonth.style = `max-height: 100%`;\n            }\n            if (allOldsFilesRendered)\n                return;\n            await checkFilesToRenderCount();\n        }\n        async function checkFilesToRenderCount() {\n            if ((Context.data.data_object_old_files.length - currentStepOfRenderOldFiles * countOfOldDocumentsForRender) \u003c countOfOldDocumentsForRender) {\n                if (isChunkOldFilesLoading === false) {\n                    await getChunkOfOldFilesWrapper();\n                }\n            }\n        }\n        function setDocswrappersStyles() {\n            const wrappersArr = document.querySelectorAll('.kedo__main-documents-table-section-list');\n            let openedFilesCount = 0;\n            function clearStyleOfSectionNeedAction() {\n                for (let i = 0; i \u003c wrappersArr.length; i++) {\n                    const sectionNeedAction = wrappersArr[i].closest('.kedo__main-documents-table-section');\n                    sectionNeedAction.classList.remove('kedo__main-documents-table-section_empty');\n                    sectionNeedAction.classList.remove('kedo__main-documents-table-section_opened');\n                }\n            }\n            clearStyleOfSectionNeedAction();\n            const sectionNeedAction = wrappersArr[0].closest('.kedo__main-documents-table-section');\n            const sectionNeedActionHeader = document.querySelector('.kedo__main-documents-table-section-title-wrapper_action');\n            if (wrappersArr[0].children.length === 0) {\n                sectionNeedAction.classList.add('kedo__main-documents-table-section_empty');\n                sectionNeedActionHeader.classList.remove('kedo__main-documents-table-section-title-wrapper_hidden');\n            }\n            else {\n                sectionNeedAction.classList.add('kedo__main-documents-table-section_opened');\n                sectionNeedActionHeader.classList.add('kedo__main-documents-table-section-title-wrapper_hidden');\n                openedFilesCount += wrappersArr[0].children.length;\n                wrappersArr[0].style = `max-height: 100%`;\n            }\n            for (let i = 1; i \u003c wrappersArr.length; i++) {\n                if (wrappersArr[i].children.length === 0) {\n                    wrappersArr[i].closest('.kedo__main-documents-table-section').classList.add('kedo__main-documents-table-section_empty');\n                }\n                else {\n                    if (openedFilesCount \u003c 5) {\n                        wrappersArr[i].closest('.kedo__main-documents-table-section').classList.add('kedo__main-documents-table-section_opened');\n                        openedFilesCount += wrappersArr[i].children.length;\n                        wrappersArr[i].style = `max-height: 100%`;\n                    }\n                }\n            }\n        }\n        function setDocsWrapperClickHandler() {\n            function handleDocsWrapperClick(e) {\n                const section = e.target.closest('.kedo__main-documents-table-section');\n                if (!section) {\n                    return;\n                }\n                if (section.classList.contains('kedo__main-documents-table-section_empty')) {\n                    return;\n                }\n                if (section.classList.contains('kedo__main-documents-table-section_actions')) {\n                    return;\n                }\n                if (e.target.closest('.kedo__main-documents-table-section-list')) {\n                    return;\n                }\n                const filesWrapper = section.querySelector('.kedo__main-documents-table-section-list');\n                if (section.classList.contains('kedo__main-documents-table-section_opened')) {\n                    filesWrapper.style = `max-height: 0px`;\n                    section.classList.remove('kedo__main-documents-table-section_opened');\n                }\n                else {\n                    filesWrapper.style = `max-height: 100%`;\n                    section.classList.add('kedo__main-documents-table-section_opened');\n                }\n            }\n            let docsWrappers = document.querySelectorAll(\".kedo__main-documents-table-section:not(.kedo__main-documents-table-section_empty):not(.kedo__main-documents-table-section_actions)\");\n            docsWrappers.forEach((wrapper) =\u003e {\n                let wrapperTitleArrow = wrapper.querySelector(\".kedo__main-documents-table-section-title-wrapper .kedo__main-documents-table-section-title-arrow\");\n                wrapperTitleArrow.addEventListener(\"click\", (e) =\u003e {\n                    handleDocsWrapperClick(e);\n                });\n            });\n            kedoDocsWrappper.addEventListener('click', handleDocsWrapperClick);\n        }\n        async function checkTaskPopup() {\n            const taskPopup = document.querySelector('body \u003e elma-form \u003e form \u003e elma-complex-popup \u003e div');\n            if (taskPopup) {\n                isTaskPopupOpen = true;\n            }\n            else {\n                if (isTaskPopupOpen) {\n                    isTaskPopupOpen = false;\n                    await checkUpdateFiles();\n                }\n            }\n        }\n        async function checkUpdateFiles() {\n            const oldIdsStringOfDocs = stringOfDocsIds;\n            await getFilesDataObjectForUpdate();\n            sortDataObjByDate();\n            getIdsStringOfDocs();\n            if (!stringOfDocsIds)\n                return;\n            if (oldIdsStringOfDocs !== stringOfDocsIds) {\n                showLoaderDocs();\n                allOldsFilesRendered = false;\n                Context.data.all_documents_received = false;\n                await renderDocuments();\n                hideLoaderDocs();\n            }\n        }\n        async function renderDocumentString(data) {\n            function setStatusStyle() {\n                if (data.statusCode === 'new') {\n                    statusEl.classList.add('kedo__main-documents-table-string-status_default');\n                    return;\n                }\n                if (data.statusCode === 'agrement') {\n                    statusEl.classList.add('kedo__main-documents-table-string-status_agrement');\n                    return;\n                }\n                if (data.statusCode === 'signing') {\n                    statusEl.classList.add('kedo__main-documents-table-string-status_on-sign');\n                    return;\n                }\n                if (data.statusCode === 'signed') {\n                    statusEl.classList.add('kedo__main-documents-table-string-status_signed');\n                    return;\n                }\n                if (data.statusCode === 'removed') {\n                    statusEl.classList.add('kedo__main-documents-table-string-status_cancel');\n                    return;\n                }\n                if (data.statusCode.length \u003e 0) {\n                    statusEl.classList.add('kedo__main-documents-table-string-status_default');\n                }\n            }\n            const fileString = document.querySelector('.kedo__main-documents-table-section-list-item-template').content.cloneNode(true);\n            let fileName = 'Файл';\n            if (data.fileName) {\n                fileName = data.fileName;\n            }\n            const nameWrapperEl = fileString.querySelector('.kedo__main-documents-table-string-file-name-wrapper');\n            const imgEl = fileString.querySelector('.kedo__main-documents-table-string-file-name-img');\n            const linkEl = fileString.querySelector('.kedo__main-documents-table-string-file-name');\n            const dateEl = fileString.querySelector('.kedo__main-documents-table-string-date');\n            const statusEl = fileString.querySelector('.kedo__main-documents-table-string-status');\n            if (data.isTask) {\n                nameWrapperEl.classList.add('kedo__main-documents-table-string-file-name-wrapper_active');\n            }\n            let fileType = \"\";\n            if (!data.fileType) {\n                let fileNameArr = data.fileName.split(\".\").slice(-1)[0];\n                if (fileNameArr.length \u003e 1) {\n                    fileType = fileNameArr[fileNameArr.length - 1];\n                }\n                ;\n            }\n            ;\n            imgEl.classList.add('doc-img_pdf');\n            linkEl.textContent = fileName;\n            if (data.isTask) {\n                linkEl.href = `https://${host}/_portal/kedo_ext/user_page(p:task/${data.linkId})`;\n            }\n            else {\n                if (data.linkCode \u0026\u0026 data.linkId \u0026\u0026 data.linkNamespace) {\n                    linkEl.href = `https://${host}/_portal/kedo_ext/user_page(p:item/${data.linkNamespace}/${data.linkCode}/${data.linkId})`;\n                }\n                else {\n                    linkEl.href = `https://${host}/_portal/kedo_ext/user_page`;\n                }\n            }\n            let fileDay = undefined;\n            let dateText = '';\n            let date = undefined;\n            if (data.isTask) {\n                date = !data.taskDate ? undefined : new Date(data.taskDate);\n            }\n            else {\n                date = !data.fileDate ? undefined : new Date(data.fileDate);\n            }\n            if (data.fileDate) {\n                fileDay = (new Date(data.fileDate)).getDate();\n            }\n            if (date) {\n                dateText = `${date.toLocaleString('ru-RU', { year: '2-digit', month: 'numeric', day: 'numeric', hour: 'numeric', minute: 'numeric' })}`;\n            }\n            dateEl.textContent = dateText;\n            let responsiblePerson = '';\n            if (data.responsibleUserText) {\n                responsiblePerson = data.responsibleUserText;\n            }\n            statusEl.textContent = '';\n            if (data.statusText) {\n                statusEl.textContent = data.statusText;\n                setStatusStyle();\n            }\n            else {\n                statusEl.textContent = '';\n            }\n            if (data.isTask === true) {\n                wrapperActions.append(fileString);\n                return;\n            }\n            if (data.fileDate \u003c currentDate.addDate(0, 0, -7).format()) {\n                wrapperMonth.append(fileString);\n                return;\n            }\n            if (Number(fileDay) !== Number(currentDay)) {\n                wrapperWeek.append(fileString);\n                return;\n            }\n            wrapperDay.append(fileString);\n        }\n        function sortDataObjByDate() {\n            Context.data.data_object_files = Context.data.data_object_files.sort((obj1, obj2) =\u003e {\n                if (obj2.fileDate \u003e obj1.fileDate) {\n                    return 1;\n                }\n                if (obj2.fileDate \u003c obj1.fileDate) {\n                    return -1;\n                }\n                return 0;\n            });\n            Context.data.data_object_tasks = Context.data.data_object_tasks.sort((obj1, obj2) =\u003e {\n                if (obj2.fileDate \u003e obj1.fileDate) {\n                    return 1;\n                }\n                if (obj2.fileDate \u003c obj1.fileDate) {\n                    return -1;\n                }\n                return 0;\n            });\n        }\n        function sortOldDataObjByDate() {\n            Context.data.data_object_old_files = Context.data.data_object_old_files.sort((obj1, obj2) =\u003e {\n                if (obj2.fileDate \u003e obj1.fileDate) {\n                    return 1;\n                }\n                if (obj2.fileDate \u003c obj1.fileDate) {\n                    return -1;\n                }\n                return 0;\n            });\n        }\n        function getIdsStringOfDocs() {\n            stringOfDocsIds = '';\n            if (Context.data.data_object_tasks) {\n                for (let i = 0; i \u003c Context.data.data_object_tasks.length; i++) {\n                    stringOfDocsIds += Context.data.data_object_tasks[i].linkId;\n                    stringOfDocsIds += Context.data.data_object_tasks[i].statusCode;\n                }\n            }\n            if (Context.data.data_object_files) {\n                for (let i = 0; i \u003c Context.data.data_object_files.length; i++) {\n                    stringOfDocsIds += Context.data.data_object_files[i].linkId;\n                    stringOfDocsIds += Context.data.data_object_files[i].statusCode;\n                }\n            }\n        }\n        async function getFilesDataObject() {\n            Context.data.data_object_files = [];\n            Context.data.data_object_old_files = [];\n            Context.data.data_object_tasks = [];\n            Context.data.chunk_acquisition_iteration_number = 0;\n            Context.data.number_of_empty_iterations = 0;\n            try {\n                await Promise.all([await getUserTasks(), await getPersonalDocs(), await getUserKedoDocs(), await getChunkOfOldFilesWrapper()]);\n            }\n            catch (err) {\n                console.error(`Promise.all([await getPersonalDocs(), await getUserKedoDocs()]) error: ${err}`);\n            }\n        }\n        async function getFilesDataObjectForUpdate() {\n            Context.data.data_object_files = [];\n            Context.data.data_object_tasks = [];\n            try {\n                await Promise.all([await getUserTasks(), await getPersonalDocs(), await getUserKedoDocs()]);\n            }\n            catch (err) {\n                console.error(`Promise.all([await getPersonalDocs(), await getUserKedoDocs()]) error: ${err}`);\n            }\n        }\n        async function getChunkOfOldFilesWrapper() {\n            if (isChunkOldFilesLoading)\n                return;\n            showLoaderDocs();\n            isChunkOldFilesLoading = true;\n            userDocsAppsWeekOlderArrChunk = [];\n            await getChunkOfOldFiles();\n            Context.data.data_object_old_files.push(...userDocsAppsWeekOlderArrChunk);\n            isChunkOldFilesLoading = false;\n            hideLoaderDocs();\n        }\n        async function getChunkOfOldFiles() {\n            if (Context.data.all_documents_received === true)\n                return;\n            if (Context.data.number_of_empty_iterations === maxEmptyIterationsCount) {\n                Context.data.all_documents_received = true;\n                return;\n            }\n            userDocsAppsWeekOlderArrIteration = [];\n            let startDay = 0;\n            if (Context.data.chunk_acquisition_iteration_number === 0) {\n                startDay = -7;\n            }\n            try {\n                await Promise.all([await getChunkOldPersonalDocs(startDay), await getChunkOldUserKedoDocs(startDay)]);\n            }\n            catch (err) {\n                console.error(`Promise.all([await getChunkOldPersonalDocs(startDay), await getChunkOldUserKedoDocs(startDay)]) error: ${err}`);\n            }\n            Context.data.chunk_acquisition_iteration_number++;\n            userDocsAppsWeekOlderArrIteration = userDocsAppsWeekOlderArrIteration.sort((obj1, obj2) =\u003e {\n                if (obj2.fileDate \u003e obj1.fileDate) {\n                    return 1;\n                }\n                if (obj2.fileDate \u003c obj1.fileDate) {\n                    return -1;\n                }\n                return 0;\n            });\n            userDocsAppsWeekOlderArrChunk.push(...userDocsAppsWeekOlderArrIteration);\n            if (userDocsAppsWeekOlderArrChunk.length \u003c countOfOldDocumentsForRender) {\n                Context.data.number_of_empty_iterations++;\n                await getChunkOfOldFiles();\n            }\n            else {\n                Context.data.number_of_empty_iterations = 0;\n            }\n        }\n        async function getChunkOldPersonalDocs(startDay) {\n            let personalDocsAppsArr = [];\n            if (!Context.data.user_application)\n                return;\n            personalDocsAppsArr = await Context.fields.app_contract_personnel_documents_new.app\n                .search()\n                .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.staff.link(Context.data.user_application), f.__createdAt.lt(currentDate.addDate(0, -(Context.data.chunk_acquisition_iteration_number * sizeChunkOfOldFiles), startDay)), f.__createdAt.gt(currentDate.addDate(0, -((Context.data.chunk_acquisition_iteration_number + 1) * sizeChunkOfOldFiles), 0))))\n                .size(7000)\n                .all();\n            if (personalDocsAppsArr.length \u003e 0) {\n                await Promise.all(personalDocsAppsArr.map(async (item) =\u003e {\n                    userDocsAppsWeekOlderArrIteration.push(await getElementObj(item, false));\n                }));\n            }\n        }\n        async function getChunkOldUserKedoDocs(startDay) {\n            let kedoDocsArr = [];\n            if (!Context.data.user_application)\n                return;\n            kedoDocsArr = await Context.fields.documents_contract.app\n                .search()\n                .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.staff.link(Context.data.user_application), f.__createdAt.lt(currentDate.addDate(0, -(Context.data.chunk_acquisition_iteration_number * sizeChunkOfOldFiles), startDay)), f.__createdAt.gt(currentDate.addDate(0, -((Context.data.chunk_acquisition_iteration_number + 1) * sizeChunkOfOldFiles), 0))))\n                .size(7000)\n                .all();\n            if (kedoDocsArr) {\n                await Promise.all(kedoDocsArr.map(async (item) =\u003e {\n                    userDocsAppsWeekOlderArrIteration.push(await getElementObj(item, false));\n                }));\n            }\n        }\n        async function getUserTasks() {\n            let userTasks = [];\n            if (!Context.data.current_user)\n                return;\n            userTasks = await System.processes._searchTasks()\n                .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.performers.has(Context.data.current_user), g.or(f.state.like(ProcessTaskState.inProgress), f.state.like(ProcessTaskState.assignment))))\n                .size(7000)\n                .all();\n            if (userTasks.length \u003e 0) {\n                await Promise.all(userTasks.map(async (item) =\u003e {\n                    Context.data.data_object_tasks.push(await getElementObj(item, true));\n                }));\n            }\n        }\n        async function getPersonalDocs() {\n            let personalDocsAppsArr = [];\n            if (!Context.data.user_application)\n                return;\n            personalDocsAppsArr = await Context.fields.app_contract_personnel_documents_new.app\n                .search()\n                .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.staff.link(Context.data.user_application), f.__createdAt.gt(currentDate.addDate(0, 0, -7))))\n                .size(10000)\n                .all();\n            if (personalDocsAppsArr.length \u003e 0) {\n                await Promise.all(personalDocsAppsArr.map(async (item) =\u003e {\n                    Context.data.data_object_files.push(await getElementObj(item, false));\n                }));\n            }\n        }\n        async function getUserKedoDocs() {\n            let kedoDocsArr = [];\n            if (!Context.data.user_application)\n                return;\n            kedoDocsArr = await Context.fields.documents_contract.app\n                .search()\n                .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.staff.link(Context.data.user_application), f.__createdAt.gt(currentDate.addDate(0, 0, -7))))\n                .size(7000)\n                .all();\n            console.log(kedoDocsArr);\n            if (kedoDocsArr) {\n                await Promise.all(kedoDocsArr.map(async (item) =\u003e {\n                    Context.data.data_object_files.push(await getElementObj(item, false));\n                }));\n            }\n        }\n        async function getElementObj(element, isTask) {\n            let fileCode = '';\n            let fileId = '';\n            let fileNamespace = '';\n            let docapp = undefined;\n            let statusText = '';\n            let statusCode = '';\n            let fileType = '';\n            let fileName = '';\n            let fileDate = '';\n            let taskDate = '';\n            function setStatusCodeName() {\n                if (isTask) {\n                    switch (element.data.state) {\n                        case ProcessTaskState.cancel:\n                            statusCode = \"removed\";\n                            statusText = \"Отменена\";\n                            break;\n                        case ProcessTaskState.assignment:\n                            statusCode = \"agrement\";\n                            statusText = \"На распределении\";\n                            break;\n                        case ProcessTaskState.closed:\n                            statusCode = \"signed\";\n                            statusText = \"Выполнена\";\n                            break;\n                        case ProcessTaskState.inProgress:\n                            statusCode = \"agrement\";\n                            statusText = \"В процессе\";\n                            break;\n                    }\n                    ;\n                }\n                else {\n                    if (!element.data.line_status) {\n                        statusCode = \"not_implemented\";\n                        statusText = \"Не определён\";\n                        return;\n                    }\n                    ;\n                    const codeNameArr = element.data.line_status.split(';');\n                    statusCode = codeNameArr[0];\n                    if (codeNameArr.length \u003e 1) {\n                        statusText = codeNameArr[1];\n                    }\n                    else {\n                        switch (true) {\n                            case element.data.line_status.toUpperCase().includes(\"ПОДПИС\"):\n                                statusCode = \"signed\";\n                                statusText = \"Подписан\";\n                                break;\n                            case element.data.line_status.toUpperCase().includes(\"СОГЛАСОВ\"):\n                                statusCode = \"signed\";\n                                statusText = \"Согласован\";\n                                break;\n                            case element.data.line_status.toUpperCase().includes(\"НА ПОДПИС\"):\n                                statusCode = \"signing\";\n                                statusText = \"На подписании\";\n                                break;\n                            case element.data.line_status.toUpperCase().includes(\"НА СОГЛАС\"):\n                                statusCode = \"agrement\";\n                                statusText = \"На согласовании\";\n                                break;\n                        }\n                    }\n                }\n            }\n            function setDocappData() {\n                if (!element.data) {\n                    return;\n                }\n                if (!element.data.__sourceRef) {\n                    return;\n                }\n                if (element.data.__sourceRef.code) {\n                    fileCode = element.data.__sourceRef.code;\n                }\n                if (element.data.__sourceRef.id) {\n                    fileId = element.data.__sourceRef.id;\n                }\n                if (element.data.__sourceRef.namespace) {\n                    fileNamespace = element.data.__sourceRef.namespace;\n                }\n            }\n            async function getDocappByItem() {\n                let doc;\n                if (element.data.__item) {\n                    try {\n                        doc = await element.data.__item.fetch();\n                    }\n                    catch (err) {\n                        console.error(`element.data.__item.fetch error: ${err}`);\n                    }\n                }\n                if (!doc)\n                    return;\n                if (doc.fields.linked_order \u0026\u0026 doc.data.linked_order) {\n                    try {\n                        docapp = await doc.data.linked_order.fetch();\n                    }\n                    catch (err) {\n                        console.error(`doc.data.linked_order.fetch error: ${err}`);\n                    }\n                }\n                if (!docapp \u0026\u0026 !!doc) {\n                    docapp = doc;\n                }\n            }\n            if (isTask) {\n                fileCode = element.code;\n                fileNamespace = element.namespace;\n                fileId = element.id;\n            }\n            else {\n                setDocappData();\n            }\n            if (isTask) {\n                await getDocappByItem();\n            }\n            if (element \u0026\u0026 element.data.__name) {\n                if (isTask \u0026\u0026 docapp) {\n                    fileName = element.data.__name;\n                }\n                else {\n                    fileName = element.data.__name;\n                }\n            }\n            if (element \u0026\u0026 element.data.__createdAt) {\n                fileDate = element.data.__createdAt.format();\n            }\n            if (isTask) {\n                taskDate = !element.data.dueDate ? '' : `${element.data.dueDate.format()}`;\n            }\n            setStatusCodeName();\n            let responsibleUserText = '';\n            if (!isTask) {\n                if (element.data.responsible \u0026\u0026 typeof element.data.responsible === 'string') {\n                    responsibleUserText = element.data.responsible;\n                }\n            }\n            if (element \u0026\u0026 element.data.line_file_name) {\n                fileType = element.data.line_file_name.split('.').slice(-1)[0];\n            }\n            ;\n            const stringElement = {\n                responsibleUserText,\n                fileName,\n                linkNamespace: fileNamespace,\n                linkCode: fileCode,\n                linkId: fileId,\n                fileDate,\n                statusText,\n                statusCode: statusCode,\n                isTask,\n                fileType,\n                taskDate\n            };\n            return stringElement;\n        }\n        function showLoaderDocs() {\n            loaderDocsEl.classList.add(\"kedo-loader-docs-wrapper_active\");\n        }\n        function hideLoaderDocs() {\n            loaderDocsEl.classList.remove(\"kedo-loader-docs-wrapper_active\");\n        }\n        function getShortString(str) {\n            const stringLength = 60;\n            if (str.length \u003c stringLength)\n                return str;\n            let resultString = str.slice(0, stringLength);\n            const index = resultString.lastIndexOf(' ');\n            resultString = resultString.slice(0, index) + '...';\n            return resultString;\n        }\n        async function showError(text) {\n            hideLoaderDocs();\n            kedoDocsWrappper = document.querySelector('.kedo__main-documents-files-wrapper');\n            kedoDocsWrappper.textContent = text;\n            kedoDocsWrappper.style = \"color: #323232; font-size: 24px;\";\n        }\n        let title;\n        let tasksHead;\n        let tasksWrapper;\n        let docsHead;\n        let docsTodayWrapper;\n        let docsWeekWrapper;\n        let docsMonthWrapper;\n        function showDocsAndTasks() {\n            title.textContent = 'Мои документы';\n            tasksHead.classList.remove('kedo__main-documents-table-head_hidden');\n            tasksWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n            docsTodayWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n            docsWeekWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n            docsMonthWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n        }\n        function showTasksOrDocsMobile() {\n            title = document.querySelector('.kedo__main-documents-title');\n            tasksHead = document.querySelector('.kedo__main-documents-table-head_actions');\n            tasksWrapper = document.querySelector('.kedo__main-documents-table-section_actions');\n            docsTodayWrapper = document.querySelector('.kedo__main-documents-table-section_today');\n            docsWeekWrapper = document.querySelector('.kedo__main-documents-table-section_week');\n            docsMonthWrapper = document.querySelector('.kedo__main-documents-table-section_month');\n            if (window.innerWidth \u003c 998) {\n                if (Context.data.show_tasks === true) {\n                    title.textContent = 'Мои задачи';\n                    tasksHead.classList.add('kedo__main-documents-table-head_hidden');\n                    tasksWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n                    docsTodayWrapper.classList.add('kedo__main-documents-table-section_hidden');\n                    docsWeekWrapper.classList.add('kedo__main-documents-table-section_hidden');\n                    docsMonthWrapper.classList.add('kedo__main-documents-table-section_hidden');\n                }\n                if (Context.data.show_documents === true) {\n                    title.textContent = 'Мои документы';\n                    tasksHead.classList.add('kedo__main-documents-table-head_hidden');\n                    tasksWrapper.classList.add('kedo__main-documents-table-section_hidden');\n                    docsTodayWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n                    docsWeekWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n                    docsMonthWrapper.classList.remove('kedo__main-documents-table-section_hidden');\n                }\n            }\n            else {\n                showDocsAndTasks();\n            }\n        }\n        return {\n            renderPage,\n            getAndRenderDocs,\n            offHandlersDocuments,\n            onHandlersDocuments,\n            addIntervalCheckFiles,\n            initSearchSection,\n            checkIsFilterEmpty,\n            onInputHandler,\n            findAllTasksDocsForSearch,\n            getUserTasksForSearch,\n            getPersonalDocsForSearch,\n            getUserKedoDocsForSearch,\n            filterSearchDataByString,\n            filterSearchDataByStartDate,\n            filterSearchDataByEndDate,\n            filterSearchDataByStatuses,\n            writeToContextSearchData,\n            renderDocuments,\n            handleWindowScroll,\n            renderStepOfOldFiles,\n            checkFilesToRenderCount,\n            setDocswrappersStyles,\n            setDocsWrapperClickHandler,\n            checkTaskPopup,\n            checkUpdateFiles,\n            renderDocumentString,\n            sortDataObjByDate,\n            sortOldDataObjByDate,\n            getIdsStringOfDocs,\n            getFilesDataObject,\n            getFilesDataObjectForUpdate,\n            getChunkOfOldFilesWrapper,\n            getChunkOfOldFiles,\n            getChunkOldPersonalDocs,\n            getChunkOldUserKedoDocs,\n            getUserTasks,\n            getPersonalDocs,\n            getUserKedoDocs,\n            getElementObj,\n            showLoaderDocs,\n            hideLoaderDocs,\n            getShortString,\n            showError,\n            showDocsAndTasks,\n            showTasksOrDocsMobile\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n","clientFnDeclarations":[{"name":"renderPage","parameters":[],"type":"[object Object]"},{"name":"getAndRenderDocs","parameters":[],"type":""},{"name":"offHandlersDocuments","parameters":[],"type":""},{"name":"onHandlersDocuments","parameters":[],"type":""},{"name":"addIntervalCheckFiles","parameters":[],"type":""},{"name":"initSearchSection","parameters":[],"type":""},{"name":"checkIsFilterEmpty","parameters":[],"type":""},{"name":"onInputHandler","parameters":[{"name":"[object Object]","type":"[object Object]"}],"type":""},{"name":"findAllTasksDocsForSearch","parameters":[],"type":""},{"name":"getUserTasksForSearch","parameters":[],"type":""},{"name":"getPersonalDocsForSearch","parameters":[],"type":""},{"name":"getUserKedoDocsForSearch","parameters":[],"type":""},{"name":"filterSearchDataByString","parameters":[{"name":"[object Object]","type":"[object Object]"}],"type":""},{"name":"filterSearchDataByStartDate","parameters":[{"name":"[object Object]","type":"[object Object]"}],"type":""},{"name":"filterSearchDataByEndDate","parameters":[{"name":"[object Object]","type":"[object Object]"}],"type":""},{"name":"filterSearchDataByStatuses","parameters":[],"type":""},{"name":"writeToContextSearchData","parameters":[],"type":""},{"name":"renderDocuments","parameters":[],"type":""},{"name":"handleWindowScroll","parameters":[],"type":""},{"name":"renderStepOfOldFiles","parameters":[],"type":""},{"name":"checkFilesToRenderCount","parameters":[],"type":""},{"name":"setDocswrappersStyles","parameters":[],"type":""},{"name":"setDocsWrapperClickHandler","parameters":[],"type":""},{"name":"checkTaskPopup","parameters":[],"type":""},{"name":"checkUpdateFiles","parameters":[],"type":""},{"name":"renderDocumentString","parameters":[{"name":"[object Object]","type":"[object Object]"}],"type":""},{"name":"sortDataObjByDate","parameters":[],"type":""},{"name":"sortOldDataObjByDate","parameters":[],"type":""},{"name":"getIdsStringOfDocs","parameters":[],"type":""},{"name":"getFilesDataObject","parameters":[],"type":"[object Object]"},{"name":"getFilesDataObjectForUpdate","parameters":[],"type":"[object Object]"},{"name":"getChunkOfOldFilesWrapper","parameters":[],"type":""},{"name":"getChunkOfOldFiles","parameters":[],"type":""},{"name":"getChunkOldPersonalDocs","parameters":[{"name":"[object Object]","type":"[object Object]"}],"type":"[object Object]"},{"name":"getChunkOldUserKedoDocs","parameters":[{"name":"[object Object]","type":"[object Object]"}],"type":"[object Object]"},{"name":"getUserTasks","parameters":[],"type":""},{"name":"getPersonalDocs","parameters":[],"type":"[object Object]"},{"name":"getUserKedoDocs","parameters":[],"type":"[object Object]"},{"name":"getElementObj","parameters":[{"name":"[object Object]","type":"[object Object]"},{"name":"[object Object]","type":"[object Object]"}],"type":""},{"name":"showLoaderDocs","parameters":[],"type":""},{"name":"hideLoaderDocs","parameters":[],"type":""},{"name":"getShortString","parameters":[{"name":"[object Object]","type":"[object Object]"}],"type":""},{"name":"showError","parameters":[{"name":"[object Object]","type":"[object Object]"}],"type":""},{"name":"showDocsAndTasks","parameters":[],"type":""},{"name":"showTasksOrDocsMobile","parameters":[],"type":""}]},"__createdAt":"2024-06-04T09:39:26.301622084Z","__createdBy":"59e0911f-230a-4b6d-becf-6b302a91977a","__updatedAt":"2024-06-04T09:45:43.480392825Z","__updatedBy":"59e0911f-230a-4b6d-becf-6b302a91977a","__deletedAt":null}
