{"__id":"018c8758-49d0-7e71-8b6b-6f251d87e392","namespace":"personnel_documents.free_from","code":"form_4297bd86-b8e2-46b1-8a35-8f0594c23e36","__name":"Проверить и отработать заявление","description":"","extensionZoneCode":"","sort":0,"category":"00000000-0000-0000-0000-000000000000","version":3,"hidden":true,"draft":false,"readonly":false,"descriptor":{"types":["form"],"template":{"id":"d81b831f-b7ee-4d63-b625-af30ed18ca9e","descriptor":"item-form-complex-popup","descriptorVersion":2,"values":{"systemFunctions":{"validate":{"kind":"Function","name":"validation","type":"client"}},"formType":"task-form","formGroup":{"path":["context"]}},"content":{"[footer]":[{"id":"31979bac-00bd-4123-a901-9d14190c8dde","descriptor":"buttons-panel","values":{"buttons":{"path":["actionButtons"]}}}],"[content]":[{"id":"c18e9118-cda2-49f4-ae50-5414c9b970b2","descriptor":"modal-body","values":{"shadow":true},"content":{"":[{"id":"8f326e39-a9cf-4ba3-8449-3ae328ee5080","descriptor":"tabset","values":{"__isConstValues":[],"__renderContentAsync":false},"content":{"":[{"id":"0cb2b779-d67b-4af4-b531-f8d47d85957d","descriptor":"tab","values":{"title":"Информация","__isConstValues":[],"__renderContentAsync":false,"__renderContentOnDemand":false},"content":{"":[{"id":"c03c5ae5-a698-4b41-82f0-92115887fa7c","descriptor":"modal-body","content":{"":[{"id":"dcdd3e4e-0c49-483b-87c2-8c782a8890f0","descriptor":"dynamic-form","values":{"form":{"path":["context"]},"fields":{"path":["fields"]}}},{"id":"b1db90eb-e04c-4a33-8914-68a4ef42e7f3","descriptor":"dynamic-form-row","values":{"tooltip":null,"required":{"path":["text_required"]},"__baseURL":"","hideEmpty":false,"bindingMode":false,"__relativeURL":"","showDisplayName":true,"control":{"path":["context","text_response"]},"__outlet":"","__readOnly":null,"__isConstValues":["showCreateItem","tooltip","displayName","showCreateItem","showCreateItem","tooltip","tooltip","displayName","displayName","showCreateItem","showCreateItem","tooltip","tooltip","displayName","displayName","showCreateItem","tooltip","displayName","showCreateItem","showCreateItem","tooltip","tooltip","displayName","displayName","showCreateItem","tooltip","displayName"]}},{"id":"42b91b25-34b1-428e-9927-9aabafe38410","descriptor":"dynamic-form-row","values":{"onChangeValue":{"kind":"Function","name":"changeFieldsFile","type":"client"},"__isConstValues":[],"showDisplayName":true,"tooltip":null,"__baseURL":"","hideEmpty":false,"bindingMode":false,"__relativeURL":"","control":{"path":["plus_file"]},"__outlet":"","required":true,"__readOnly":null}},{"id":"c80d806c-7914-4dcf-bf6f-ee36810daf07","descriptor":"dynamic-form-row","values":{"control":{"path":["context","data_file"]},"tooltip":"Внимание! Для конвертации в формат PDF/A-1 необходимо приложить файл в формате .docx или .xlsx ","required":{"path":["plus_file"]},"hideEmpty":false,"__isConstValues":["showCreateItem","tooltip","displayName","showCreateItem","showCreateItem","tooltip","tooltip","displayName","displayName","showCreateItem","showCreateItem","tooltip","tooltip","displayName","displayName","showCreateItem","tooltip","displayName","showCreateItem","showCreateItem","tooltip","tooltip","displayName","displayName","showCreateItem","tooltip","displayName"],"showDisplayName":true,"__hidden":{"path":["plus_file"],"modifier":"not"},"__readOnly":null,"bindingMode":false}},{"id":"5d71ba62-57c0-4bdc-a1ae-718e2855b89f","descriptor":"dynamic-form-row","values":{"required":{"path":["plus_file"]},"__baseURL":"","hideEmpty":false,"__readOnly":null,"bindingMode":false,"__relativeURL":"","onChangeValue":{"kind":"Function","name":"sign_required","type":"client"},"__hidden":{"path":["plus_file"],"modifier":"not"},"showDisplayName":true,"__isConstValues":["showCreateItem","tooltip","displayName","showCreateItem","showCreateItem","tooltip","tooltip","displayName","displayName","showCreateItem","showCreateItem","tooltip","tooltip","displayName","displayName","showCreateItem","tooltip","displayName","showCreateItem","showCreateItem","tooltip","tooltip","displayName","displayName","showCreateItem","tooltip","displayName"],"tooltip":null,"__outlet":"","control":{"path":["context","sign_required"]}}},{"id":"992837e9-40cc-468d-be43-5c1007098885","descriptor":"dynamic-form-row","values":{"control":{"path":["context","overdue_date"]},"tooltip":null,"__hidden":{"path":["hide_date"],"modifier":"not"},"__outlet":"","required":{"path":["context","sign_required"]},"hideEmpty":false,"bindingMode":false,"__baseURL":"","__readOnly":null,"__relativeURL":"","__isConstValues":[],"showDisplayName":true}}]}}]}},{"id":"b7c2000b-6160-485d-85e7-065103170e95","descriptor":"tab","values":{"title":"Файл заявления","__isConstValues":[],"__renderContentAsync":false,"__renderContentOnDemand":false},"content":{"":[{"id":"cf2c7c37-e33c-479e-8775-253a86684563","descriptor":"modal-body","content":{"":[{"id":"a87e5232-61bf-42ff-9e8e-bdec91eaf5b6","descriptor":"file-preview-download-panel","values":{"__isConstValues":[],"fieldFormControl":{"path":["context","free_from","__file"]}}},{"id":"90cf57d8-a2a5-47c9-add8-ff56afd13941","descriptor":"file-preview","values":{"fieldFormControl":{"path":["context","free_from","__file"]},"__isConstValues":[]}}]}}]}}]}}]}}],"[sidebar]":[{"id":"39d7757a-529f-4526-98f3-fddc66becf85","descriptor":"sidebar-widget","content":{"":[{"id":"abe4b782-6e2d-49cc-a57e-81b636422ee5","descriptor":"target-widget","values":{"context":{"path":["context"]}}}]}},{"id":"231b371a-64ae-4b61-8014-cba6da318ac9","descriptor":"sidebar-widget","content":{"":[{"id":"5e39b91d-aea4-467e-862f-0f8766eb44df","descriptor":"linked-item","values":{"context":{"path":["context"]}}}]}},{"id":"a4469de0-d7f3-11ec-9d64-0242ac120002","descriptor":"sidebar-widget","content":{"":[{"id":"3ead7c41-6dfa-4144-80da-2bfb5f0ccf59","descriptor":"item-reminder","values":{"formGroup":{"path":["context"]}}}]}},{"id":"56d1d0e8-aa83-4cdd-ae43-294b26ad4d04","descriptor":"sidebar-widget","content":{"":[{"id":"e1525e34-14ba-456b-b703-f407945c01e0","descriptor":"item-tasks","descriptorVersion":4,"values":{"formGroup":{"path":["context"]},"itemModel":{"path":["itemModel"]}}}]}},{"id":"eef018f2-1d3a-4600-a19d-791733b28b5e","descriptor":"sidebar-widget","content":{"":[{"id":"e0a17dec-603a-461a-becf-861637630584","descriptor":"messages-target","values":{"target":{"path":["target"]}}}]}}],"[formInfoPanel]":[{"id":"88da75a7-9808-437f-af43-a690cdab4f17","descriptor":"validation-info-block","values":{"__validateResult":{"path":["context","__validateResult"]}}}],"[headerControls]":[{"id":"475aa008-aaff-402f-8de2-408bae1f1928","descriptor":"task-percent-widget","values":{"task":{"path":["task"]}}},{"id":"702d9c59-77ae-4dd5-b71a-a5fe7b58858f","descriptor":"extension-zone-toolbar-widget","values":{"item":{"path":["__itemRef"]}}},{"id":"f7b11c79-4267-4f5b-a002-dd629d549682","descriptor":"process-item-map","values":{"skipRulesCheck":true,"task":{"path":["task"]}}},{"id":"ff2500ee-6573-49cd-a9e8-2d5c93350f26","descriptor":"button","values":{"label":"bpm.tasks.item@menu","action":{"path":["menuAction"]},"runProcessSettings":{"kind":"","settings":{"code":"","field":"","binding":null,"namespace":""}},"createAppItemSettings":{"kind":"","settings":{"code":"","field":"","binding":null,"namespace":""}},"icon":"menu_vertical","view":"icon"}}],"[headerCustomization]":[]}},"fields":[{"code":"sign_required","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":false,"calcByFormula":false,"formula":"","data":{},"view":{"name":"sign_required","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}},{"code":"plus_file","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":false,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Приложить файл","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}},{"code":"hide_date","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"hide_date","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}},{"code":"text_required","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":true,"calcByFormula":false,"formula":"","data":{},"view":{"name":"text_required","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}}],"fieldVisibilityConditions":{"hide_date":{"enabled":false,"conditions":[]},"plus_file":{"enabled":false,"conditions":[]},"sign_required":{"enabled":false,"conditions":[]},"text_required":{"enabled":false,"conditions":[]}},"scriptOptions":{},"clientScripts":"/* Client scripts module */\n\nasync function onInit(): Promise\u003cvoid\u003e {\n    const currentDate = new Datetime();\n\n    Context.fields.overdue_date.data.setFilter((f,g) =\u003e g.and(\n        f.gte(currentDate)\n    ));\n}\n\nasync function validation(): Promise\u003cValidationResult\u003e {\n    const result = new ValidationResult();\n    let app = await Context.data.free_from!.fetch();\n    if (!Context.data.text_response \u0026\u0026 !Context.data.data_file) {\n        result.addMessage('Заполните один из вариантов ответа')\n    }\n    return result\n}\n\nasync function sign_required(): Promise\u003cvoid\u003e {\n    if (Context.data.data_file)\n        ViewContext.data.sign_required = true;\n    else\n        ViewContext.data.sign_required = false;\n\n    if (Context.data.sign_required == true) {\n        ViewContext.data.hide_date = true;\n    } else {\n        ViewContext.data.hide_date = false;\n    }\n}\n\nasync function changeFieldsFile(): Promise\u003cvoid\u003e {\n    if (ViewContext.data.plus_file == false) {\n        Context.data.data_file = undefined;\n        Context.data.sign_required = false;\n        Context.data.overdue_date = undefined;\n        ViewContext.data.hide_date = false;\n        ViewContext.data.text_required = true;\n    } else {\n        ViewContext.data.text_required = false;\n    }\n}\n","clientScriptOptions":{"allowServer":true},"serverScripts":"/* Server scripts module */\n","serverScriptOptions":{},"dataFieldCode":"context"},"dataNamespace":"personnel_documents.free_from","dataCode":"_process_free_form_application_proccesing","runtime":{"version":1,"clientScripts":"System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server) {\n        async function onInit() {\n            const currentDate = new Datetime();\n            Context.fields.overdue_date.data.setFilter((f, g) =\u003e g.and(f.gte(currentDate)));\n        }\n        async function validation() {\n            const result = new ValidationResult();\n            let app = await Context.data.free_from.fetch();\n            if (!Context.data.text_response \u0026\u0026 !Context.data.data_file) {\n                result.addMessage('Заполните один из вариантов ответа');\n            }\n            return result;\n        }\n        async function sign_required() {\n            if (Context.data.data_file)\n                ViewContext.data.sign_required = true;\n            else\n                ViewContext.data.sign_required = false;\n            if (Context.data.sign_required == true) {\n                ViewContext.data.hide_date = true;\n            }\n            else {\n                ViewContext.data.hide_date = false;\n            }\n        }\n        async function changeFieldsFile() {\n            if (ViewContext.data.plus_file == false) {\n                Context.data.data_file = undefined;\n                Context.data.sign_required = false;\n                Context.data.overdue_date = undefined;\n                ViewContext.data.hide_date = false;\n                ViewContext.data.text_required = true;\n            }\n            else {\n                ViewContext.data.text_required = false;\n            }\n        }\n        return {\n            onInit,\n            validation,\n            sign_required,\n            changeFieldsFile\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n","clientFnDeclarations":[{"name":"onInit","parameters":[],"type":"[object Object]"},{"name":"validation","parameters":[],"type":"[object Object]"},{"name":"sign_required","parameters":[],"type":"[object Object]"},{"name":"changeFieldsFile","parameters":[],"type":"[object Object]"}]},"__createdAt":"2023-12-20T13:09:19.437380396Z","__createdBy":"7303b866-4220-4086-a09e-348a76b12c73","__updatedAt":"2024-02-14T11:08:54.789943259Z","__updatedBy":"7303b866-4220-4086-a09e-348a76b12c73","__deletedAt":null}
