{"__id":"018fb8c3-45c1-74c2-974b-94f48eacaeaf","namespace":"kedo.transfer_application","code":"_view","__name":"Форма просмотра","description":"","extensionZoneCode":"","sort":0,"category":"00000000-0000-0000-0000-000000000000","version":5,"hidden":false,"draft":false,"readonly":false,"descriptor":{"types":["form"],"template":{"id":"8f0f3e3f-097c-4668-80ee-3c93114e16a7","descriptor":"item-form-complex-popup","descriptorVersion":2,"values":{"formGroup":{"path":["item"]},"systemFunctions":{}},"content":{"[headerUpperTitle]":[{"id":"7fe87b6f-803f-40af-ae04-2c46f1919291","descriptor":"app-navigation-crumbs-tree-widget","values":{"item":{"path":["itemModel"]},"application":{"path":["application"]}}}],"[headerCustomization]":[],"[footer]":[{"id":"e22a6137-56e4-4427-89ff-91b3fc6774e9","descriptor":"zone-content","values":{"zoneCode":"[footer]"}}],"[content]":[{"id":"25cc10fe-0419-4be1-8bda-266c5657800c","descriptor":"modal-body","content":{"":[{"id":"a77021e0-45a6-489e-a88b-459b5e14aaf9","descriptor":"elma-info-block","values":{"__outlet":"","__renderContentOnDemand":false,"__hidden":{"path":["item","is_cancellation_process"],"modifier":"not"},"typeEnum":[{"code":"danger","name":"Ошибка (красный)"}],"__baseURL":"","__relativeURL":"","__isConstValues":[],"__renderContentAsync":false,"text":"Внимание! По данному процессу запущен процесс отмены. До завершения процесса рекомендуем не выполнять данную задачу."},"content":{"":[]}},{"id":"d2674a53-40db-4907-9ce1-6b8003b06765","descriptor":"tabset","values":{"__isConstValues":[],"__renderContentAsync":false},"content":{"":[{"id":"3607b79d-8ea8-4bff-81c0-0ab4d8b2cb5e","descriptor":"tab","values":{"__hidden":{"path":["show_tab"],"modifier":"not"},"__isConstValues":[],"__renderContentAsync":false,"__renderContentOnDemand":false,"title":"Файл документа"},"content":{"":[{"id":"0dbf4799-8d64-4520-b845-e2bbfbdb0fe9","descriptor":"file-preview-download-panel","values":{"file":{"path":["fileModel"]}}},{"id":"b961beb6-e05d-47f1-8745-bfe8958faa9f","descriptor":"file-preview","values":{"file":{"path":["fileModel"]},"fieldFormControl":{"path":["item","__file"]}}}]}},{"id":"25630b24-129b-4fc2-838e-0a7142c5365d","descriptor":"tab","values":{"__renderContentAsync":false,"__renderContentOnDemand":false,"title":"Информация по заявке","__isConstValues":[]},"content":{"":[{"id":"42a4b96e-0250-4db1-be1a-d27d7dac4e01","descriptor":"modal-body","content":{"":[{"id":"2aea09ab-2d71-49fb-ab49-ba6500599bca","descriptor":"dynamic-form","values":{"form":{"path":["item"]},"fields":{"path":["fields"]},"__isConstValues":[]}}]}}]}},{"id":"32094ca1-e694-4bc5-8bc6-ff68ee37195e","descriptor":"tab","values":{"title":"Приказы","__hidden":{"path":["view_order"],"modifier":"not"},"__outlet":"","__baseURL":"","__relativeURL":"","__isConstValues":[],"__renderContentAsync":false,"__renderContentOnDemand":false},"content":{"":[{"id":"2f1c22f8-d5fb-4718-90e2-cd52c31c4189","descriptor":"modal-body","content":{"":[{"id":"f0d2aff1-1eae-476c-a589-8a35b54f61bb","descriptor":"linked-list","values":{"linkedFieldCode":"application_transfer","showReloadButton":false,"filterFieldsCodes":[],"linkedApplication":{"code":"order_for_transfer","kind":"CollectionLink","namespace":"kedo"},"displayFieldsCodes":["__name","__createdAt","__status","kedo_status"],"item":{"path":["itemModel"]}}}]}}]}},{"id":"f20ce47c-dafb-41e8-bc0e-06ddfe32b574","descriptor":"tab","values":{"__renderContentAsync":false,"__renderContentOnDemand":false,"title":"ДС","__hidden":{"path":["view_additional_agreement"],"modifier":"not"},"__outlet":"","__baseURL":"","__relativeURL":"","__isConstValues":[]},"content":{"":[{"id":"ec6775c8-e0d2-4d1a-b680-d9e626bd7eba","descriptor":"modal-body","content":{"":[{"id":"9e73500b-69f0-407c-9de4-f4003c3dca78","descriptor":"linked-list","values":{"item":{"path":["itemModel"]},"linkedFieldCode":"transfer_application","showReloadButton":false,"filterFieldsCodes":[],"linkedApplication":{"code":"additional_transfer_agreement","kind":"CollectionLink","namespace":"kedo"},"displayFieldsCodes":["__name","__createdAt","__status","kedo_status"]}}]}}]}},{"id":"562876a7-df3f-4677-8b62-089b98c34488","descriptor":"tab","values":{"__baseURL":"","__relativeURL":"","__isConstValues":[],"__renderContentAsync":false,"__renderContentOnDemand":false,"title":"Согласия","__hidden":{"path":["view_approve"],"modifier":"not"},"__outlet":""},"content":{"":[{"id":"0736520c-15ca-4a06-9d6a-dc2df7f06342","descriptor":"modal-body","content":{"":[{"id":"2ff954dd-ddf5-4bd9-9eae-5a09f52aedcb","descriptor":"linked-list","values":{"item":{"path":["itemModel"]},"linkedFieldCode":"transfer_application","showReloadButton":false,"filterFieldsCodes":[],"linkedApplication":{"code":"transfer_approve","kind":"CollectionLink","namespace":"kedo"},"displayFieldsCodes":["__name","__createdAt","__status","kedo_status"]}}]}}]}}]}}]}}],"[sidebar]":[{"id":"310f1761-ea65-4db3-bf8b-067866b3405a","descriptor":"sidebar-widget","values":{"title":"Статус КЭДО","__outlet":"","__baseURL":"","__relativeURL":"","__isConstValues":[],"__renderContentAsync":false,"__renderContentOnDemand":false},"content":{"":[{"id":"e769cc47-2151-4a80-afa7-3038ae9bb2ca","descriptor":"kedo.statuses@kedo_status_widget","descriptorVersion":1,"values":{"__isConstValues":[],"__renderContentOnDemand":false,"app":{"path":["__itemRef"]},"__outlet":"","__baseURL":"","kedo_status":{"path":["item","kedo_status"]},"__relativeURL":""}}]}},{"id":"badf65a8-6bb4-4e2e-b4c7-a8a73587f7f0","descriptor":"sidebar-widget","values":{"title":"Статус подписи","__renderContentAsync":false},"content":{"":[{"id":"7b7df184-efe3-4aa1-a8db-27b12ad64f40","descriptor":"app-sign-status","values":{"__isConstValues":[],"itemModel":{"path":["itemModel"]}}}]}},{"id":"1c6ef61f-6d0e-41d1-8a1f-211bc70f3d92","descriptor":"sidebar-widget","content":{"":[{"id":"3a3d29c6-7fca-42eb-95f8-74789b8b7f22","descriptor":"docflow-approval-lists","values":{"item":{"path":["itemModel"]}}}]}},{"id":"8326be58-15ff-4903-8ab0-e20b08b8306b","descriptor":"sidebar-widget","content":{"":[{"id":"3a3d29c6-7fca-42eb-95f8-74789b8b7f22","descriptor":"docflow-inform-lists","values":{"item":{"path":["itemModel"]}}}]}},{"id":"00103f82-2f58-4cbd-bc81-07e341784f59","descriptor":"sidebar-widget","values":{"__renderContentOnDemand":false,"__hidden":true,"__outlet":"","__baseURL":"","__relativeURL":"","__isConstValues":[],"__renderContentAsync":false},"content":{"":[{"id":"4cc755bb-f919-4ff7-8e47-5c59047dad62","descriptor":"item-status","values":{"item":{"path":["itemModel"]},"application":{"path":["application"]}}}]}},{"id":"b45c32b3-b4df-4de4-9f80-10ae7bb5b385","descriptor":"sidebar-widget","values":{"title":"Информация по документу","__isConstValues":[],"__renderContentAsync":false},"content":{"":[{"id":"ab16e9a9-8466-4242-b8fb-7e957d5f4e5e","descriptor":"dynamic-form-row","values":{"bindingMode":false,"__relativeURL":"","showDisplayName":false,"__baseURL":"","hideEmpty":false,"__outlet":"","required":false,"__readOnly":true,"__isConstValues":[],"control":{"path":["item","xml_file"]},"tooltip":null}},{"id":"ab4e0ac6-6d76-433b-91c6-3076366af84e","descriptor":"dynamic-form-row","values":{"__isConstValues":[],"showDisplayName":true,"control":{"path":["item","comment"]},"tooltip":null,"required":false,"hideEmpty":false,"__readOnly":true,"bindingMode":false}}]}},{"id":"184d2de7-2df8-493f-841a-4e0ddbb8060e","descriptor":"sidebar-widget","content":{"":[{"id":"d23366cd-07b0-4ae4-bb2c-73a203ec7786","descriptor":"item-tasks","descriptorVersion":4,"values":{"formGroup":{"path":["item"]},"itemModel":{"path":["itemModel"]}}}]}},{"id":"1e70306c-b439-46a0-af74-f63ae5a8b063","descriptor":"sidebar-widget","content":{"":[{"id":"4dad6c56-a886-42c6-989b-63e2ec75c677","descriptor":"disk-file-versions-widget","values":{"item":{"path":["itemModel"]},"afterChangeCurrentVersionAction":{"path":["versionListAction"]},"file":{"path":["fileModel"]}}}]}},{"id":"7f68300d-5ce0-4eb3-9e75-dea882c541a1","descriptor":"sidebar-widget","content":{"":[{"id":"05c90d54-b3dc-4d28-8b84-f32878377a61","descriptor":"messages-target","values":{"target":{"path":["target"]}}}]}},{"id":"1745457b-81b9-4739-8726-9156a54337c3","descriptor":"sidebar-widget","values":{"__renderContentAsync":false,"__renderContentOnDemand":false,"title":"Задачи связанных элементов","__outlet":"","__baseURL":"","__relativeURL":"","__isConstValues":[]},"content":{"":[{"id":"0b12717a-e19c-49cb-a18f-bb6497d390f3","descriptor":"kedo@linked_tasks","descriptorVersion":4,"values":{"__outlet":"","item_ref":{"path":["__itemRef"]},"__baseURL":"","__relativeURL":"","__isConstValues":[],"__renderContentOnDemand":false}}]}}],"[headerControls]":[{"id":"0418a119-d87d-43fb-9a61-455aa5160568","descriptor":"button","values":{"createAppItemSettings":{"kind":"","settings":{"code":"","field":"","binding":null,"namespace":""}},"icon":"system_add_round","view":"icon","action":{"path":["addVersionAction"]},"tooltip":"Добавить версию","runProcessSettings":{"kind":"","settings":{"code":"","field":"","binding":null,"namespace":""}}}},{"id":"5a72dd17-31f2-4412-a056-a474e01ac17c","descriptor":"button","values":{"icon":"send_approve","view":"icon","action":{"path":["docflowSendAction"]},"tooltip":"Отправить","runProcessSettings":{"kind":"","settings":{"code":"","field":"","binding":null,"namespace":""}},"createAppItemSettings":{"kind":"","settings":{"code":"","field":"","binding":null,"namespace":""}}}},{"id":"b0237e26-4b99-4ce8-9d6f-a78b44c9263b","descriptor":"button","values":{"label":"Права доступа","action":{"path":["accessSettings"]},"runProcessSettings":{"kind":"","settings":{"code":"","field":"","binding":null,"namespace":""}},"createAppItemSettings":{"kind":"","settings":{"code":"","field":"","binding":null,"namespace":""}},"icon":"lock","view":"icon"}},{"id":"17a52e8f-7486-4031-bd01-5838fcfc8f70","descriptor":"extension-zone-toolbar-widget","values":{"item":{"path":["__itemRef"]}}}]}},"fields":[{"code":"show_tab","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"show_tab","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}},{"code":"view_order","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Показать приказ","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"},"input":true,"output":true}},{"code":"view_approve","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Показать согласие","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"},"input":true,"output":true}},{"code":"view_additional_agreement","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Показать ДС","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"},"input":true,"output":true}}],"fieldVisibilityConditions":{"show_tab":{"enabled":false,"conditions":[]},"view_order":{"enabled":false,"conditions":[]},"view_approve":{"enabled":false,"conditions":[]},"view_additional_agreement":{"enabled":false,"conditions":[]}},"scriptOptions":{"allowNamespace":true},"clientScripts":"\ndeclare const document: any;\n\nasync function onInit(): Promise\u003cvoid\u003e {\n    if (Context.data.kedo_status) {\n        const status = await Context.data.kedo_status.fetch();\n        const button_cancel_documents = document.querySelectorAll('.btn-danger');\n        for (let button of button_cancel_documents) {\n            if (button.innerText.includes('Отменить документы')) {\n                if (Context.data.is_cancellation_process === true || status.data.code == \"signing_application\") {\n                    button.hidden = true;\n                } else {\n                    button.hidden = false;\n                }\n            }\n        }\n    }\n\n    if (Context.data.__file) {\n        ViewContext.data.show_tab = true;\n    } else {\n        ViewContext.data.show_tab = false;\n    }\n\n    if (Context.data.linked_order) {\n        ViewContext.data.view_order = true;\n    } else {\n        ViewContext.data.view_order = false;\n    }\n\n    if (Context.data.transfer_approve) {\n        ViewContext.data.view_approve = true;\n    } else {\n        ViewContext.data.view_approve = false;\n    }\n    const app = await Application.search().where(f =\u003e f.__id.eq(Context.data.__id)).first();\n    const additional_transfer_agreement = await Namespace.app.additional_transfer_agreement.search().where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.transfer_application.link(app!))).first();\n    if (additional_transfer_agreement) {\n        ViewContext.data.view_additional_agreement = true;\n    } else {\n        ViewContext.data.view_additional_agreement = false;\n    }\n}","clientScriptOptions":{"allowNamespace":true,"allowServer":true},"serverScripts":"/* Server scripts module */\n","serverScriptOptions":{"allowNamespace":true},"widgetZones":[{"code":"[footer]"}],"dataFieldCode":"item"},"dataNamespace":"kedo","dataCode":"transfer_application","runtime":{"version":1,"clientScripts":"System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server, System) {\n        async function onInit() {\n            if (Context.data.kedo_status) {\n                const status = await Context.data.kedo_status.fetch();\n                const button_cancel_documents = document.querySelectorAll('.btn-danger');\n                for (let button of button_cancel_documents) {\n                    if (button.innerText.includes('Отменить документы')) {\n                        if (Context.data.is_cancellation_process === true || status.data.code == \"signing_application\") {\n                            button.hidden = true;\n                        }\n                        else {\n                            button.hidden = false;\n                        }\n                    }\n                }\n            }\n            if (Context.data.__file) {\n                ViewContext.data.show_tab = true;\n            }\n            else {\n                ViewContext.data.show_tab = false;\n            }\n            if (Context.data.linked_order) {\n                ViewContext.data.view_order = true;\n            }\n            else {\n                ViewContext.data.view_order = false;\n            }\n            if (Context.data.transfer_approve) {\n                ViewContext.data.view_approve = true;\n            }\n            else {\n                ViewContext.data.view_approve = false;\n            }\n            const app = await Application.search().where(f =\u003e f.__id.eq(Context.data.__id)).first();\n            const additional_transfer_agreement = await Namespace.app.additional_transfer_agreement.search().where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.transfer_application.link(app))).first();\n            if (additional_transfer_agreement) {\n                ViewContext.data.view_additional_agreement = true;\n            }\n            else {\n                ViewContext.data.view_additional_agreement = false;\n            }\n        }\n        return {\n            onInit\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n","clientFnDeclarations":[{"name":"onInit","parameters":[],"type":"[object Object]"}]},"__createdAt":"2024-05-27T06:35:56.222094307Z","__createdBy":"59e0911f-230a-4b6d-becf-6b302a91977a","__updatedAt":"2024-06-05T06:13:52.895103416Z","__updatedBy":"59e0911f-230a-4b6d-becf-6b302a91977a","__deletedAt":null}
