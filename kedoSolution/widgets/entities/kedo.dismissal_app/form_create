{"__id":"018fb8c3-86db-767e-9255-54429a68c026","namespace":"kedo.dismissal_app","code":"form_create","__name":"Форма создания","description":"","extensionZoneCode":"","sort":0,"category":"00000000-0000-0000-0000-000000000000","version":6,"hidden":false,"draft":false,"readonly":false,"descriptor":{"types":["form"],"template":{"id":"dc97fd36-739a-4270-b5de-a2fdfdb878a1","descriptor":"item-form-complex-popup","descriptorVersion":2,"values":{"formGroup":{"path":["item"]},"systemFunctions":{}},"content":{"[footer]":[{"id":"098655f7-00f0-411d-940e-78b1056e9875","descriptor":"zone-content","values":{"zoneCode":"[footer]"}}],"[content]":[{"id":"c18e9118-cda2-49f4-ae50-5414c9b970b2","descriptor":"modal-body","values":{"shadow":true},"content":{"":[{"id":"8ba9415b-6221-4a06-b7b3-781c777cc1bc","descriptor":"kedo@forget_me_not_widget","descriptorVersion":1,"values":{"__isConstValues":[],"__renderContentOnDemand":false,"__outlet":"","__baseURL":"","element_name":"заявки на увольнение","__relativeURL":""}},{"id":"3b48c1ba-c1c5-458c-b698-1d2228b0f2f9","descriptor":"dynamic-form-row","values":{"hideEmpty":false,"__relativeURL":"","showDisplayName":true,"__outlet":"","tooltip":null,"required":true,"__baseURL":"","__readOnly":null,"bindingMode":false,"showCreateItem":false,"__isConstValues":[],"control":{"path":["item","staff"]}}},{"id":"d62ee04e-2ab0-445e-b883-d70469e01e9f","descriptor":"kedo.employment_directory@employments_list_widget","descriptorVersion":1,"values":{"employment_placement_name_visible":true,"staff":{"path":["item","staff"]},"__outlet":"","__baseURL":"","employment_placement":{"path":["item","employment_placement"]},"__renderContentOnDemand":false,"__styles":"width: 100%","__relativeURL":"","__isConstValues":[],"employment_placement_required":true}},{"id":"9ff1ca50-9269-456f-893c-44b9eb35293c","descriptor":"dynamic-form-row","values":{"tooltip":null,"__outlet":"","required":true,"__baseURL":"","showDisplayName":true,"control":{"path":["item","date_of_dismissal"]},"hideEmpty":false,"__readOnly":null,"bindingMode":false,"__relativeURL":"","__isConstValues":[]}},{"id":"577eb9e4-bdb7-42cd-9d3e-d5e54bda840a","descriptor":"dynamic-form-row","values":{"__readOnly":null,"control":{"path":["item","reason_for_leaving"]},"required":true,"__baseURL":"","bindingMode":false,"__relativeURL":"","__isConstValues":[],"showDisplayName":true,"tooltip":null,"__outlet":"","hideEmpty":false}}]}}],"[sidebar]":[{"id":"662f08da-59da-4112-9ae1-763785ab8bf2","descriptor":"sidebar-widget","values":{"title":"Инструкция","__outlet":"","__baseURL":"","__relativeURL":"","__isConstValues":[],"__renderContentAsync":false},"content":{"":[{"id":"4c6c0db1-2d51-4cb1-b9bd-87ad55048db6","descriptor":"html","descriptorVersion":3,"values":{"html":"\u003cp\u003eДанная заявка запускает процесс увольнения и создаёт печатный образ заявления по увольнение по собственному желанию. Заявление можно скачать для подписания или подписать в электронном виде (если есть согласие на КЭДО). На основании заявление будет сформирован приказ, который нужно подписать обязательно в бумажном виде - дождитесь соответствующей задачи. Помните, что вы имеете право отозвать заявление на увольнение вплоть до последнего рабочего дня.\u003c/p\u003e"}}]}}],"[headerControls]":[],"[headerCustomization]":[]}},"fieldVisibilityConditions":{},"scriptOptions":{},"clientScripts":"/* Client scripts module */\nasync function onInit(): Promise\u003cvoid\u003e\n{\n    const current_user = await System.users.getCurrentUser();\n\n    Context.data.staff = await Context.fields.staff.app.search()\n        .where((f, g) =\u003e g.and(\n            f.__deletedAt.eq(null),\n            f.ext_user.eq(current_user),\n            f.__status.eq(Context.fields.staff.app.fields.__status.variants.signed_documents)\n        ))\n        .first();\n}\n\nasync function validate(): Promise\u003cValidationResult\u003e {\n    const result = new ValidationResult();\n\n    if (new TDate().after(Context.data.date_of_dismissal!) \u0026\u0026 new TDate().format() !== Context.data.date_of_dismissal!.format()) {\n        result.addContextError('date_of_dismissal', \"Дата увольнения не может быть раньше текущей даты\")\n    }\n\n    if (!Context.data.employment_placement) {\n        result.addContextError(\"employment_placement\", \"Укажите место занятости, по которому требуется оформить заявку\");\n    }\n\n    return result;\n}\n","clientScriptOptions":{"allowServer":true},"serverScripts":"/* Server scripts module */\n","serverScriptOptions":{},"widgetZones":[{"code":"[footer]"}],"dataFieldCode":"item"},"dataNamespace":"kedo","dataCode":"dismissal_app","runtime":{"version":1,"clientScripts":"System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server, System) {\n        async function onInit() {\n            const current_user = await System.users.getCurrentUser();\n            Context.data.staff = await Context.fields.staff.app.search()\n                .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.ext_user.eq(current_user), f.__status.eq(Context.fields.staff.app.fields.__status.variants.signed_documents)))\n                .first();\n        }\n        async function validate() {\n            const result = new ValidationResult();\n            if (new TDate().after(Context.data.date_of_dismissal) \u0026\u0026 new TDate().format() !== Context.data.date_of_dismissal.format()) {\n                result.addContextError('date_of_dismissal', \"Дата увольнения не может быть раньше текущей даты\");\n            }\n            if (!Context.data.employment_placement) {\n                result.addContextError(\"employment_placement\", \"Укажите место занятости, по которому требуется оформить заявку\");\n            }\n            return result;\n        }\n        return {\n            onInit,\n            validate\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n","clientFnDeclarations":[{"name":"onInit","parameters":[],"type":"[object Object]"},{"name":"validate","parameters":[],"type":"[object Object]"}]},"__createdAt":"2024-05-27T06:36:12.890421785Z","__createdBy":"59e0911f-230a-4b6d-becf-6b302a91977a","__updatedAt":"2024-06-05T06:47:55.310594638Z","__updatedBy":"59e0911f-230a-4b6d-becf-6b302a91977a","__deletedAt":null}
