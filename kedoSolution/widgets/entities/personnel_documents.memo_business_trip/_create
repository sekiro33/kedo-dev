{"__id":"018c8758-486b-7e59-b73a-98e7958a9b77","namespace":"personnel_documents.memo_business_trip","code":"_create","__name":"Форма создания","description":"","extensionZoneCode":"","sort":0,"category":"00000000-0000-0000-0000-000000000000","version":5,"hidden":false,"draft":false,"readonly":false,"descriptor":{"types":["form"],"template":{"id":"bb9af795-289a-4dbb-8cfe-fed5b14a697b","descriptor":"item-form-complex-popup","descriptorVersion":2,"values":{"formGroup":{"path":["item"]},"systemFunctions":{},"sidebarAvailable":true,"__renderContentAsync":false},"content":{"[content]":[{"id":"7d7bd35a-d521-4c08-9d55-d7c3a74932cc","descriptor":"modal-body","content":{"":[{"id":"d39c4bc2-665c-4a57-b3d7-11fceeb37fac","descriptor":"row","values":{"__renderContentAsync":false},"content":{"":[{"id":"62429884-55df-4987-bd63-bfe26dcc7ca6","descriptor":"column","content":{"":[{"id":"a2baa0eb-e8a0-4d44-bbef-b6240c44daf0","descriptor":"ext_7fe3de7d-f459-4f75-940c-271c6e9ea1ed@staff_position_list_widget","descriptorVersion":28,"values":{"__relativeURL":"","__isConstValues":["__isConstValues","__styles"],"employment_placement":{"path":["item","employment_placement"]},"staff":{"path":["item","staff"]},"__outlet":"","__styles":"width: 100%","__baseURL":"","show_type":[{"code":"simple","name":"Простое"}]}},{"id":"6bfa5cb3-d451-41d7-94fb-65b68162ef38","descriptor":"dynamic-form-row","values":{"required":true,"__readOnly":null,"bindingMode":false,"onChangeValue":{"kind":"Function","name":"duration_calculate","type":"client"},"showDisplayName":true,"control":{"path":["item","start_date"]},"tooltip":null}},{"id":"61d44540-1c95-43fd-a600-bdfa57dbde68","descriptor":"dynamic-form-row","values":{"tooltip":null,"required":true,"__readOnly":null,"bindingMode":false,"onChangeValue":{"kind":"Function","name":"duration_calculate","type":"client"},"showDisplayName":true,"control":{"path":["item","end_date"]}}},{"id":"c03d305f-3ade-446f-8a8c-8a49b41c28b4","descriptor":"dynamic-form-row","values":{"control":{"path":["item","place_of_business_trip"]},"tooltip":null,"required":true,"__readOnly":null,"bindingMode":false,"showDisplayName":true}},{"id":"fc45ceb2-a7de-451c-94d6-3a1baabd703f","descriptor":"dynamic-form-row","values":{"control":{"path":["item","mission_trip"]},"tooltip":null,"required":true,"__readOnly":null,"bindingMode":false,"showDisplayName":true}},{"id":"4c3aa3bc-d7f1-4b2e-9acf-4dc62546172e","descriptor":"dynamic-form-row","values":{"tooltip":null,"required":true,"hideEmpty":false,"__readOnly":null,"bindingMode":false,"showDisplayName":true,"control":{"path":["item","tasks_trip"]}}}]}}]}}]}}],"[sidebar]":[{"id":"d66aba74-334f-4f04-b5d9-b0dc06e96ac0","descriptor":"sidebar-widget","content":{"":[{"id":"d5e76f29-e820-414a-b254-a7cf0b2d951b","descriptor":"user-guide","values":{"userGuide":"Для запуска процесса согласования командировки необходимо выполнить следующие действия. Выбрать свою организацию из списка, указать ответственного, который будет отвечать за процесс командировки и согласования выдачи денежных средств. Также необходимо выбрать даты командировки и цель поездки, включая задачи. В завершение, необходимо указать, требуется ли выдача денежных средств."}}]}},{"id":"b8e51b0f-99fa-4c7d-a757-1cccf3b21c88","descriptor":"sidebar-widget","content":{"":[{"id":"1e00d3ec-0b52-4912-98da-3c146f7d0c8f","descriptor":"document-reserve-widget","values":{"application":{"path":["application"]}}}]}}],"[headerControls]":[],"[headerCustomization]":[],"[footer]":[{"id":"f7e1cf24-d1b0-4d1c-aad5-7f486b3d4818","descriptor":"zone-content","values":{"zoneCode":"[footer]"}}]}},"fields":[{"code":"money_is_required","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":true,"calcByFormula":false,"formula":"","data":{},"view":{"name":"money_is_required","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}},{"code":"money_is_need","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":false,"calcByFormula":false,"formula":"","data":{},"view":{"name":"money_is_need","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}},{"code":"staff_hide","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":true,"calcByFormula":false,"formula":"","data":{},"view":{"name":"staff_hide","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}}],"fieldVisibilityConditions":{"staff_hide":{"enabled":false,"conditions":[]},"money_is_need":{"enabled":false,"conditions":[]},"money_is_required":{"enabled":false,"conditions":[]}},"scriptOptions":{},"clientScripts":"// /* Client scripts module */\n async function onInit(): Promise\u003cvoid\u003e {\n     ViewContext.data.staff_hide = true;\n    let user = await System.users.getCurrentUser();\n     let is_ext_user: boolean | undefined = undefined;\n     Context.data.staff = await Context.fields.staff.app.search().where(f =\u003e f.ext_user.eq(user)).first();\n  /*  if (!Context.data.staff) {\n         ViewContext.data.staff_hide = false;\n    }\n    let date = new Date();\n    date.getTimezoneOffset();\n     Context.data.start_line = (-(date.getTimezoneOffset() / 60)).toString();*/\n }\n// async function duration_calculate(): Promise\u003cvoid\u003e {\n//     const time = new TTime(0, 0, 0, 0);\n//     const start = Context.data.start_date? Context.data.start_date.asDatetime(time): undefined ;\n//     const end = Context.data.end_date? Context.data.end_date.asDatetime(time): undefined\n//     if (start \u0026\u0026 end) {\n//         const duration = end.sub(start);\n//         Context.data.duration = Math.floor(duration.hours / 24)+1;\n//     }\n// }\n","clientScriptOptions":{"allowServer":true},"serverScripts":"// /* Server scripts module */\n// async function search_entity():Promise\u003cvoid\u003e\n// {\n//     ViewContext.data.money_is_need = false;\n//     ViewContext.data.money_is_required = true;\n//     ViewContext.data.staff_hide = true;\n\n//     let user = await System.users.getCurrentUser();\n//     Context.data.staff = await Context.fields.staff.app.search().where(f =\u003e f.email.eq(user.data.email!)).first();\n//     if (Context.data.staff) {\n//         Context.data.organization = (await Context.data.staff.fetch()).data.entity!;\n//         ViewContext.data.money_is_required = true;\n//         ViewContext.data.money_is_required = false;\n//     }\n//     else {\n//         ViewContext.data.staff_hide = false;\n//     }\n// }","serverScriptOptions":{},"widgetZones":[{"code":"[footer]"}],"dataFieldCode":"item"},"dataNamespace":"personnel_documents","dataCode":"memo_business_trip","runtime":{"version":1,"clientScripts":"System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server, System) {\n        async function onInit() {\n            ViewContext.data.staff_hide = true;\n            let user = await System.users.getCurrentUser();\n            let is_ext_user = undefined;\n            Context.data.staff = await Context.fields.staff.app.search().where(f =\u003e f.ext_user.eq(user)).first();\n        }\n        return {\n            onInit\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n","clientFnDeclarations":[{"name":"onInit","parameters":[],"type":"[object Object]"}]},"__createdAt":"2023-12-20T13:09:19.082332231Z","__createdBy":"7303b866-4220-4086-a09e-348a76b12c73","__updatedAt":"2024-02-14T11:08:59.374304243Z","__updatedBy":"7303b866-4220-4086-a09e-348a76b12c73","__deletedAt":null}
