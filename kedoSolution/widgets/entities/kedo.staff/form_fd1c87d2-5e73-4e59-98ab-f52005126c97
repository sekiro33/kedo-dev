{"__id":"018c8757-f8b2-7a23-ac6b-b07bc0b9286b","namespace":"kedo.staff","code":"form_fd1c87d2-5e73-4e59-98ab-f52005126c97","__name":"Проверка документов для трудоустройства","description":"","extensionZoneCode":"","sort":0,"category":"00000000-0000-0000-0000-000000000000","version":4,"hidden":true,"draft":false,"readonly":false,"descriptor":{"types":["form"],"template":{"id":"e1bc0e07-e9cf-4327-aec5-cb9c0ded2556","descriptor":"item-form-complex-popup","descriptorVersion":2,"values":{"formType":"task-form","formGroup":{"path":["context"]}},"content":{"[footer]":[{"id":"31979bac-00bd-4123-a901-9d14190c8dde","descriptor":"buttons-panel","values":{"buttons":{"path":["actionButtons"]}}}],"[content]":[{"id":"c18e9118-cda2-49f4-ae50-5414c9b970b2","descriptor":"modal-body","values":{"shadow":true},"content":{"":[{"id":"262845cc-094d-4c05-ba19-5e2f4efcfa09","descriptor":"tabset","values":{"__renderContentAsync":false,"__outlet":"","__baseURL":"","__relativeURL":"","hideSinglePage":true,"__isConstValues":[]},"content":{"":[{"id":"5397c346-9e5d-4614-805f-d4da90d86454","descriptor":"tab","values":{"__relativeURL":"","__isConstValues":[],"__renderContentAsync":false,"__renderContentOnDemand":false,"title":"Документы для трудоустройства","__outlet":"","__baseURL":""},"content":{"":[{"id":"1e1c8849-94c2-4bdc-aba8-043f89411b8c","descriptor":"modal-body","content":{"":[{"id":"e786e579-4f0d-4ab6-bfbc-ddfb4e30c8e2","descriptor":"kedo@custom_info","descriptorVersion":21,"values":{"__baseURL":"","info_type":[{"code":"warning","name":"Предупреждение"}],"__relativeURL":"","__isConstValues":[],"__outlet":"","__styles":"margin-bottom: 10px; width: 100%"}},{"id":"733e3278-32e8-41cd-b0c1-7c18da7693d9","descriptor":"dynamic-form","values":{"__baseURL":"","__relativeURL":"","__isConstValues":[],"form":{"path":["context"]},"fields":{"path":["fields"]},"__outlet":""}},{"id":"a47945da-adca-49a8-884e-0dc1debb897a","descriptor":"dynamic-form-row","values":{"hideEmpty":false,"__readOnly":null,"bindingMode":false,"displayName":"Трудовой договор","control":{"path":["context","labor_contract_file"]},"tooltip":"Приложите файл в формате .pdf, .docx или .xlsx","__outlet":"","required":true,"__baseURL":"","__relativeURL":"","__isConstValues":[],"showDisplayName":true}},{"id":"a10731fe-52d6-4c79-8497-b1ab13505cda","descriptor":"dynamic-form-row","values":{"tooltip":"Приложите файл в формате .pdf, .docx или .xlsx","__hidden":{"path":["job_application_required"],"modifier":"not"},"__baseURL":"","hideEmpty":false,"__relativeURL":"","showDisplayName":true,"control":{"path":["context","job_application_file"]},"__outlet":"","required":{"path":["job_application_required"]},"__readOnly":null,"bindingMode":false,"displayName":"Заявление на трудоустройство","__isConstValues":[]}},{"id":"9644bd50-df31-4832-a66d-78659cbeb324","descriptor":"dynamic-form-row","values":{"control":{"path":["context","information_about_labor_activity_file"]},"__hidden":{"path":["context","information_about_labor_activity_required"],"modifier":"not"},"__outlet":"","__baseURL":"","displayName":"Заявление о ПСТД","__isConstValues":[],"tooltip":"Приложите файл в формате .pdf, .docx или .xlsx","required":{"path":["context","information_about_labor_activity_required"]},"hideEmpty":false,"__readOnly":null,"bindingMode":false,"__relativeURL":"","showDisplayName":true}},{"id":"3b736de5-42fe-4853-8412-d5460a8077b5","descriptor":"dynamic-form-row","values":{"control":{"path":["context","admission_order_file"]},"tooltip":"Приложите файл в формате .pdf, .docx или .xlsx","__hidden":{"path":["context","admission_order_required"],"modifier":"not"},"__outlet":"","required":{"path":["context","admission_order_required"]},"__baseURL":"","__readOnly":null,"bindingMode":false,"displayName":"Приказ о приеме","__relativeURL":"","showDisplayName":true,"hideEmpty":false,"__isConstValues":[]}},{"id":"b52b9fef-3908-4497-91bf-d5e722fb5e22","descriptor":"dynamic-form-row","values":{"required":{"path":["context","consent_processing_personal_data_required"]},"__readOnly":null,"__relativeURL":"","__isConstValues":[],"showDisplayName":true,"__outlet":"","tooltip":"Приложите файл в формате .pdf, .docx или .xlsx","__hidden":{"path":["context","consent_processing_personal_data_required"],"modifier":"not"},"__baseURL":"","hideEmpty":false,"bindingMode":false,"displayName":"Согласие на обработку ПД","control":{"path":["context","consent_processing_personal_data_file"]}}},{"id":"3b583c89-34a6-4fb2-ae72-be83f9ebbc2d","descriptor":"dynamic-form-row","values":{"__baseURL":"","hideEmpty":false,"bindingMode":false,"__relativeURL":"","__isConstValues":[],"showDisplayName":true,"control":{"path":["context","other_docs_table"]},"tooltip":null,"__outlet":"","required":false,"__readOnly":null}},{"id":"b262fdf8-6af4-4f8b-8bdd-895106d68eea","descriptor":"dynamic-form-row","values":{"__outlet":"","__baseURL":"","hideEmpty":false,"__readOnly":null,"control":{"path":["context","additional_agreement_table"]},"tooltip":null,"required":false,"bindingMode":false,"__relativeURL":"","__isConstValues":[],"showDisplayName":true}}]}}]}},{"id":"92fe2ddc-5f42-43ad-98b9-bf6e05813ead","descriptor":"tab","values":{"title":"Дополнительно","__hidden":{"functionName":"currentUserInGroups","functionParams":{"groupsNs":["system@administrators"]}},"__outlet":"","__baseURL":"","__relativeURL":"","__isConstValues":[],"__renderContentAsync":false,"__renderContentOnDemand":false},"content":{"":[{"id":"68231250-9733-488c-a50f-a14cf8fc95df","descriptor":"modal-body","content":{"":[{"id":"0b9b7ca0-b861-4926-b150-3f83d2bfc5fb","descriptor":"dynamic-form-row","values":{"__outlet":"","__baseURL":"","bindingMode":false,"__relativeURL":"","__isConstValues":[],"tooltip":null,"required":false,"hideEmpty":false,"__readOnly":true,"showDisplayName":true,"control":{"path":["context","job_application_required"]}}},{"id":"4c451482-039e-4e90-a60c-b9a3bfed0d98","descriptor":"dynamic-form-row","values":{"showDisplayName":true,"__outlet":"","__baseURL":"","hideEmpty":false,"__relativeURL":"","__isConstValues":[],"control":{"path":["context","admission_order_required"]},"tooltip":null,"required":false,"__readOnly":true,"bindingMode":false}},{"id":"066cc905-9194-4a04-a4e3-487d195771f1","descriptor":"dynamic-form-row","values":{"__isConstValues":[],"showDisplayName":true,"control":{"path":["context","information_about_labor_activity_required"]},"tooltip":null,"__outlet":"","__readOnly":true,"bindingMode":false,"__relativeURL":"","required":false,"__baseURL":"","hideEmpty":false}},{"id":"f3f411ce-9eef-4eb0-8e06-99b89e7f5181","descriptor":"dynamic-form-row","values":{"__baseURL":"","bindingMode":false,"tooltip":null,"required":false,"hideEmpty":false,"__readOnly":true,"__relativeURL":"","__isConstValues":[],"showDisplayName":true,"control":{"path":["context","consent_processing_personal_data_required"]},"__outlet":""}},{"id":"3abb380b-11b8-410a-a5a7-bb977a425397","descriptor":"dynamic-form-row","values":{"__readOnly":true,"bindingMode":false,"showDisplayName":true,"tooltip":null,"__outlet":"","required":false,"__baseURL":"","__isConstValues":[],"control":{"path":["context","integration_app"]},"hideEmpty":false,"__relativeURL":"","showCreateItem":false}},{"id":"14a12171-50c0-4b83-942d-8586e7ca8dab","descriptor":"dynamic-form-row","values":{"tooltip":null,"required":false,"bindingMode":false,"showDisplayName":true,"__isConstValues":[],"control":{"path":["context","print_forms_table"]},"__outlet":"","__baseURL":"","hideEmpty":false,"__readOnly":true,"displayName":"Таблица полученных печатных форм","__relativeURL":""}}]}}]}}]}}]}}],"[sidebar]":[{"id":"39d7757a-529f-4526-98f3-fddc66becf85","descriptor":"sidebar-widget","content":{"":[{"id":"abe4b782-6e2d-49cc-a57e-81b636422ee5","descriptor":"target-widget","values":{"context":{"path":["context"]}}}]}},{"id":"231b371a-64ae-4b61-8014-cba6da318ac9","descriptor":"sidebar-widget","content":{"":[{"id":"5e39b91d-aea4-467e-862f-0f8766eb44df","descriptor":"linked-item","values":{"context":{"path":["context"]}}}]}},{"id":"a4469de0-d7f3-11ec-9d64-0242ac120002","descriptor":"sidebar-widget","content":{"":[{"id":"3ead7c41-6dfa-4144-80da-2bfb5f0ccf59","descriptor":"item-reminder","values":{"formGroup":{"path":["context"]}}}]}},{"id":"56d1d0e8-aa83-4cdd-ae43-294b26ad4d04","descriptor":"sidebar-widget","content":{"":[{"id":"e1525e34-14ba-456b-b703-f407945c01e0","descriptor":"item-tasks","descriptorVersion":4,"values":{"formGroup":{"path":["context"]}}}]}},{"id":"eef018f2-1d3a-4600-a19d-791733b28b5e","descriptor":"sidebar-widget","content":{"":[{"id":"e0a17dec-603a-461a-becf-861637630584","descriptor":"messages-target","values":{"target":{"path":["target"]}}}]}}],"[formInfoPanel]":[{"id":"042f6eff-7c63-45b6-b9c9-7c48e1167ae0","descriptor":"validation-info-block","values":{"__validateResult":{"path":["context","__validateResult"]}}}],"[headerControls]":[{"id":"475aa008-aaff-402f-8de2-408bae1f1928","descriptor":"task-percent-widget","values":{"task":{"path":["task"]}}},{"id":"702d9c59-77ae-4dd5-b71a-a5fe7b58858f","descriptor":"extension-zone-toolbar-widget","values":{"item":{"path":["__itemRef"]}}},{"id":"f7b11c79-4267-4f5b-a002-dd629d549682","descriptor":"process-item-map","values":{"task":{"path":["task"]},"skipRulesCheck":true}},{"id":"ff2500ee-6573-49cd-a9e8-2d5c93350f26","descriptor":"button","values":{"createAppItemSettings":{"kind":"","settings":{"code":"","field":"","binding":null,"namespace":""}},"icon":"menu_vertical","view":"icon","label":"bpm.tasks.item@menu","action":{"path":["menuAction"]},"runProcessSettings":{"kind":"","settings":{"code":"","field":"","binding":null,"namespace":""}}}}],"[headerCustomization]":[]}},"fields":[{"code":"job_application_required","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Требуется заявление на трудоустройство?","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}},{"code":"admission_order_required","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Требуется приказ о приеме?","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}},{"code":"information_about_labor_activity_required","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Требуется заявление о ПСТД?","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}},{"code":"consent_processing_personal_data_required","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Требуется согласие на обработку ПД?","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}},{"code":"infoblock_text","type":"STRING","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"Текст инфоблока","data":{"additionalType":"markdown"}}}],"fieldVisibilityConditions":{"infoblock_text":{"enabled":false,"conditions":[]},"admission_order_required":{"enabled":false,"conditions":[]},"job_application_required":{"enabled":false,"conditions":[]},"consent_processing_personal_data_required":{"enabled":false,"conditions":[]},"information_about_labor_activity_required":{"enabled":false,"conditions":[]}},"scriptOptions":{"allowNamespace":true},"clientScripts":"/* Client scripts module */\n\ndeclare const document: any;\ndeclare const window: any;\n\nconst INFOBLOCK_TEXT_INTEGRATION = `\n        \u003cdiv style=\"padding: 10px\"\u003e\n            \u003cp\u003eПроверьте полученные документы. При необходимости вы можете их заменить или добавить новые.\u003c/p\u003e\n            \u003cp\u003eЕсли вы хотите доотправить документы из учетной системы: отправьте печатные формы из учетной системы и выполните действие \u003cb\u003eПовторно получить печатные формы\u003c/b\u003e.\u003c/p\u003e\n            \u003cp\u003eВы можете настроить список полей документов, которые необходимо прикрепить. Для этого перейдите в \u003ca href=\"${System.getBaseUrl()}/kedo/settings\" target=\"_blank\"\u003eМеню настроек КЭДО\u003c/a\u003e и поменяйте статус необходимых параметров.\u003c/p\u003e\n        \u003c/div\u003e`\n\nconst INFOBLOCK_TEXT_ATTACH = `\n        \u003cdiv style=\"padding: 10px\"\u003e\n            \u003cp\u003eПриложите необходимые для трудоустройства документы.\u003c/p\u003e\n            \u003cp\u003eВы можете настроить список полей документов, которые необходимо прикрепить. Для этого перейдите в \u003ca href=\"${System.getBaseUrl()}/kedo/settings\" target=\"_blank\"\u003eМеню настроек КЭДО\u003c/a\u003e и поменяйте статус необходимых параметров.\u003c/p\u003e\n        \u003c/div\u003e`\n\nasync function onInit(): Promise\u003cvoid\u003e {\n    await getKedoSettings();\n\n    // Если идем по ветке ручного прикладывания файлов - скрываем кнпоку повтортного получения печатных форм из 1С.\n    if (Context.data.attach_file == true) {\n        hideIntegrationButton();\n        ViewContext.data.infoblock_text = INFOBLOCK_TEXT_ATTACH;\n    } else {\n        ViewContext.data.infoblock_text = INFOBLOCK_TEXT_INTEGRATION;\n    }\n}\n\nfunction hideIntegrationButton(): void {\n    const modal = document.querySelector('.modal__main');\n\n    if (!modal) {\n        window.setTimeout(hideIntegrationButton, 500);\n        return;\n    }\n\n    const buttons = modal.querySelectorAll('button');\n\n    for (const button of buttons) {\n        // При смене названия перехода нужно будет поменять сравниваемое значение\n        if (button.textContent \u0026\u0026 button.textContent.trim() == \"Повторно получить печатные формы\") {\n            button.style.display = \"none\"\n        }\n    }\n}\n\nasync function getKedoSettings(): Promise\u003cvoid\u003e {\n    const settings = await Namespace.app.settings.search().where(f =\u003e f.__deletedAt.eq(null)).size(10000).all();\n\n    const information_about_labor_activity = settings.find(f =\u003e f.data.code == \"information_about_labor_activity\");\n    Context.data.information_about_labor_activity_required = information_about_labor_activity ? information_about_labor_activity.data.status : false;\n\n    const admission_order = settings.find(f =\u003e f.data.code == \"admission_order\");\n    Context.data.admission_order_required = admission_order ? admission_order.data.status : false;\n\n    const app_employment = settings.find(f =\u003e f.data.code == \"app_employment\");\n    Context.data.job_application_required = app_employment ? app_employment.data.status : false;\n\n    Context.data.consent_processing_personal_data_required = true;\n}\n","clientScriptOptions":{"allowNamespace":true,"allowServer":true},"serverScripts":"/* Server scripts module */\n","serverScriptOptions":{"allowNamespace":true},"dataFieldCode":"context"},"dataNamespace":"kedo.staff","dataCode":"_process_employee_reception_1c_workflow","runtime":{"version":1,"clientScripts":"System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server, System) {\n        const INFOBLOCK_TEXT_INTEGRATION = `\n        \u003cdiv style=\"padding: 10px\"\u003e\n            \u003cp\u003eПроверьте полученные документы. При необходимости вы можете их заменить или добавить новые.\u003c/p\u003e\n            \u003cp\u003eЕсли вы хотите доотправить документы из учетной системы: отправьте печатные формы из учетной системы и выполните действие \u003cb\u003eПовторно получить печатные формы\u003c/b\u003e.\u003c/p\u003e\n            \u003cp\u003eВы можете настроить список полей документов, которые необходимо прикрепить. Для этого перейдите в \u003ca href=\"${System.getBaseUrl()}/kedo/settings\" target=\"_blank\"\u003eМеню настроек КЭДО\u003c/a\u003e и поменяйте статус необходимых параметров.\u003c/p\u003e\n        \u003c/div\u003e`;\n        const INFOBLOCK_TEXT_ATTACH = `\n        \u003cdiv style=\"padding: 10px\"\u003e\n            \u003cp\u003eПриложите необходимые для трудоустройства документы.\u003c/p\u003e\n            \u003cp\u003eВы можете настроить список полей документов, которые необходимо прикрепить. Для этого перейдите в \u003ca href=\"${System.getBaseUrl()}/kedo/settings\" target=\"_blank\"\u003eМеню настроек КЭДО\u003c/a\u003e и поменяйте статус необходимых параметров.\u003c/p\u003e\n        \u003c/div\u003e`;\n        async function onInit() {\n            await getKedoSettings();\n            if (Context.data.attach_file == true) {\n                hideIntegrationButton();\n                ViewContext.data.infoblock_text = INFOBLOCK_TEXT_ATTACH;\n            }\n            else {\n                ViewContext.data.infoblock_text = INFOBLOCK_TEXT_INTEGRATION;\n            }\n        }\n        function hideIntegrationButton() {\n            const modal = document.querySelector('.modal__main');\n            if (!modal) {\n                window.setTimeout(hideIntegrationButton, 500);\n                return;\n            }\n            const buttons = modal.querySelectorAll('button');\n            for (const button of buttons) {\n                if (button.textContent \u0026\u0026 button.textContent.trim() == \"Повторно получить печатные формы\") {\n                    button.style.display = \"none\";\n                }\n            }\n        }\n        async function getKedoSettings() {\n            const settings = await Namespace.app.settings.search().where(f =\u003e f.__deletedAt.eq(null)).size(10000).all();\n            const information_about_labor_activity = settings.find(f =\u003e f.data.code == \"information_about_labor_activity\");\n            Context.data.information_about_labor_activity_required = information_about_labor_activity ? information_about_labor_activity.data.status : false;\n            const admission_order = settings.find(f =\u003e f.data.code == \"admission_order\");\n            Context.data.admission_order_required = admission_order ? admission_order.data.status : false;\n            const app_employment = settings.find(f =\u003e f.data.code == \"app_employment\");\n            Context.data.job_application_required = app_employment ? app_employment.data.status : false;\n            Context.data.consent_processing_personal_data_required = true;\n        }\n        return {\n            onInit,\n            hideIntegrationButton,\n            getKedoSettings\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n","clientFnDeclarations":[{"name":"onInit","parameters":[],"type":"[object Object]"},{"name":"hideIntegrationButton","parameters":[],"type":"[object Object]"},{"name":"getKedoSettings","parameters":[],"type":"[object Object]"}]},"__createdAt":"2023-12-20T13:08:58.670163302Z","__createdBy":"7303b866-4220-4086-a09e-348a76b12c73","__updatedAt":"2024-02-14T11:08:53.568133575Z","__updatedBy":"7303b866-4220-4086-a09e-348a76b12c73","__deletedAt":null}
