{"__id":"018c8758-0145-7a95-b834-ccd070bfe03b","namespace":"kedo.staff","code":"form_0066a2f2-86f9-4b6a-810c-add4313743c9","__name":"Проверить документы для трудоустройства","description":"","extensionZoneCode":"","sort":0,"category":"00000000-0000-0000-0000-000000000000","version":3,"hidden":true,"draft":false,"readonly":false,"descriptor":{"types":["form"],"template":{"id":"780285ef-2d2d-42e8-b68b-e74cd85a6dd1","descriptor":"item-form-complex-popup","descriptorVersion":2,"values":{"formGroup":{"path":["context"]},"formType":"task-form"},"content":{"[headerControls]":[{"id":"475aa008-aaff-402f-8de2-408bae1f1928","descriptor":"task-percent-widget","values":{"task":{"path":["task"]}}},{"id":"702d9c59-77ae-4dd5-b71a-a5fe7b58858f","descriptor":"extension-zone-toolbar-widget","values":{"item":{"path":["__itemRef"]}}},{"id":"f7b11c79-4267-4f5b-a002-dd629d549682","descriptor":"process-item-map","values":{"skipRulesCheck":true,"task":{"path":["task"]}}},{"id":"ff2500ee-6573-49cd-a9e8-2d5c93350f26","descriptor":"button","values":{"runProcessSettings":{"kind":"","settings":{"code":"","field":"","binding":null,"namespace":""}},"createAppItemSettings":{"kind":"","settings":{"code":"","field":"","binding":null,"namespace":""}},"icon":"menu_vertical","view":"icon","label":"bpm.tasks.item@menu","action":{"path":["menuAction"]}}}],"[headerCustomization]":[],"[footer]":[{"id":"31979bac-00bd-4123-a901-9d14190c8dde","descriptor":"buttons-panel","values":{"buttons":{"path":["actionButtons"]}}}],"[content]":[{"id":"c18e9118-cda2-49f4-ae50-5414c9b970b2","descriptor":"modal-body","values":{"shadow":true},"content":{"":[{"id":"dcdd3e4e-0c49-483b-87c2-8c782a8890f0","descriptor":"dynamic-form","values":{"form":{"path":["context"]},"fields":{"path":["fields"]}}},{"id":"9f3a97d6-21e8-4206-b45f-c9a9f9217313","descriptor":"dynamic-form-row","values":{"control":{"path":["context","labor_contract_file"]},"required":true,"__readOnly":null,"displayName":"Трудовой договор","__isConstValues":[],"tooltip":null,"hideEmpty":false,"bindingMode":false,"showDisplayName":true}},{"id":"7003056a-e262-4b66-a072-4d1bc1bc6bec","descriptor":"dynamic-form-row","values":{"tooltip":null,"__hidden":{"path":["context","app_employment_required"],"modifier":"not"},"__isConstValues":[],"showDisplayName":true,"control":{"path":["context","file_job_application"]},"hideEmpty":false,"__readOnly":null,"bindingMode":false,"displayName":"Заявления на трудоустройство","required":{"path":["context","app_employment_required"]}}},{"id":"00b376ec-874f-4fe7-80cf-26f50e995dbe","descriptor":"dynamic-form-row","values":{"__isConstValues":[],"required":{"path":["context","admission_order_required"]},"__readOnly":null,"bindingMode":false,"hideEmpty":false,"displayName":"Приказ о приёме","showDisplayName":true,"control":{"path":["context","admission_order_file"]},"tooltip":null,"__hidden":{"path":["context","admission_order_required"],"modifier":"not"}}},{"id":"63f219fc-eef3-4f23-a98f-fa27c73c8f44","descriptor":"dynamic-form-row","values":{"required":{"path":["context","app_labor_required"]},"showDisplayName":true,"__readOnly":null,"bindingMode":false,"displayName":"Заявление о ПСТД","__isConstValues":[],"control":{"path":["context","file_information_about_labor_activity"]},"tooltip":null,"__hidden":{"path":["context","app_labor_required"],"modifier":"not"},"hideEmpty":false}},{"id":"8ac6d452-4c49-4c7d-8c68-9ddb80c4690e","descriptor":"dynamic-form-row","values":{"__isConstValues":[],"showDisplayName":true,"widgetCustomSettings":{"kind":"BlobObject","settings":{"columnsView":{"type_1c":{"key":false,"font":{"bold":false,"color":"","italic":false,"underline":false},"align":"left","width":175,"hidden":false,"tensile":false,"readonly":true,"required":false,"compression":false,"verticalAlign":"middle","backgroundColor":""},"doc_file":{"key":false,"font":{"bold":false,"color":"","italic":false,"underline":false},"align":"left","width":175,"hidden":false,"tensile":false,"readonly":false,"required":true,"compression":false,"verticalAlign":"middle","backgroundColor":""},"doc_type":{"key":false,"font":{"bold":false,"color":"","italic":false,"underline":false},"align":"left","width":175,"hidden":false,"tensile":false,"readonly":false,"required":true,"compression":false,"verticalAlign":"middle","backgroundColor":""},"view_file":{"key":false,"font":{"bold":false,"color":"","italic":false,"underline":false},"align":"left","width":175,"hidden":false,"tensile":false,"readonly":true,"required":false,"compression":false,"verticalAlign":"middle","backgroundColor":""}},"allowDeleteRows":true}},"control":{"path":["context","docs"]},"required":false,"__readOnly":null,"bindingMode":false,"tooltip":null,"hideEmpty":false,"onChangeValue":{"kind":"Function","name":"employment_documents_table_onchange","type":"client"}}},{"id":"2f1ad593-553f-4244-863c-259e83e10653","descriptor":"dynamic-form-row","values":{"__readOnly":null,"__isConstValues":[],"widgetCustomSettings":{"kind":"BlobObject","settings":{"columnsView":{"file":{"key":false,"font":{"bold":false,"color":"","italic":false,"underline":false},"align":"left","width":175,"hidden":false,"tensile":false,"readonly":false,"required":true,"compression":false,"verticalAlign":"middle","backgroundColor":""},"name":{"key":false,"font":{"bold":false,"color":"","italic":false,"underline":false},"align":"left","width":175,"hidden":true,"tensile":false,"readonly":false,"required":false,"compression":false,"verticalAlign":"middle","backgroundColor":""},"view_file":{"key":false,"font":{"bold":false,"color":"","italic":false,"underline":false},"align":"left","width":175,"hidden":false,"tensile":false,"readonly":true,"required":false,"compression":false,"verticalAlign":"middle","backgroundColor":""}},"allowDeleteRows":true}},"control":{"path":["context","additional_agreements"]},"tooltip":null,"required":false,"hideEmpty":false,"bindingMode":false,"onChangeValue":{"kind":"Function","name":"additional_agreement_table_onchange","type":"client"},"showDisplayName":true}}]}}],"[sidebar]":[{"id":"39d7757a-529f-4526-98f3-fddc66becf85","descriptor":"sidebar-widget","content":{"":[{"id":"abe4b782-6e2d-49cc-a57e-81b636422ee5","descriptor":"target-widget","values":{"context":{"path":["context"]}}}]}},{"id":"231b371a-64ae-4b61-8014-cba6da318ac9","descriptor":"sidebar-widget","content":{"":[{"id":"5e39b91d-aea4-467e-862f-0f8766eb44df","descriptor":"linked-item","values":{"context":{"path":["context"]}}}]}},{"id":"a4469de0-d7f3-11ec-9d64-0242ac120002","descriptor":"sidebar-widget","content":{"":[{"id":"3ead7c41-6dfa-4144-80da-2bfb5f0ccf59","descriptor":"item-reminder","values":{"formGroup":{"path":["context"]}}}]}},{"id":"56d1d0e8-aa83-4cdd-ae43-294b26ad4d04","descriptor":"sidebar-widget","content":{"":[{"id":"e1525e34-14ba-456b-b703-f407945c01e0","descriptor":"item-tasks","descriptorVersion":4,"values":{"formGroup":{"path":["context"]}}}]}},{"id":"eef018f2-1d3a-4600-a19d-791733b28b5e","descriptor":"sidebar-widget","content":{"":[{"id":"e0a17dec-603a-461a-becf-861637630584","descriptor":"messages-target","values":{"target":{"path":["target"]}}}]}}],"[formInfoPanel]":[{"id":"d93f8c53-cc86-4ffe-9bba-96e8528c2ae3","descriptor":"validation-info-block","values":{"__validateResult":{"path":["context","__validateResult"]}}}]}},"fields":[{"code":"additional_agreement_temp_table","type":"TABLE","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{"fields":[{"code":"__count","data":null,"type":"FLOAT","view":{"data":{"additionalType":"integer"},"name":"Количество элементов","system":true},"array":false,"single":true,"deleted":false,"formula":"","indexed":false,"required":false,"searchable":false,"defaultValue":null,"calcByFormula":false},{"code":"__index","data":{},"type":"FLOAT","view":{"data":{"additionalType":"integer"},"name":"№","disabled":true},"array":false,"single":true,"deleted":false,"formula":"","indexed":true,"required":false,"searchable":false,"defaultValue":null,"calcByFormula":false},{"code":"file","data":{},"type":"FILE","view":{"data":{},"name":"Файл"},"array":true,"single":true,"deleted":false,"formula":"","indexed":false,"required":false,"searchable":false,"defaultValue":null,"calcByFormula":false},{"code":"name","data":{},"type":"STRING","view":{"data":{"additionalType":"string"},"name":"Название"},"array":false,"single":true,"deleted":false,"formula":"","indexed":false,"required":false,"searchable":false,"defaultValue":null,"calcByFormula":false},{"code":"view_file","data":{},"type":"FILE","view":{"data":{},"name":"Предпросмотр загруженного документа"},"array":true,"single":true,"deleted":false,"formula":"","indexed":false,"required":false,"searchable":false,"defaultValue":null,"calcByFormula":false}],"result":{"file":{"kind":"none","label":"","formula":"sum"},"name":{"kind":"none","label":"","formula":"sum"},"__count":{"kind":"none","label":"","formula":"sum"},"__index":{"kind":"none","label":"","formula":"sum"},"view_file":{"kind":"none","label":"","formula":"sum"}}},"view":{"name":"Дополнительные соглашение (таблица-посредник)","data":{"allowDeleteRows":false,"collapseNestedHeaders":false,"columnsView":{"file":{"align":"left","compression":false,"font":{"bold":false,"color":"","italic":false,"underline":false},"hidden":false,"readonly":false,"required":false,"tensile":false,"verticalAlign":"middle","width":175},"name":{"align":"left","compression":false,"font":{"bold":false,"color":"","italic":false,"underline":false},"hidden":false,"readonly":false,"required":false,"tensile":false,"verticalAlign":"middle","width":175},"view_file":{"align":"left","compression":false,"font":{"bold":false,"color":"","italic":false,"underline":false},"hidden":false,"readonly":false,"required":false,"tensile":false,"verticalAlign":"middle","width":175}},"footerHidden":false,"groupingSettings":{"code":"","kind":"None","sort":"asc"},"headerHidden":false,"maxRowCount":0,"relativeWidth":false,"showOrderNumbers":false,"viewTemplate":"Элементов: {$__count}","viewVariant":"table"}}},{"code":"docs_table_string","type":"STRING","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"docs_table_string","data":{"additionalType":"string"}}},{"code":"additional_agreement_table_string","type":"STRING","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"additional_agreement_table_string","data":{"additionalType":"string"}}}],"fieldVisibilityConditions":{"docs_table_string":{"enabled":false,"conditions":[]},"additional_agreement_temp_table":{"enabled":false,"conditions":[]},"additional_agreement_table_string":{"enabled":false,"conditions":[]}},"scriptOptions":{},"clientScripts":"async function additional_agreement_table_onchange(): Promise\u003cvoid\u003e {\n    const additional_agreement_table = Context.data.additional_agreements!;\n\n    for (const row of additional_agreement_table) {\n        if (row.file \u0026\u0026 !row.view_file) {\n            const file = await row.file.fetch();\n            const new_file = await Context.fields.additional_agreements.fields.file.createFromLink(file.data.__name, await file.getDownloadUrl());\n            row.view_file = new_file;\n        }\n\n        if (!row.file \u0026\u0026 row.view_file) {\n            row.view_file = row.file;\n        }\n    }\n\n    if (JSON.stringify((Context.data.additional_agreements as any).json()) !== ViewContext.data.additional_agreement_table_string) {\n        ViewContext.data.additional_agreement_table_string = JSON.stringify((Context.data.additional_agreements as any).json());\n        Context.data.additional_agreements = Context.data.additional_agreements;\n    }\n}\n\nasync function employment_documents_table_onchange(): Promise\u003cvoid\u003e {\n    const employment_documents = Context.data.docs!;\n\n    for (const row of employment_documents) {\n        if (row.doc_file \u0026\u0026 !row.view_file) {\n            const file = await row.doc_file.fetch();\n            const new_file = await Context.fields.docs.fields.doc_file.createFromLink(file.data.__name, await file.getDownloadUrl());\n            row.view_file = new_file;\n        }\n\n        if (!row.doc_file \u0026\u0026 row.view_file) {\n            row.view_file = row.doc_file;\n        }\n    }\n\n    if (JSON.stringify((Context.data.docs as any).json()) !== ViewContext.data.docs_table_string) {\n        ViewContext.data.docs_table_string = JSON.stringify((Context.data.docs as any).json());\n        Context.data.docs = Context.data.docs;\n    }\n}\n","clientScriptOptions":{"allowServer":true},"serverScripts":"/* Server scripts module */\n","serverScriptOptions":{},"dataFieldCode":"context"},"dataNamespace":"kedo.staff","dataCode":"_process_get_print_form_from_1c","runtime":{"version":1,"clientScripts":"System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server) {\n        async function additional_agreement_table_onchange() {\n            const additional_agreement_table = Context.data.additional_agreements;\n            for (const row of additional_agreement_table) {\n                if (row.file \u0026\u0026 !row.view_file) {\n                    const file = await row.file.fetch();\n                    const new_file = await Context.fields.additional_agreements.fields.file.createFromLink(file.data.__name, await file.getDownloadUrl());\n                    row.view_file = new_file;\n                }\n                if (!row.file \u0026\u0026 row.view_file) {\n                    row.view_file = row.file;\n                }\n            }\n            if (JSON.stringify(Context.data.additional_agreements.json()) !== ViewContext.data.additional_agreement_table_string) {\n                ViewContext.data.additional_agreement_table_string = JSON.stringify(Context.data.additional_agreements.json());\n                Context.data.additional_agreements = Context.data.additional_agreements;\n            }\n        }\n        async function employment_documents_table_onchange() {\n            const employment_documents = Context.data.docs;\n            for (const row of employment_documents) {\n                if (row.doc_file \u0026\u0026 !row.view_file) {\n                    const file = await row.doc_file.fetch();\n                    const new_file = await Context.fields.docs.fields.doc_file.createFromLink(file.data.__name, await file.getDownloadUrl());\n                    row.view_file = new_file;\n                }\n                if (!row.doc_file \u0026\u0026 row.view_file) {\n                    row.view_file = row.doc_file;\n                }\n            }\n            if (JSON.stringify(Context.data.docs.json()) !== ViewContext.data.docs_table_string) {\n                ViewContext.data.docs_table_string = JSON.stringify(Context.data.docs.json());\n                Context.data.docs = Context.data.docs;\n            }\n        }\n        return {\n            additional_agreement_table_onchange,\n            employment_documents_table_onchange\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n","clientFnDeclarations":[{"name":"additional_agreement_table_onchange","parameters":[],"type":"[object Object]"},{"name":"employment_documents_table_onchange","parameters":[],"type":"[object Object]"}]},"__createdAt":"2023-12-20T13:09:00.866761971Z","__createdBy":"7303b866-4220-4086-a09e-348a76b12c73","__updatedAt":"2024-02-14T11:07:45.413553103Z","__updatedBy":"7303b866-4220-4086-a09e-348a76b12c73","__deletedAt":null}
