{"__id":"018c8758-0e9b-7ad8-aa23-cbaaf7cc60b9","namespace":"kedo.medical_request","code":"forma_sozdaniya","__name":"Форма создания","description":"","extensionZoneCode":"","sort":0,"category":"00000000-0000-0000-0000-000000000000","version":3,"hidden":false,"draft":false,"readonly":false,"descriptor":{"types":["form"],"template":{"id":"1a6be995-f0b4-4c05-9c96-50ec523db329","descriptor":"item-form-complex-popup","descriptorVersion":2,"values":{"formGroup":{"path":["item"]},"systemFunctions":{"onInit":{"kind":"Function","name":"onInit","type":"client"}}},"content":{"[content]":[{"id":"c18e9118-cda2-49f4-ae50-5414c9b970b2","descriptor":"modal-body","values":{"shadow":true},"content":{"":[{"id":"b9dbfcad-d5e2-49d0-bfc9-0e817c7a30e6","descriptor":"dynamic-form","values":{"form":{"path":["item"]},"fields":{"path":["fields"]}}}]}}],"[sidebar]":[{"id":"662f08da-59da-4112-9ae1-763785ab8bf2","descriptor":"sidebar-widget","content":{"":[{"id":"1556d7a7-eaa5-41a2-b262-82ec3b86e64d","descriptor":"user-guide"}]}}],"[headerControls]":[],"[headerCustomization]":[],"[footer]":[{"id":"e592c489-7d0b-443c-9e4d-82f87748a977","descriptor":"zone-content","values":{"zoneCode":"[footer]"}}]}},"fieldVisibilityConditions":{},"scriptOptions":{"allowNamespace":true},"clientScripts":"/* Client scripts module */\n\nasync function onInit(): Promise\u003cvoid\u003e {\n    const user = await System.users.getCurrentUser();\n    const staff = await Namespace.app.staff.search()\n        .where((f,g) =\u003e g.and(\n            f.__deletedAt.eq(null),\n            f.ext_user.eq(user)\n        ))\n        .first();\n    if (!staff)\n        return\n    Context.data.staff = staff;\n    Context.data.old_postion = staff.data.position;\n    const position = await staff.data.position!.fetch();\n    Context.data.harmful_factors = position.data.harmful_production_factors;\n    Context.data.sort_of_medical_examination = Context.fields.sort_of_medical_examination.variants.special_examination\n}\n","clientScriptOptions":{"allowNamespace":true,"allowServer":true},"serverScripts":"/* Server scripts module */\n","serverScriptOptions":{"allowNamespace":true},"widgetZones":[{"code":"[footer]"}],"dataFieldCode":"item"},"dataNamespace":"kedo","dataCode":"medical_request","runtime":{"version":1,"clientScripts":"System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server) {\n        async function onInit() {\n            const user = await System.users.getCurrentUser();\n            const staff = await Namespace.app.staff.search()\n                .where((f, g) =\u003e g.and(f.__deletedAt.eq(null), f.ext_user.eq(user)))\n                .first();\n            if (!staff)\n                return;\n            Context.data.staff = staff;\n            Context.data.old_postion = staff.data.position;\n            const position = await staff.data.position.fetch();\n            Context.data.harmful_factors = position.data.harmful_production_factors;\n            Context.data.sort_of_medical_examination = Context.fields.sort_of_medical_examination.variants.special_examination;\n        }\n        return {\n            onInit\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n","clientFnDeclarations":[{"name":"onInit","parameters":[],"type":"[object Object]"}]},"__createdAt":"2023-12-20T13:09:04.283320444Z","__createdBy":"7303b866-4220-4086-a09e-348a76b12c73","__updatedAt":"2024-02-14T11:07:35.94899668Z","__updatedBy":"7303b866-4220-4086-a09e-348a76b12c73","__deletedAt":null}
