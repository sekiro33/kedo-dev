{"__id":"018fb8c3-2e29-71ff-a55d-57e18d2446b2","namespace":"kedo.letter_of_resignation","code":"_create","__name":"Форма создания","description":"","extensionZoneCode":"","sort":0,"category":"00000000-0000-0000-0000-000000000000","version":5,"hidden":false,"draft":false,"readonly":false,"descriptor":{"types":["form"],"template":{"id":"dd4ce55f-912a-4376-9541-da0fe9f6e311","descriptor":"item-form-complex-popup","descriptorVersion":2,"values":{"systemFunctions":{"validate":{"kind":"Function","name":"validate","type":"client"}},"formGroup":{"path":["item"]}},"content":{"[sidebar]":[{"id":"d66aba74-334f-4f04-b5d9-b0dc06e96ac0","descriptor":"sidebar-widget","values":{"title":"Инструкция","__renderContentAsync":false},"content":{"":[{"id":"d02d2ce1-9785-4237-a92e-c24d721e782c","descriptor":"html","descriptorVersion":3,"values":{"html":"\u003cp\u003eДанная заявка запускает процесс увольнения и создаёт печатный образ заявления по увольнение по собственному желанию. Заявление можно скачать для подписания или подписать в электронном виде (если есть согласие на КЭДО). На основании заявление будет сформирован приказ, который нужно подписать обязательно в бумажном виде - дождитесь соответствующей задачи. Помните, что вы имеете право отозвать заявление на увольнение вплоть до последнего рабочего дня.\u003c/p\u003e"}}]}}],"[headerControls]":[],"[headerCustomization]":[],"[footer]":[{"id":"7a7b146f-cd3d-418f-af37-27b09a296a95","descriptor":"zone-content","values":{"zoneCode":"[footer]"}}],"[content]":[{"id":"9b754e34-62c5-4e36-b975-c19ac2ae098f","descriptor":"ext_7fe3de7d-f459-4f75-940c-271c6e9ea1ed@forget_me_not_widget","descriptorVersion":4,"values":{"element_name":"заявления на увольнение","__isConstValues":[]}},{"id":"7d7bd35a-d521-4c08-9d55-d7c3a74932cc","descriptor":"modal-body","content":{"":[{"id":"45f3704d-9639-4ed5-adb7-a76cc57f9229","descriptor":"dynamic-form-row","values":{"control":{"path":["item","staff"]},"required":false,"__baseURL":"","hideEmpty":false,"bindingMode":false,"showCreateItem":false,"tooltip":null,"__outlet":"","__readOnly":false,"__relativeURL":"","__isConstValues":[],"showDisplayName":true}},{"id":"db180c12-f733-4272-b302-f848f96993a7","descriptor":"kedo.employment_directory@employments_list_widget","descriptorVersion":1,"values":{"employment_placement_name_visible":true,"__outlet":"","__baseURL":"","__relativeURL":"","__isConstValues":[],"employment_placement_required":true,"staff":{"path":["item","staff"]},"__styles":"width: 100%","employment_placement":{"path":["item","employment_placement"]},"__renderContentOnDemand":false}},{"id":"1376f9e8-6cee-46e5-aeda-3a52ab7da1f8","descriptor":"dynamic-form-row","values":{"__readOnly":null,"bindingMode":false,"showDisplayName":true,"control":{"path":["item","date_of_dismissal"]},"tooltip":null,"required":true}},{"id":"293543a1-7645-4fa1-8518-af12c3a83ff2","descriptor":"dynamic-form-row","values":{"control":{"path":["item","reason_for_leaving"]},"tooltip":null,"required":true,"__readOnly":null,"bindingMode":false,"showDisplayName":true}}]}}]}},"fields":[{"code":"test","type":"BOOLEAN","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"test","data":{"additionalType":"radio","noValue":"Нет","yesValue":"Да"}}},{"code":"date","type":"DATETIME","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"date","data":{"additionalType":"date","defaultTimeType":"startOfDay","timeOptional":false}}},{"code":"debug","type":"STRING","searchable":false,"indexed":false,"deleted":false,"array":false,"required":false,"single":true,"defaultValue":null,"calcByFormula":false,"formula":"","data":{},"view":{"name":"debug","data":{"additionalType":"text"}}}],"fieldVisibilityConditions":{"date":{"enabled":false,"conditions":[]},"test":{"enabled":false,"conditions":[]},"debug":{"enabled":false,"conditions":[]}},"scriptOptions":{},"clientScripts":"/* Client scripts module */\nasync function onInit(): Promise\u003cvoid\u003e\n{\n    let user = await System.users.getCurrentUser();\n    let user_card = await Context.fields.staff.app.search().where(f=\u003e f.ext_user.eq(user)).first();\n    if(user_card)\n    {\n        Context.data.staff =  user_card!;\n    }\n}\n\nasync function validate(): Promise\u003cValidationResult\u003e {\n    const result = new ValidationResult();\n    if (new TDate().after(Context.data.date_of_dismissal!) \u0026\u0026 new TDate().format() !== Context.data.date_of_dismissal!.format()) {\n        result.addContextError('date_of_dismissal', \"Дата увольнение не может быть раньше текущей даты\")\n    }\n    return result;\n}\n","clientScriptOptions":{"allowServer":true},"serverScripts":"/* Server scripts module */\n","serverScriptOptions":{},"widgetZones":[{"code":"[footer]"}],"dataFieldCode":"item"},"dataNamespace":"kedo","dataCode":"letter_of_resignation","runtime":{"version":1,"clientScripts":"System.register([], function (exports_1, context_1) {\n    \"use strict\";\n    var __moduleName = context_1 \u0026\u0026 context_1.id;\n    function default_1(Context, ViewContext, Server, System) {\n        async function onInit() {\n            let user = await System.users.getCurrentUser();\n            let user_card = await Context.fields.staff.app.search().where(f =\u003e f.ext_user.eq(user)).first();\n            if (user_card) {\n                Context.data.staff = user_card;\n            }\n        }\n        async function validate() {\n            const result = new ValidationResult();\n            if (new TDate().after(Context.data.date_of_dismissal) \u0026\u0026 new TDate().format() !== Context.data.date_of_dismissal.format()) {\n                result.addContextError('date_of_dismissal', \"Дата увольнение не может быть раньше текущей даты\");\n            }\n            return result;\n        }\n        return {\n            onInit,\n            validate\n        };\n    }\n    exports_1(\"default\", default_1);\n    return {\n        setters: [],\n        execute: function () {\n        }\n    };\n});\n","clientFnDeclarations":[{"name":"onInit","parameters":[],"type":"[object Object]"},{"name":"validate","parameters":[],"type":"[object Object]"}]},"__createdAt":"2024-05-27T06:35:50.184112553Z","__createdBy":"59e0911f-230a-4b6d-becf-6b302a91977a","__updatedAt":"2024-06-05T06:24:46.327094697Z","__updatedBy":"59e0911f-230a-4b6d-becf-6b302a91977a","__deletedAt":null}
